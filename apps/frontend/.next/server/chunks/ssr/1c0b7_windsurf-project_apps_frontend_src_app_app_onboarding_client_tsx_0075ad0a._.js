module.exports=[98107,a=>{"use strict";var b=a.i(30091),c=a.i(51729),d=a.i(69982);let e=[{key:"workspace",title:"Create Workspace",description:"Set up your organization and workspace"},{key:"connect-ads",title:"Connect Ad Accounts",description:"Link your Google, Meta, or TikTok ad accounts"},{key:"install-tracker",title:"Install Tracker",description:"Add the Optiq tracking script to your website"},{key:"set-targets",title:"Set Targets",description:"Define your CPA and ROAS goals"},{key:"first-insights",title:"First Insights",description:"See your initial attribution data"}];function f(){var a;let f=(0,d.useRouter)(),[i,m]=(0,c.useState)({currentStep:"workspace",workspaceCreated:!1,adsConnected:!1,trackerInstalled:!1,targetsSet:!1}),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)({google:!1,meta:!1,tiktok:!1}),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({targetCpa:50,targetRoas:3}),[v,w]=(0,c.useState)(!1),x=(0,c.useCallback)(async()=>{o(!0);try{let a=await fetch("/api/onboarding/status");if(a.ok){let b=await a.json();m(b.state),q(b.connections||{google:!1,meta:!1,tiktok:!1}),b.trackerInfo&&s(b.trackerInfo),b.targets&&u(b.targets)}}catch{}finally{o(!1)}},[]);(0,c.useEffect)(()=>{x()},[x]);let y=async()=>{w(!0);try{(await fetch("/api/onboarding/complete-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:"workspace"})})).ok&&m(a=>({...a,workspaceCreated:!0,currentStep:"connect-ads"}))}finally{w(!1)}},z=async a=>{window.location.href=`/api/integrations/${a}/connect?returnTo=/app/onboarding`},A=async()=>{w(!0);try{await fetch("/api/onboarding/complete-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:"connect-ads"})}),m(a=>({...a,adsConnected:!0,currentStep:"install-tracker"}))}finally{w(!1)}},B=async()=>{w(!0);try{let a=await fetch("/api/onboarding/generate-tracker",{method:"POST"});if(a.ok){let b=await a.json();s(b)}}finally{w(!1)}},C=async()=>{w(!0);try{let a=await fetch("/api/onboarding/verify-tracker",{method:"POST"});a.ok&&((await a.json()).verified?m(a=>({...a,trackerInstalled:!0,currentStep:"set-targets"})):alert("Tracker not detected yet. Please ensure the script is installed and try again."))}finally{w(!1)}},D=async()=>{w(!0);try{(await fetch("/api/onboarding/set-targets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&m(a=>({...a,targetsSet:!0,currentStep:"first-insights"}))}finally{w(!1)}},E=(a=i.currentStep,e.findIndex(b=>b.key===a));return n?(0,b.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center",children:(0,b.jsx)("div",{className:"text-zinc-500",children:"Loading..."})}):(0,b.jsxs)("div",{className:"mx-auto max-w-3xl space-y-8 py-8",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-semibold tracking-tight text-zinc-900",children:"Welcome to Optiq"}),(0,b.jsx)("p",{className:"mt-2 text-zinc-600",children:"Let's get you set up in just a few minutes"})]}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-2",children:e.map((a,c)=>{let d="workspace"===a.key&&i.workspaceCreated||"connect-ads"===a.key&&i.adsConnected||"install-tracker"===a.key&&i.trackerInstalled||"set-targets"===a.key&&i.targetsSet||"first-insights"===a.key&&!1,f=a.key===i.currentStep;return(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("button",{onClick:()=>{var b;return b=a.key,void m(a=>({...a,currentStep:b}))},className:`flex h-10 w-10 items-center justify-center rounded-full text-sm font-medium transition-colors ${d?"bg-green-500 text-white":f?"bg-zinc-900 text-white":"bg-zinc-200 text-zinc-600"}`,children:d?"âœ“":c+1}),c<e.length-1&&(0,b.jsx)("div",{className:`mx-2 h-0.5 w-8 ${c<E?"bg-green-500":"bg-zinc-200"}`})]},a.key)})}),(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-8",children:["workspace"===i.currentStep&&(0,b.jsx)(g,{completed:i.workspaceCreated,onComplete:y,saving:v}),"connect-ads"===i.currentStep&&(0,b.jsx)(h,{connections:p,onConnect:z,onSkip:()=>{m(a=>({...a,currentStep:"install-tracker"}))},onContinue:A,saving:v}),"install-tracker"===i.currentStep&&(0,b.jsx)(j,{trackerInfo:r,onGenerate:B,onVerify:C,onSkip:()=>{m(a=>({...a,currentStep:"set-targets"}))},saving:v}),"set-targets"===i.currentStep&&(0,b.jsx)(k,{targets:t,onTargetsChange:u,onSave:D,saving:v}),"first-insights"===i.currentStep&&(0,b.jsx)(l,{onFinish:()=>{f.push("/app/roi")}})]})]})}function g({completed:a,onComplete:c,saving:d}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Create Your Workspace"}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600",children:"Your workspace is already set up! Click continue to proceed."})]}),(0,b.jsx)("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white",children:"âœ“"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-green-900",children:"Workspace Ready"}),(0,b.jsx)("div",{className:"text-sm text-green-700",children:"Your organization and workspace have been created"})]})]})}),(0,b.jsx)("button",{onClick:c,disabled:d,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:d?"Saving...":"Continue"})]})}function h({connections:a,onConnect:c,onSkip:d,onContinue:e,saving:f}){let g=a.google||a.meta||a.tiktok;return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Connect Your Ad Accounts"}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600",children:"Link your advertising platforms to start tracking spend and attribution"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i,{name:"Google Ads",icon:"G",connected:a.google,onConnect:()=>c("google")}),(0,b.jsx)(i,{name:"Meta Ads",icon:"M",connected:a.meta,onConnect:()=>c("meta")}),(0,b.jsx)(i,{name:"TikTok Ads",icon:"T",connected:a.tiktok,onConnect:()=>c("tiktok")})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:d,className:"flex-1 rounded-lg border border-zinc-200 px-4 py-3 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Skip for now"}),(0,b.jsx)("button",{onClick:e,disabled:f||!g,className:"flex-1 rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:f?"Saving...":"Continue"})]})]})}function i({name:a,icon:c,connected:d,onConnect:e}){return(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-zinc-100 text-lg font-bold text-zinc-700",children:c}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-zinc-900",children:a}),(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:d?"Connected":"Not connected"})]})]}),d?(0,b.jsx)("span",{className:"rounded-full bg-green-100 px-3 py-1 text-sm font-medium text-green-700",children:"âœ“ Connected"}):(0,b.jsx)("button",{onClick:e,className:"rounded-lg border border-zinc-200 px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Connect"})]})}function j({trackerInfo:a,onGenerate:d,onVerify:e,onSkip:f,saving:g}){let[h,i]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Install Tracking Script"}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600",children:"Add this script to your website to track visitor journeys and conversions"})]}),a?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Your Site Key"}),(0,b.jsx)("div",{className:"mt-1 rounded-lg bg-zinc-100 px-4 py-2 font-mono text-sm text-zinc-900",children:a.siteKey})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Copy this snippet into your website's <head> tag"}),(0,b.jsxs)("div",{className:"relative mt-1",children:[(0,b.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-zinc-900 p-4 text-sm text-zinc-100",children:a.snippet}),(0,b.jsx)("button",{onClick:()=>{a&&(navigator.clipboard.writeText(a.snippet),i(!0),setTimeout(()=>i(!1),2e3))},className:"absolute right-2 top-2 rounded bg-zinc-700 px-3 py-1 text-xs text-white hover:bg-zinc-600",children:h?"Copied!":"Copy"})]})]}),(0,b.jsx)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:(0,b.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"What this script does:"}),(0,b.jsxs)("ul",{className:"mt-2 list-inside list-disc space-y-1",children:[(0,b.jsx)("li",{children:"Assigns a first-party visitor ID cookie"}),(0,b.jsx)("li",{children:"Captures UTM parameters and referrer"}),(0,b.jsx)("li",{children:"Tracks page views and conversions"}),(0,b.jsx)("li",{children:"Enables multi-touch attribution"})]})]})})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-zinc-600",children:"Generate your unique tracking script to get started."}),(0,b.jsx)("button",{onClick:d,disabled:g,className:"rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:g?"Generating...":"Generate Tracking Script"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:f,className:"flex-1 rounded-lg border border-zinc-200 px-4 py-3 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Skip for now"}),(0,b.jsx)("button",{onClick:e,disabled:g||!a,className:"flex-1 rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:g?"Verifying...":"Verify Installation"})]})]})}function k({targets:a,onTargetsChange:c,onSave:d,saving:e}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Set Your Performance Targets"}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600",children:"Define your CPA and ROAS goals to enable waste detection alerts"})]}),(0,b.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target CPA"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-zinc-500",children:"$"}),(0,b.jsx)("input",{type:"number",min:"0",step:"1",value:a.targetCpa,onChange:b=>c({...a,targetCpa:parseFloat(b.target.value)||0}),className:"w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Your target cost per acquisition"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target ROAS"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"0",step:"0.1",value:a.targetRoas,onChange:b=>c({...a,targetRoas:parseFloat(b.target.value)||0}),className:"w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,b.jsx)("span",{className:"text-zinc-500",children:"x"})]}),(0,b.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Your target return on ad spend"})]})]}),(0,b.jsx)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,b.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,b.jsx)("strong",{children:"How targets work:"}),(0,b.jsx)("p",{className:"mt-1",children:"Optiq will alert you when campaigns exceed your CPA target or fall below your ROAS target. You can adjust these anytime in Settings."})]})}),(0,b.jsx)("button",{onClick:d,disabled:e,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:e?"Saving...":"Save & Continue"})]})}function l({onFinish:a}){return(0,b.jsxs)("div",{className:"space-y-6 text-center",children:[(0,b.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:(0,b.jsx)("span",{className:"text-3xl",children:"ðŸŽ‰"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"You're All Set!"}),(0,b.jsx)("p",{className:"mt-1 text-zinc-600",children:"Optiq is now tracking your ad performance and building attribution data."})]}),(0,b.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-zinc-50 p-6 text-left",children:[(0,b.jsx)("h3",{className:"font-medium text-zinc-900",children:"What happens next:"}),(0,b.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-zinc-600",children:[(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,b.jsx)("span",{children:"Cost data syncs from your connected ad accounts (usually within 1 hour)"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,b.jsx)("span",{children:"Visitor journeys are built as users interact with your site"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,b.jsx)("span",{children:"Attribution is calculated for each conversion"})]}),(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,b.jsx)("span",{children:"Waste detection alerts you to underperforming spend"})]})]})]}),(0,b.jsx)("button",{onClick:a,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800",children:"Go to Dashboard"})]})}a.s(["OnboardingClient",()=>f])}];

//# sourceMappingURL=1c0b7_windsurf-project_apps_frontend_src_app_app_onboarding_client_tsx_0075ad0a._.js.map