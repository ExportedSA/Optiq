module.exports=[85770,a=>{"use strict";var b=a.i(30091),c=a.i(51729);function d({alert:a,onStatusUpdate:d}){let e,f,g,h,i,[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(!1),n=async b=>{m(!0),await d(a.id,b),m(!1)},o={CRITICAL:{bg:"bg-red-50",border:"border-red-200",badge:"bg-red-100 text-red-800",icon:"üî¥"},WARNING:{bg:"bg-orange-50",border:"border-orange-200",badge:"bg-orange-100 text-orange-800",icon:"‚ö†Ô∏è"},INFO:{bg:"bg-blue-50",border:"border-blue-200",badge:"bg-blue-100 text-blue-800",icon:"‚ÑπÔ∏è"}}[a.severity],p={TRIGGERED:{badge:"bg-red-100 text-red-800",label:"Active"},ACKNOWLEDGED:{badge:"bg-yellow-100 text-yellow-800",label:"Acknowledged"},RESOLVED:{badge:"bg-green-100 text-green-800",label:"Resolved"},DISMISSED:{badge:"bg-gray-100 text-gray-800",label:"Dismissed"}}[a.status];return(0,b.jsx)("div",{className:`bg-white rounded-lg shadow border-l-4 ${o.border} ${o.bg} transition-all`,children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,b.jsx)("span",{className:"text-2xl",children:o.icon}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.badge}`,children:a.severity}),(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.badge}`,children:p.label}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:(e=new Date(a.triggeredAt),g=Math.floor((f=new Date().getTime()-e.getTime())/6e4),h=Math.floor(f/36e5),i=Math.floor(f/864e5),g<1?"Just now":g<60?`${g}m ago`:h<24?`${h}h ago`:i<7?`${i}d ago`:e.toLocaleDateString())})]}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.title}),(0,b.jsx)("p",{className:"text-gray-700 mt-1",children:a.message})]})]})}),a.context&&Object.keys(a.context).length>0&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("button",{onClick:()=>k(!j),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:j?"Hide details ‚ñ≤":"Show details ‚ñº"}),j&&(0,b.jsx)("div",{className:"mt-3 bg-white rounded-lg border border-gray-200 p-4",children:(0,b.jsx)("dl",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:Object.entries(a.context).map(([a,c])=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("dt",{className:"text-gray-500 font-medium",children:[a,":"]}),(0,b.jsx)("dd",{className:"text-gray-900",children:"number"==typeof c&&a.toLowerCase().includes("pct")?`${c.toFixed(1)}%`:"number"==typeof c&&(a.toLowerCase().includes("cpa")||a.toLowerCase().includes("spend")||a.toLowerCase().includes("threshold"))?`$${c.toFixed(2)}`:String(c)})]},a))})})]}),"TRIGGERED"===a.status&&(0,b.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>n("acknowledge"),disabled:l,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Acknowledge"}),(0,b.jsx)("button",{onClick:()=>n("resolve"),disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Resolve"}),(0,b.jsx)("button",{onClick:()=>n("dismiss"),disabled:l,className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Dismiss"})]}),"ACKNOWLEDGED"===a.status&&(0,b.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>n("resolve"),disabled:l,className:"px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Resolve"}),(0,b.jsx)("button",{onClick:()=>n("dismiss"),disabled:l,className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Dismiss"})]})]})})}let e=[{value:"TRIGGERED",label:"Active",color:"red"},{value:"ACKNOWLEDGED",label:"Acknowledged",color:"yellow"},{value:"RESOLVED",label:"Resolved",color:"green"},{value:"DISMISSED",label:"Dismissed",color:"gray"}],f=[{value:"CRITICAL",label:"Critical",color:"red"},{value:"WARNING",label:"Warning",color:"orange"},{value:"INFO",label:"Info",color:"blue"}];function g({statusFilter:a,severityFilter:c,onStatusFilterChange:d,onSeverityFilterChange:g}){return(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(c=>(0,b.jsx)("button",{onClick:()=>{var b;return b=c.value,void(a.includes(b)?d(a.filter(a=>a!==b)):d([...a,b]))},className:`px-3 py-1.5 text-sm rounded-lg border transition-colors ${a.includes(c.value)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:c.label},c.value))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Severity"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)("button",{onClick:()=>g([]),className:`px-3 py-1.5 text-sm rounded-lg border transition-colors ${0===c.length?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"All"}),f.map(a=>(0,b.jsx)("button",{onClick:()=>{var b;return b=a.value,void(c.includes(b)?g(c.filter(a=>a!==b)):g([...c,b]))},className:`px-3 py-1.5 text-sm rounded-lg border transition-colors ${c.includes(a.value)?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a.label},a.value))]})]})]})})}function h(){let[a,e]=(0,c.useState)([]),[f,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(["TRIGGERED","ACKNOWLEDGED"]),[k,l]=(0,c.useState)([]),[m,n]=(0,c.useState)(0);(0,c.useEffect)(()=>{o()},[i,k]);let o=async()=>{h(!0);try{let a=new URLSearchParams;i.length>0&&a.set("status",i.join(",")),k.length>0&&a.set("severity",k.join(","));let b=await fetch(`/api/alerts?${a}`);if(b.ok){let a=await b.json();e(a.data||[]),n(a.pagination?.total||0)}}catch(a){console.error("Failed to fetch alerts:",a)}finally{h(!1)}},p=async(a,b)=>{try{(await fetch("/api/alerts",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({alertId:a,action:b})})).ok&&o()}catch(a){console.error("Failed to update alert:",a)}},q=a.filter(a=>"TRIGGERED"===a.status).length,r=a.filter(a=>"CRITICAL"===a.severity&&"TRIGGERED"===a.status).length;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Alerts"}),(0,b.jsx)("p",{className:"text-gray-600 mt-1",children:q>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"font-semibold text-red-600",children:q})," active alert",1!==q?"s":"",r>0&&(0,b.jsxs)("span",{className:"ml-2",children:["(",(0,b.jsx)("span",{className:"font-semibold text-red-700",children:r})," critical)"]})]}):"No active alerts"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["Total: ",m]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsx)(g,{statusFilter:i,severityFilter:k,onStatusFilterChange:j,onSeverityFilterChange:l}),(0,b.jsx)("div",{className:"mt-6 space-y-4",children:f?(0,b.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[(0,b.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-2"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},c))}):0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"All Clear!"}),(0,b.jsx)("p",{className:"text-gray-600",children:"No alerts match your current filters"})]}):a.map(a=>(0,b.jsx)(d,{alert:a,onStatusUpdate:p},a.id))})]})]})}a.s(["AlertsInbox",()=>h],85770)}];

//# sourceMappingURL=1c0b7_windsurf-project_apps_frontend_src_app_app_alerts_alerts-inbox_tsx_3b3727e7._.js.map