module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},11858,a=>{a.n(a.i(35669))},69622,a=>{a.n(a.i(56257))},37698,a=>{a.n(a.i(79527))},15207,a=>{a.n(a.i(68742))},7240,a=>{a.n(a.i(83422))},2392,a=>{a.n(a.i(80810))},46564,a=>{"use strict";let b=(0,a.i(95792).registerClientReference)(function(){throw Error("Attempted to call AnalyticsPageClient() from the server but AnalyticsPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/analytics/client.tsx <module evaluation>","AnalyticsPageClient");a.s(["AnalyticsPageClient",0,b])},45166,a=>{"use strict";let b=(0,a.i(95792).registerClientReference)(function(){throw Error("Attempted to call AnalyticsPageClient() from the server but AnalyticsPageClient is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/analytics/client.tsx","AnalyticsPageClient");a.s(["AnalyticsPageClient",0,b])},39601,a=>{"use strict";a.i(46564);var b=a.i(45166);a.n(b)},36783,a=>{"use strict";var b=a.i(48020),c=a.i(55020);a.i(51570);var d=a.i(5626),e=a.i(48425);a.i(36822);var f=a.i(10701);async function g(a){let b={organizationId:a.organizationId,date:{gte:a.startDate,lte:a.endDate}};a.platformCodes?.length&&(b.platform={code:{in:a.platformCodes}});let c=await f.prisma.dailyAdAccountMetric.findMany({where:b,select:{date:!0,impressions:!0,clicks:!0,spendMicros:!0,conversions:!0,revenueMicros:!0,platform:{select:{code:!0,name:!0}}},orderBy:{date:"asc"}}),d=new Map,e=new Map,g=new Map;for(let a of c){let b=a.date.toISOString().split("T")[0],c=Number(a.spendMicros)/1e6,f=Number(a.conversions),h=Number(a.impressions),i=Number(a.clicks),j=Number(a.revenueMicros)/1e6;d.has(b)||d.set(b,{date:b,spend:0,conversions:0,impressions:0,clicks:0,revenue:0});let k=d.get(b);k.spend+=c,k.conversions+=f,k.impressions+=h,k.clicks+=i,k.revenue+=j;let l=a.platform.code;g.set(l,a.platform.name),e.has(l)||e.set(l,new Map);let m=e.get(l);m.has(b)||m.set(b,{date:b,spend:0,conversions:0,impressions:0,clicks:0,revenue:0});let n=m.get(b);n.spend+=c,n.conversions+=f,n.impressions+=h,n.clicks+=i,n.revenue+=j}let h=Array.from(d.values()).sort((a,b)=>a.date.localeCompare(b.date)),i=[];for(let[a,b]of e)i.push({platformCode:a,platformName:g.get(a)??a,data:Array.from(b.values()).sort((a,b)=>a.date.localeCompare(b.date))});let j=h.reduce((a,b)=>a+b.spend,0),k=h.reduce((a,b)=>a+b.conversions,0),l=h.reduce((a,b)=>a+b.revenue,0);return{total:h,byPlatform:i,summary:{totalSpend:j,totalConversions:k,avgCpa:k>0?j/k:null,totalRevenue:l}}}var h=a.i(39601);async function i(){let a,f,i=await (0,c.getServerSession)(e.authOptions),j=i?.user?.activeOrgId;j||(0,d.redirect)("/app");let{start:k,end:l}=((a=new Date).setHours(23,59,59,999),(f=new Date(a)).setDate(f.getDate()-29),f.setHours(0,0,0,0),{start:f,end:a}),m=await g({organizationId:j,startDate:k,endDate:l});return(0,b.jsx)(h.AnalyticsPageClient,{initialData:m,initialDateRange:{start:k.toISOString(),end:l.toISOString()}})}a.s(["default",()=>i],36783)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8563416a._.js.map