module.exports=[26260,a=>{"use strict";var b=a.i(30091),c=a.i(51729);let d=[{value:"7d",label:"Last 7 days"},{value:"14d",label:"Last 14 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"}];function e({value:a,onChange:e,customRange:f,onCustomRangeChange:g}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(f?.start.toISOString().split("T")[0]??""),[l,m]=(0,c.useState)(f?.end.toISOString().split("T")[0]??"");return(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[d.map(c=>(0,b.jsx)("button",{onClick:()=>{var a;"custom"===(a=c.value)?i(!0):(i(!1),e(a))},className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${a===c.value&&!h?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:c.label},c.value)),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("button",{onClick:()=>i(!h),className:`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${"custom"===a?"bg-zinc-900 text-white":"bg-zinc-100 text-zinc-700 hover:bg-zinc-200"}`,children:"Custom"}),h&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>i(!1)}),(0,b.jsx)("div",{className:"absolute right-0 z-20 mt-2 w-72 rounded-lg border border-zinc-200 bg-white p-4 shadow-lg",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-zinc-600",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:j,onChange:a=>k(a.target.value),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-zinc-600",children:"End Date"}),(0,b.jsx)("input",{type:"date",value:l,onChange:a=>m(a.target.value),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>i(!1),className:"rounded-lg px-3 py-1.5 text-sm font-medium text-zinc-600 hover:bg-zinc-100",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>{if(j&&l&&g){let a=new Date(j);a.setHours(0,0,0,0);let b=new Date(l);b.setHours(23,59,59,999),g({start:a,end:b}),e("custom"),i(!1)}},disabled:!j||!l,className:"rounded-lg bg-zinc-900 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:"Apply"})]})]})})]})]})]})}let f={GOOGLE_ADS:"#4285F4",META:"#1877F2",TIKTOK:"#FF0050",LINKEDIN:"#0A66C2"};function g({data:a,platformData:d,showPlatformOverlay:e=!1,height:g=300}){var h,i;let j=(0,c.useMemo)(()=>{if(0===a.length)return null;let b=Math.max(...a.map(a=>a.spend),1),c=Math.max(...a.map(a=>a.conversions),1),d=.1*b,e=.1*c;return{points:a.map(a=>({...a,spendNorm:a.spend/(b+d),convNorm:a.conversions/(c+e)})),maxSpend:b+d,maxConversions:c+e}},[a]),k=(0,c.useMemo)(()=>{if(!d||!e)return null;let a=Math.max(...d.flatMap(a=>a.data.map(a=>a.spend)),1);return d.map(b=>({...b,normalizedData:b.data.map(b=>({...b,spendNorm:b.spend/(1.1*a)}))}))},[d,e]);if(!j||0===a.length)return(0,b.jsx)("div",{className:"flex items-center justify-center rounded-xl border border-zinc-200 bg-white",style:{height:g},children:(0,b.jsx)("p",{className:"text-sm text-zinc-500",children:"No data available"})});let l=80,m=70,n=80/Math.max(j.points.length-1,1),o=j.points.map((a,b)=>{let c=10+m*(1-a.spendNorm);return`${0===b?"M":"L"} ${10+b*n} ${c}`}).join(" "),p=j.points.map((a,b)=>{let c=10+m*(1-a.convNorm);return`${0===b?"M":"L"} ${10+b*n} ${c}`}).join(" "),q=o+` L ${10+(j.points.length-1)*n} ${10+m}`+` L 10 ${10+m} Z`;return(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-3 w-3 rounded-full bg-blue-500"}),(0,b.jsx)("span",{className:"text-xs text-zinc-600",children:"Spend"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"h-3 w-3 rounded-full bg-green-500"}),(0,b.jsx)("span",{className:"text-xs text-zinc-600",children:"Conversions"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4 text-xs text-zinc-500",children:[(0,b.jsxs)("span",{children:["Max: ",(h=j.maxSpend)>=1e6?`$${(h/1e6).toFixed(1)}M`:h>=1e3?`$${(h/1e3).toFixed(1)}K`:`$${h.toFixed(0)}`]}),(0,b.jsxs)("span",{children:["Max: ",(i=j.maxConversions)>=1e6?`${(i/1e6).toFixed(1)}M`:i>=1e3?`${(i/1e3).toFixed(1)}K`:i.toFixed(0)," conv"]})]})]}),(0,b.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full",style:{height:g},preserveAspectRatio:"none",children:[(0,b.jsx)("defs",{children:(0,b.jsxs)("linearGradient",{id:"spendGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,b.jsx)("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:"0.3"}),(0,b.jsx)("stop",{offset:"100%",stopColor:"#3B82F6",stopOpacity:"0.05"})]})}),[0,.25,.5,.75,1].map(a=>(0,b.jsx)("line",{x1:10,y1:10+m*a,x2:10+l,y2:10+m*a,stroke:"#e4e4e7",strokeWidth:"0.5"},a)),(0,b.jsx)("path",{d:q,fill:"url(#spendGradient)"}),(0,b.jsx)("path",{d:o,fill:"none",stroke:"#3B82F6",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),(0,b.jsx)("path",{d:p,fill:"none",stroke:"#22C55E",strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),e&&k?.map(a=>{let c=a.normalizedData.map((a,b)=>{let c=10+m*(1-a.spendNorm);return`${0===b?"M":"L"} ${10+b*n} ${c}`}).join(" ");return(0,b.jsx)("path",{d:c,fill:"none",stroke:f[a.platformCode]??"#6B7280",strokeWidth:"1.5",strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke",opacity:"0.7"},a.platformCode)}),j.points.map((a,c)=>{let d=10+c*n,e=10+m*(1-a.spendNorm),f=10+m*(1-a.convNorm);return(0,b.jsxs)("g",{children:[(0,b.jsx)("circle",{cx:d,cy:e,r:"1.5",fill:"#3B82F6",className:"hover:r-3 transition-all"}),(0,b.jsx)("circle",{cx:d,cy:f,r:"1.5",fill:"#22C55E",className:"hover:r-3 transition-all"})]},a.date)}),j.points.length<=31&&j.points.filter((a,b)=>b%Math.ceil(j.points.length/7)==0).map((a,c,d)=>{let e=j.points.findIndex(b=>b.date===a.date),f=new Date(a.date).toLocaleDateString("en-US",{month:"short",day:"numeric"});return(0,b.jsx)("text",{x:10+e*n,y:98,textAnchor:0===c?"start":c===d.length-1?"end":"middle",className:"fill-zinc-500",style:{fontSize:"3px"},children:f},a.date)})]}),e&&d&&d.length>0&&(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-3 border-t border-zinc-100 pt-3",children:[(0,b.jsx)("span",{className:"text-xs text-zinc-500",children:"Platforms:"}),d.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"h-2 w-4 rounded-sm",style:{backgroundColor:f[a.platformCode]??"#6B7280"}}),(0,b.jsx)("span",{className:"text-xs text-zinc-600",children:a.platformName})]},a.platformCode))]})]})}function h(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function i(a){return new Intl.NumberFormat("en-US").format(a)}function j({initialData:a,initialDateRange:d}){let[f,j]=(0,c.useState)("30d"),[m,n]=(0,c.useState)({start:new Date(d.start),end:new Date(d.end)}),[o,p]=(0,c.useState)(!0),[q]=(0,c.useState)(a);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Analytics"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Spend and conversion trends over time"})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsx)(e,{value:f,onChange:j,customRange:m,onCustomRangeChange:n}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:o,onChange:a=>p(a.target.checked),className:"h-4 w-4 rounded border-zinc-300"}),(0,b.jsx)("span",{className:"text-sm text-zinc-600",children:"Show platform breakdown"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)(k,{label:"Total Spend",value:h(q.summary.totalSpend)}),(0,b.jsx)(k,{label:"Total Conversions",value:i(q.summary.totalConversions)}),(0,b.jsx)(k,{label:"Average CPA",value:q.summary.avgCpa?h(q.summary.avgCpa):"—"}),(0,b.jsx)(k,{label:"Total Revenue",value:h(q.summary.totalRevenue)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-3 text-sm font-medium text-zinc-900",children:"Spend vs Conversions"}),(0,b.jsx)(g,{data:q.total,platformData:q.byPlatform,showPlatformOverlay:o,height:350})]}),q.byPlatform.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"mb-3 text-sm font-medium text-zinc-900",children:"Platform Breakdown"}),(0,b.jsx)("div",{className:"grid gap-4 lg:grid-cols-2",children:q.byPlatform.map(a=>{let c=a.data.reduce((a,b)=>a+b.spend,0),d=a.data.reduce((a,b)=>a+b.conversions,0),e=d>0?c/d:null;return(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[(0,b.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l,{code:a.platformCode}),(0,b.jsx)("span",{className:"font-medium",children:a.platformName})]}),(0,b.jsxs)("div",{className:"text-right text-xs text-zinc-500",children:[(0,b.jsxs)("div",{children:[h(c)," spend"]}),(0,b.jsxs)("div",{children:[i(d)," conv"]})]})]}),(0,b.jsx)(g,{data:a.data,height:150,showPlatformOverlay:!1}),(0,b.jsxs)("div",{className:"mt-2 text-center text-xs text-zinc-500",children:["CPA: ",e?h(e):"—"]})]},a.platformCode)})})]})]})}function k({label:a,value:c}){return(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-4",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-zinc-500",children:a}),(0,b.jsx)("p",{className:"mt-1 text-xl font-semibold tracking-tight",children:c})]})}function l({code:a}){return(0,b.jsx)("span",{className:`inline-flex h-6 w-6 items-center justify-center rounded text-xs font-bold text-white ${{GOOGLE_ADS:"bg-blue-500",META:"bg-indigo-500",TIKTOK:"bg-pink-500",LINKEDIN:"bg-sky-600"}[a]??"bg-zinc-500"}`,children:{GOOGLE_ADS:"G",META:"M",TIKTOK:"T",LINKEDIN:"L"}[a]??"?"})}a.s(["AnalyticsPageClient",()=>j],26260)}];

//# sourceMappingURL=1c0b7_windsurf-project_apps_frontend_src_app_app_analytics_client_tsx_ae139f1f._.js.map