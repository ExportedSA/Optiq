module.exports=[21023,a=>{"use strict";var b=a.i(30091),c=a.i(51729),d=a.i(46298),e=a.i(37981),f=a.i(71999),g=a.i(83702);function h(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}function i(a){return new Intl.NumberFormat("en-US").format(Math.round(a))}function j(a,b=!1){if(null===a||0===a)return"neutral";let c=a>0;return b?c?"down":"up":c?"up":"down"}function k(){var a;let[k,t]=(0,c.useState)(g.getDefaultFilters),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),A=(0,c.useCallback)(async()=>{x(!0),z(null);let a=new URLSearchParams({startDate:k.startDate,endDate:k.endDate,granularity:k.granularity,breakdown:k.breakdown});k.channels.length>0&&a.set("channels",k.channels.join(","));try{let b=await fetch(`/api/dashboard/roi?${a.toString()}`);if(!b.ok)throw Error("Failed to fetch dashboard data");let c=await b.json();v(c)}catch(a){z(a instanceof Error?a.message:"Unknown error")}finally{x(!1)}},[k]);(0,c.useEffect)(()=>{A()},[A]);let B="platform"===k.breakdown?"Channel":"campaign"===k.breakdown?"Campaign":"Ad";return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"ROI Dashboard"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Multi-touch attribution ROI, ROAS, CPA, and waste analysis"})]}),(0,b.jsx)(g.DashboardFilters,{value:k,onChange:t}),y&&(0,b.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:y}),(0,b.jsxs)(d.KpiCardGrid,{children:[(0,b.jsx)(d.KpiCard,{title:"Total Spend",value:u?h(u.kpis.spend):"$0.00",change:u?.kpis.changes?.spend??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.spend??null),loading:w,icon:(0,b.jsx)(l,{})}),(0,b.jsx)(d.KpiCard,{title:"Attributed Revenue",value:u?h(u.kpis.revenue):"$0.00",change:u?.kpis.changes?.revenue??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.revenue??null),loading:w,icon:(0,b.jsx)(m,{})}),(0,b.jsx)(d.KpiCard,{title:"ROAS",value:u?.kpis.roas?`${u.kpis.roas.toFixed(2)}x`:"—",change:u?.kpis.changes?.roas??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.roas??null),loading:w,icon:(0,b.jsx)(n,{})}),(0,b.jsx)(d.KpiCard,{title:"CPA",value:u?.kpis.cpa?h(u.kpis.cpa):"—",change:u?.kpis.changes?.cpa??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.cpa??null,!0),loading:w,icon:(0,b.jsx)(o,{})})]}),(0,b.jsxs)(d.KpiCardGrid,{children:[(0,b.jsx)(d.KpiCard,{title:"Wasted Spend",value:u?h(u.kpis.wasteAmount):"$0.00",loading:w,icon:(0,b.jsx)(p,{})}),(0,b.jsx)(d.KpiCard,{title:"Waste %",value:u?(a=u.kpis.wastePercent,`${a.toFixed(1)}%`):"0.0%",change:u?.kpis.changes?.wastePercent??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.wastePercent??null,!0),loading:w,icon:(0,b.jsx)(q,{})}),(0,b.jsx)(d.KpiCard,{title:"Conversions",value:u?i(u.kpis.conversions):"0",change:u?.kpis.changes?.conversions??null,changeLabel:"vs last period",trend:j(u?.kpis.changes?.conversions??null),loading:w,icon:(0,b.jsx)(r,{})}),(0,b.jsx)(d.KpiCard,{title:"Clicks",value:u?i(u.kpis.clicks):"0",loading:w,icon:(0,b.jsx)(s,{})})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,b.jsx)("h2",{className:"mb-4 text-sm font-medium text-zinc-900",children:"Trendlines"}),w?(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-[180px] animate-pulse rounded-lg bg-zinc-100"},a))}):u?(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsx)(e.TimeseriesChartCard,{title:"Spend",data:u.timeseries,metric:"spend",currentValue:h(u.kpis.spend),change:u.kpis.changes?.spend}),(0,b.jsx)(e.TimeseriesChartCard,{title:"Revenue",data:u.timeseries,metric:"revenue",currentValue:h(u.kpis.revenue),change:u.kpis.changes?.revenue}),(0,b.jsx)(e.TimeseriesChartCard,{title:"ROAS",data:u.timeseries,metric:"roas",currentValue:u.kpis.roas?`${u.kpis.roas.toFixed(2)}x`:"—",change:u.kpis.changes?.roas})]}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"mb-4 text-sm font-medium text-zinc-900",children:["Breakdown by ",B]}),w?(0,b.jsx)("div",{className:"h-[300px] animate-pulse rounded-xl bg-zinc-100"}):u?(0,b.jsx)(f.BreakdownTable,{data:u.breakdown,entityLabel:B}):null]})]})}function l(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function m(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}function n(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}function o(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}function p(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}function q(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 14l-7 7m0 0l-7-7m7 7V3"})})}function r(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}function s(){return(0,b.jsx)("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})})}a.s(["RoiDashboardClient",()=>k],21023)}];

//# sourceMappingURL=1c0b7_windsurf-project_apps_frontend_src_app_app_roi_client_tsx_0996d331._.js.map