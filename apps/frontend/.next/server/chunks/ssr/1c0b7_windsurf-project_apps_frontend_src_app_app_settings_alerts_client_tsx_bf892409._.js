module.exports=[32840,a=>{"use strict";var b=a.i(30091),c=a.i(46277),d=a.i(51729);function e({initialSettings:a,onSave:c}){let[e,h]=(0,d.useState)(a),[i,j]=(0,d.useState)(!1),[k,l]=(0,d.useState)(!1),m=async()=>{j(!0),l(!1);try{await c({wasteAlerts:e.wasteAlerts,cpaAlerts:e.cpaAlerts,performanceAlerts:e.performanceAlerts,frequency:e.frequency}),l(!0),setTimeout(()=>l(!1),3e3)}finally{j(!1)}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Waste Detection Alerts"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when ad spend waste is detected"})]}),(0,b.jsx)(f,{checked:e.wasteAlerts.enabled,onChange:a=>h(b=>({...b,wasteAlerts:{...b.wasteAlerts,enabled:a}}))})]}),e.wasteAlerts.enabled&&(0,b.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Minimum Waste Level"}),(0,b.jsxs)("select",{value:e.wasteAlerts.thresholdLevel,onChange:a=>h(b=>({...b,wasteAlerts:{...b.wasteAlerts,thresholdLevel:a.target.value}})),className:"mt-1 w-full max-w-xs rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,b.jsx)("option",{value:"low",children:"Low (any waste)"}),(0,b.jsx)("option",{value:"medium",children:"Medium"}),(0,b.jsx)("option",{value:"high",children:"High"}),(0,b.jsx)("option",{value:"critical",children:"Critical only"})]})]}),(0,b.jsx)(g,{email:e.wasteAlerts.notifyEmail,inApp:e.wasteAlerts.notifyInApp,onEmailChange:a=>h(b=>({...b,wasteAlerts:{...b.wasteAlerts,notifyEmail:a}})),onInAppChange:a=>h(b=>({...b,wasteAlerts:{...b.wasteAlerts,notifyInApp:a}}))})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"CPA Threshold Alerts"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when CPA exceeds your target"})]}),(0,b.jsx)(f,{checked:e.cpaAlerts.enabled,onChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,enabled:a}}))})]}),e.cpaAlerts.enabled&&(0,b.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target CPA"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-zinc-500",children:"$"}),(0,b.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.cpaAlerts.targetCpa,onChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,targetCpa:parseFloat(a.target.value)||0}})),className:"w-32 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Warning Threshold"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"0",max:"500",value:e.cpaAlerts.warningThresholdPercent,onChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,warningThresholdPercent:parseInt(a.target.value)||0}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,b.jsx)("span",{className:"text-sm text-zinc-500",children:"% above target"})]}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-zinc-400",children:["Alert at $",(e.cpaAlerts.targetCpa*(100+e.cpaAlerts.warningThresholdPercent)/100).toFixed(2)]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Critical Threshold"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"0",max:"500",value:e.cpaAlerts.criticalThresholdPercent,onChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,criticalThresholdPercent:parseInt(a.target.value)||0}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,b.jsx)("span",{className:"text-sm text-zinc-500",children:"% above target"})]}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-zinc-400",children:["Alert at $",(e.cpaAlerts.targetCpa*(100+e.cpaAlerts.criticalThresholdPercent)/100).toFixed(2)]})]})]}),(0,b.jsx)(g,{email:e.cpaAlerts.notifyEmail,inApp:e.cpaAlerts.notifyInApp,onEmailChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,notifyEmail:a}})),onInAppChange:a=>h(b=>({...b,cpaAlerts:{...b.cpaAlerts,notifyInApp:a}}))})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Performance Drop Alerts"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when conversions drop significantly"})]}),(0,b.jsx)(f,{checked:e.performanceAlerts.enabled,onChange:a=>h(b=>({...b,performanceAlerts:{...b.performanceAlerts,enabled:a}}))})]}),e.performanceAlerts.enabled&&(0,b.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Conversion Drop Threshold"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"10",max:"100",value:e.performanceAlerts.conversionDropPercent,onChange:a=>h(b=>({...b,performanceAlerts:{...b.performanceAlerts,conversionDropPercent:parseInt(a.target.value)||50}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,b.jsx)("span",{className:"text-sm text-zinc-500",children:"% drop"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Comparison Window"}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"1",max:"30",value:e.performanceAlerts.windowDays,onChange:a=>h(b=>({...b,performanceAlerts:{...b.performanceAlerts,windowDays:parseInt(a.target.value)||7}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,b.jsx)("span",{className:"text-sm text-zinc-500",children:"days"})]})]})]}),(0,b.jsx)(g,{email:e.performanceAlerts.notifyEmail,inApp:e.performanceAlerts.notifyInApp,onEmailChange:a=>h(b=>({...b,performanceAlerts:{...b.performanceAlerts,notifyEmail:a}})),onInAppChange:a=>h(b=>({...b,performanceAlerts:{...b.performanceAlerts,notifyInApp:a}}))})]})]}),(0,b.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,b.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Alert Frequency"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Control how often you receive alerts"}),(0,b.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Minimum Interval Between Alerts"}),(0,b.jsxs)("select",{value:e.frequency.minIntervalMinutes,onChange:a=>h(b=>({...b,frequency:{...b.frequency,minIntervalMinutes:parseInt(a.target.value)}})),className:"mt-1 w-full max-w-xs rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"60",children:"1 hour"}),(0,b.jsx)("option",{value:"120",children:"2 hours"}),(0,b.jsx)("option",{value:"240",children:"4 hours"}),(0,b.jsx)("option",{value:"480",children:"8 hours"}),(0,b.jsx)("option",{value:"1440",children:"24 hours"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-100 p-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-zinc-700",children:"Email Digest"}),(0,b.jsx)("p",{className:"text-xs text-zinc-500",children:"Receive a summary instead of individual emails"})]}),(0,b.jsx)(f,{checked:e.frequency.digestEnabled,onChange:a=>h(b=>({...b,frequency:{...b.frequency,digestEnabled:a}}))})]}),e.frequency.digestEnabled&&(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Digest Frequency"}),(0,b.jsxs)("select",{value:e.frequency.digestFrequency,onChange:a=>h(b=>({...b,frequency:{...b.frequency,digestFrequency:a.target.value}})),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,b.jsx)("option",{value:"daily",children:"Daily"}),(0,b.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Delivery Time"}),(0,b.jsx)("input",{type:"time",value:e.frequency.digestTime,onChange:a=>h(b=>({...b,frequency:{...b.frequency,digestTime:a.target.value}})),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[k&&(0,b.jsx)("span",{className:"text-sm text-green-600",children:"Settings saved!"}),(0,b.jsx)("button",{onClick:m,disabled:i,className:"rounded-lg bg-zinc-900 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:i?"Saving...":"Save Settings"})]})]})}function f({checked:a,onChange:c}){return(0,b.jsx)("button",{type:"button",role:"switch","aria-checked":a,onClick:()=>c(!a),className:`relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${a?"bg-zinc-900":"bg-zinc-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-transform ${a?"translate-x-5":"translate-x-0"}`})})}function g({email:a,inApp:c,onEmailChange:d,onInAppChange:e}){return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Notification Channels"}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:a=>e(a.target.checked),className:"h-4 w-4 rounded border-zinc-300"}),(0,b.jsx)("span",{className:"text-sm text-zinc-600",children:"In-app notifications"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a,onChange:a=>d(a.target.checked),className:"h-4 w-4 rounded border-zinc-300"}),(0,b.jsx)("span",{className:"text-sm text-zinc-600",children:"Email"})]})]})]})}function h({initialSettings:a}){let d=async a=>{if(!(await fetch("/api/settings/alerts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save settings")};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-500",children:[(0,b.jsx)(c.default,{href:"/app/settings",className:"hover:text-zinc-700",children:"Settings"}),(0,b.jsx)("span",{children:"/"}),(0,b.jsx)("span",{className:"text-zinc-900",children:"Alerts"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Alert Settings"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Configure when and how you receive alerts about your ad performance"})]}),(0,b.jsx)(e,{initialSettings:a,onSave:d})]})}a.s(["AlertSettingsPageClient",()=>h],32840)}];

//# sourceMappingURL=1c0b7_windsurf-project_apps_frontend_src_app_app_settings_alerts_client_tsx_bf892409._.js.map