{"version":3,"sources":["../../../../../../../../../../../OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/settings/billing/client.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\n\r\ntype PlanDto = {\r\n  tier: string;\r\n  name: string;\r\n  description: string;\r\n  features: string[];\r\n  recommended: boolean;\r\n  pricing: {\r\n    monthly: number;\r\n    annual: number;\r\n    annualMonthly: number;\r\n  };\r\n  limits: {\r\n    workspaces: number | string;\r\n    connectors: number | string;\r\n    events: string;\r\n    retention: string;\r\n    attributionModels: string[];\r\n    alerts: boolean;\r\n    sso: boolean;\r\n    prioritySupport: boolean;\r\n  };\r\n  overages: {\r\n    eventsPer10k: number;\r\n    connector: number;\r\n  };\r\n};\r\n\r\ntype UsageDto = {\r\n  plan: string;\r\n  periodStart: string;\r\n  periodEnd: string;\r\n  usage: {\r\n    trackedEvents: number;\r\n    connectedAccounts: number;\r\n    workspacesUsed: number;\r\n  };\r\n  limits: {\r\n    maxWorkspaces: number;\r\n    maxConnectors: number;\r\n    monthlyEventLimit: number;\r\n    dataRetentionDays: number;\r\n  };\r\n  overages: {\r\n    eventsOverage: number;\r\n    connectorsOverage: number;\r\n    eventsOverageCents: number;\r\n    connectorsOverageCents: number;\r\n    totalOverageCents: number;\r\n  };\r\n};\r\n\r\nfunction formatCurrency(cents: number): string {\r\n  return new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n  }).format(cents / 100);\r\n}\r\n\r\nfunction formatNumber(n: number): string {\r\n  return new Intl.NumberFormat(\"en-US\").format(n);\r\n}\r\n\r\nexport function BillingClient() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [plans, setPlans] = useState<PlanDto[]>([]);\r\n  const [usage, setUsage] = useState<UsageDto | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [upgrading, setUpgrading] = useState<string | null>(null);\r\n  const [billingCycle, setBillingCycle] = useState<\"monthly\" | \"annual\">(\"monthly\");\r\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\r\n\r\n  const load = useCallback(async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [plansRes, usageRes] = await Promise.all([\r\n        fetch(\"/api/billing/plans\"),\r\n        fetch(\"/api/billing/usage\"),\r\n      ]);\r\n\r\n      if (plansRes.ok) {\r\n        const data = await plansRes.json();\r\n        setPlans(data.plans ?? []);\r\n      }\r\n\r\n      if (usageRes.ok) {\r\n        const data = await usageRes.json();\r\n        setUsage(data);\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n  }, [load]);\r\n\r\n  useEffect(() => {\r\n    if (searchParams?.get(\"success\") === \"true\") {\r\n      setSuccessMessage(\"Your subscription has been updated successfully!\");\r\n      router.replace(\"/app/settings/billing\");\r\n      void load();\r\n    }\r\n    if (searchParams?.get(\"canceled\") === \"true\") {\r\n      router.replace(\"/app/settings/billing\");\r\n    }\r\n  }, [searchParams, router, load]);\r\n\r\n  const handleUpgrade = async (tier: string) => {\r\n    setUpgrading(tier);\r\n    try {\r\n      const res = await fetch(\"/api/billing/checkout\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ tier, interval: billingCycle }),\r\n      });\r\n\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        if (data.checkoutUrl) {\r\n          window.location.href = data.checkoutUrl;\r\n        }\r\n      } else {\r\n        const error = await res.json();\r\n        alert(error.error || \"Failed to start checkout\");\r\n      }\r\n    } finally {\r\n      setUpgrading(null);\r\n    }\r\n  };\r\n\r\n  const handleManageSubscription = async () => {\r\n    try {\r\n      const res = await fetch(\"/api/billing/portal\", { method: \"POST\" });\r\n      if (res.ok) {\r\n        const data = await res.json();\r\n        if (data.portalUrl) {\r\n          window.location.href = data.portalUrl;\r\n        }\r\n      }\r\n    } catch {\r\n      alert(\"Failed to open billing portal\");\r\n    }\r\n  };\r\n\r\n  const currentPlan = plans.find((p) => p.tier === usage?.plan) ?? plans[0];\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-semibold tracking-tight\">Billing & Plans</h1>\r\n        <p className=\"mt-1 text-sm text-zinc-600\">\r\n          Manage your subscription and view usage\r\n        </p>\r\n      </div>\r\n\r\n      {usage && (\r\n        <section className=\"rounded-xl border border-zinc-200 bg-white p-6\">\r\n          <h2 className=\"text-lg font-medium text-zinc-900\">Current Usage</h2>\r\n          <p className=\"mt-1 text-sm text-zinc-500\">\r\n            Billing period: {new Date(usage.periodStart).toLocaleDateString()} – {new Date(usage.periodEnd).toLocaleDateString()}\r\n          </p>\r\n\r\n          <div className=\"mt-6 grid gap-4 sm:grid-cols-3\">\r\n            <UsageMeter\r\n              label=\"Tracked Events\"\r\n              current={usage.usage.trackedEvents}\r\n              limit={usage.limits.monthlyEventLimit}\r\n            />\r\n            <UsageMeter\r\n              label=\"Connected Accounts\"\r\n              current={usage.usage.connectedAccounts}\r\n              limit={usage.limits.maxConnectors}\r\n            />\r\n            <UsageMeter\r\n              label=\"Workspaces\"\r\n              current={usage.usage.workspacesUsed}\r\n              limit={usage.limits.maxWorkspaces}\r\n            />\r\n          </div>\r\n\r\n          {usage.overages.totalOverageCents > 0 && (\r\n            <div className=\"mt-4 rounded-lg border border-yellow-200 bg-yellow-50 p-4\">\r\n              <div className=\"text-sm font-medium text-yellow-800\">\r\n                Estimated overage charges this period\r\n              </div>\r\n              <div className=\"mt-1 text-lg font-semibold text-yellow-900\">\r\n                {formatCurrency(usage.overages.totalOverageCents)}\r\n              </div>\r\n              <div className=\"mt-1 text-xs text-yellow-700\">\r\n                {usage.overages.eventsOverage > 0 && (\r\n                  <span>{formatNumber(usage.overages.eventsOverage)} events over limit • </span>\r\n                )}\r\n                {usage.overages.connectorsOverage > 0 && (\r\n                  <span>{usage.overages.connectorsOverage} connectors over limit</span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n      )}\r\n\r\n      <section>\r\n        <div className=\"mb-6 flex items-center justify-between\">\r\n          <h2 className=\"text-lg font-medium text-zinc-900\">Plans</h2>\r\n          <div className=\"flex rounded-lg border border-zinc-200 bg-zinc-50 p-1\">\r\n            <button\r\n              onClick={() => setBillingCycle(\"monthly\")}\r\n              className={`rounded-md px-3 py-1 text-sm font-medium transition-colors ${\r\n                billingCycle === \"monthly\"\r\n                  ? \"bg-white text-zinc-900 shadow-sm\"\r\n                  : \"text-zinc-600 hover:text-zinc-900\"\r\n              }`}\r\n            >\r\n              Monthly\r\n            </button>\r\n            <button\r\n              onClick={() => setBillingCycle(\"annual\")}\r\n              className={`rounded-md px-3 py-1 text-sm font-medium transition-colors ${\r\n                billingCycle === \"annual\"\r\n                  ? \"bg-white text-zinc-900 shadow-sm\"\r\n                  : \"text-zinc-600 hover:text-zinc-900\"\r\n              }`}\r\n            >\r\n              Annual <span className=\"text-green-600\">Save 20%</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n            {[1, 2, 3, 4].map((i) => (\r\n              <div key={i} className=\"h-[400px] animate-pulse rounded-xl bg-zinc-100\" />\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n            {plans.map((plan) => {\r\n              const isCurrent = plan.tier === usage?.plan;\r\n              const price = billingCycle === \"monthly\" ? plan.pricing.monthly : plan.pricing.annualMonthly;\r\n\r\n              return (\r\n                <div\r\n                  key={plan.tier}\r\n                  className={`relative flex flex-col rounded-xl border p-6 ${\r\n                    plan.recommended\r\n                      ? \"border-blue-500 ring-2 ring-blue-500\"\r\n                      : \"border-zinc-200\"\r\n                  } ${isCurrent ? \"bg-zinc-50\" : \"bg-white\"}`}\r\n                >\r\n                  {plan.recommended && (\r\n                    <div className=\"absolute -top-3 left-1/2 -translate-x-1/2 rounded-full bg-blue-500 px-3 py-1 text-xs font-medium text-white\">\r\n                      Recommended\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"mb-4\">\r\n                    <h3 className=\"text-lg font-semibold text-zinc-900\">{plan.name}</h3>\r\n                    <p className=\"mt-1 text-sm text-zinc-500\">{plan.description}</p>\r\n                  </div>\r\n\r\n                  <div className=\"mb-6\">\r\n                    <span className=\"text-3xl font-bold text-zinc-900\">\r\n                      ${price.toFixed(0)}\r\n                    </span>\r\n                    <span className=\"text-zinc-500\">/mo</span>\r\n                    {billingCycle === \"annual\" && plan.pricing.monthly > 0 && (\r\n                      <div className=\"mt-1 text-xs text-zinc-500\">\r\n                        Billed annually (${plan.pricing.annual.toFixed(0)}/yr)\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n\r\n                  <ul className=\"mb-6 flex-1 space-y-2\">\r\n                    {plan.features.map((feature, i) => (\r\n                      <li key={i} className=\"flex items-start gap-2 text-sm text-zinc-600\">\r\n                        <span className=\"text-green-500\">✓</span>\r\n                        {feature}\r\n                      </li>\r\n                    ))}\r\n                  </ul>\r\n\r\n                  {plan.overages.eventsPer10k > 0 && (\r\n                    <div className=\"mb-4 rounded-lg bg-zinc-50 p-3 text-xs text-zinc-600\">\r\n                      <div>Overages:</div>\r\n                      <div>${plan.overages.eventsPer10k.toFixed(2)} per 10k events</div>\r\n                      <div>${plan.overages.connector.toFixed(2)} per extra connector</div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <button\r\n                    disabled={isCurrent || upgrading === plan.tier || plan.tier === \"FREE\"}\r\n                    onClick={() => handleUpgrade(plan.tier)}\r\n                    className={`w-full rounded-lg px-4 py-2 text-sm font-medium transition-colors ${\r\n                      isCurrent\r\n                        ? \"cursor-default bg-zinc-100 text-zinc-500\"\r\n                        : plan.recommended\r\n                        ? \"bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50\"\r\n                        : \"bg-zinc-900 text-white hover:bg-zinc-800 disabled:opacity-50\"\r\n                    }`}\r\n                  >\r\n                    {upgrading === plan.tier\r\n                      ? \"Redirecting...\"\r\n                      : isCurrent\r\n                      ? \"Current Plan\"\r\n                      : plan.tier === \"FREE\"\r\n                      ? \"Free\"\r\n                      : \"Upgrade\"}\r\n                  </button>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </section>\r\n\r\n      {usage?.plan && usage.plan !== \"FREE\" && (\r\n        <section className=\"rounded-xl border border-zinc-200 bg-white p-6\">\r\n          <h2 className=\"text-lg font-medium text-zinc-900\">Manage Subscription</h2>\r\n          <p className=\"mt-1 text-sm text-zinc-500\">\r\n            Update payment method, view invoices, or cancel your subscription\r\n          </p>\r\n          <button\r\n            onClick={handleManageSubscription}\r\n            className=\"mt-4 rounded-lg border border-zinc-300 bg-white px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-50\"\r\n          >\r\n            Open Billing Portal\r\n          </button>\r\n        </section>\r\n      )}\r\n\r\n      {successMessage && (\r\n        <div className=\"fixed bottom-4 right-4 rounded-lg border border-green-200 bg-green-50 p-4 shadow-lg\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"text-green-600\">✓</span>\r\n            <span className=\"text-sm text-green-800\">{successMessage}</span>\r\n            <button\r\n              onClick={() => setSuccessMessage(null)}\r\n              className=\"ml-2 text-green-600 hover:text-green-800\"\r\n            >\r\n              ×\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <section className=\"rounded-xl border border-zinc-200 bg-white p-6\">\r\n        <h2 className=\"text-lg font-medium text-zinc-900\">Value Metrics</h2>\r\n        <p className=\"mt-1 text-sm text-zinc-500\">\r\n          Your plan is based on tracked events and connected ad accounts\r\n        </p>\r\n\r\n        <div className=\"mt-4 grid gap-4 sm:grid-cols-2\">\r\n          <div className=\"rounded-lg border border-zinc-100 p-4\">\r\n            <div className=\"text-sm font-medium text-zinc-700\">Tracked Events</div>\r\n            <div className=\"mt-1 text-xs text-zinc-500\">\r\n              Every page view, conversion, and custom event counts toward your monthly limit.\r\n              Overages are billed per 10,000 events.\r\n            </div>\r\n          </div>\r\n          <div className=\"rounded-lg border border-zinc-100 p-4\">\r\n            <div className=\"text-sm font-medium text-zinc-700\">Connected Ad Accounts</div>\r\n            <div className=\"mt-1 text-xs text-zinc-500\">\r\n              Each connected Google, Meta, TikTok, or LinkedIn ad account counts toward your connector limit.\r\n              Extra connectors can be added for a monthly fee.\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction UsageMeter({\r\n  label,\r\n  current,\r\n  limit,\r\n}: {\r\n  label: string;\r\n  current: number;\r\n  limit: number;\r\n}) {\r\n  const isUnlimited = limit === -1;\r\n  const percent = isUnlimited ? 0 : Math.min(100, (current / limit) * 100);\r\n  const isOver = !isUnlimited && current > limit;\r\n\r\n  return (\r\n    <div className=\"rounded-lg border border-zinc-100 p-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-sm font-medium text-zinc-700\">{label}</span>\r\n        <span className=\"text-sm text-zinc-500\">\r\n          {formatNumber(current)} / {isUnlimited ? \"∞\" : formatNumber(limit)}\r\n        </span>\r\n      </div>\r\n      <div className=\"mt-2 h-2 overflow-hidden rounded-full bg-zinc-100\">\r\n        <div\r\n          className={`h-full rounded-full transition-all ${\r\n            isOver ? \"bg-red-500\" : percent > 80 ? \"bg-yellow-500\" : \"bg-green-500\"\r\n          }`}\r\n          style={{ width: `${Math.min(100, percent)}%` }}\r\n        />\r\n      </div>\r\n      {isOver && (\r\n        <div className=\"mt-1 text-xs text-red-600\">\r\n          {formatNumber(current - limit)} over limit\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}