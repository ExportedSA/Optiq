(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99388,e=>{"use strict";var t=e.i(15442),i=e.i(30320);function s(){let[e,s]=(0,i.useState)([]),[n,a]=(0,i.useState)(!0),[c,l]=(0,i.useState)(null),d=(0,i.useCallback)(async()=>{a(!0),l(null);try{let e=await fetch("/api/notifications?limit=50&includeRead=true");if(!e.ok)throw Error("Failed to load notifications");let t=await e.json();s(t.notifications??[])}catch(e){l(e instanceof Error?e.message:"Unknown error")}finally{a(!1)}},[]);async function r(e){await fetch("/api/notifications/read",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({notificationId:e})}),d()}async function o(){await fetch("/api/notifications/read-all",{method:"POST"}),d()}return(0,i.useEffect)(()=>{d()},[d]),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-end justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Notifications"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Alerts and system messages for your workspace."})]}),(0,t.jsx)("button",{onClick:()=>void o(),className:"rounded-lg border border-zinc-200 bg-white px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Mark all read"})]}),c&&(0,t.jsx)("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:c}),(0,t.jsx)("div",{className:"overflow-hidden rounded-xl border border-zinc-200 bg-white",children:(0,t.jsx)("div",{className:"divide-y divide-zinc-100",children:n?(0,t.jsx)("div",{className:"p-6 text-sm text-zinc-500",children:"Loadingâ€¦"}):0===e.length?(0,t.jsx)("div",{className:"p-6 text-sm text-zinc-500",children:"No notifications."}):e.map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 p-4 hover:bg-zinc-50",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`text-xs font-medium ${e.readAt?"text-zinc-400":"text-zinc-900"}`,children:e.title}),!e.readAt&&(0,t.jsx)("span",{className:"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700",children:"new"}),(0,t.jsx)("span",{className:"rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-medium text-zinc-600",children:e.priority})]}),(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:e.message}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:new Date(e.createdAt).toLocaleString()}),e.actionUrl?(0,t.jsx)("a",{className:"mt-2 inline-block text-sm underline",href:e.actionUrl,children:"View"}):null]}),e.readAt?null:(0,t.jsx)("button",{onClick:()=>void r(e.id),className:"rounded-lg border border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-700 hover:bg-zinc-50",children:"Mark read"})]},e.id))})})]})}e.s(["NotificationsClient",()=>s])}]);