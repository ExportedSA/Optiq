(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,90800,e=>{"use strict";var t=e.i(15442),s=e.i(35560),n=e.i(30320),i=e.i(97312);let a=[{key:"workspace",title:"Create Workspace",description:"Set up your organization and workspace"},{key:"connect-ads",title:"Connect Ad Accounts",description:"Link your Google, Meta, or TikTok ad accounts"},{key:"install-tracker",title:"Install Tracker",description:"Add the Optiq tracking script to your website"},{key:"set-targets",title:"Set Targets",description:"Define your CPA and ROAS goals"},{key:"first-insights",title:"First Insights",description:"See your initial attribution data"}];function r(){var e;let s=(0,i.useRouter)(),[r,o]=(0,n.useState)({currentStep:"workspace",workspaceCreated:!1,adsConnected:!1,trackerInstalled:!1,targetsSet:!1}),[p,h]=(0,n.useState)(!0),[u,g]=(0,n.useState)({google:!1,meta:!1,tiktok:!1}),[b,f]=(0,n.useState)(null),[y,j]=(0,n.useState)({targetCpa:50,targetRoas:3}),[k,v]=(0,n.useState)(!1),N=(0,n.useCallback)(async()=>{h(!0);try{let e=await fetch("/api/onboarding/status");if(e.ok){let t=await e.json();o(t.state),g(t.connections||{google:!1,meta:!1,tiktok:!1}),t.trackerInfo&&f(t.trackerInfo),t.targets&&j(t.targets)}}catch{}finally{h(!1)}},[]);(0,n.useEffect)(()=>{N()},[N]);let S=async()=>{v(!0);try{(await fetch("/api/onboarding/complete-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:"workspace"})})).ok&&o(e=>({...e,workspaceCreated:!0,currentStep:"connect-ads"}))}finally{v(!1)}},z=async e=>{window.location.href=`/api/integrations/${e}/connect?returnTo=/app/onboarding`},w=async()=>{v(!0);try{await fetch("/api/onboarding/complete-step",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({step:"connect-ads"})}),o(e=>({...e,adsConnected:!0,currentStep:"install-tracker"}))}finally{v(!1)}},C=async()=>{v(!0);try{let e=await fetch("/api/onboarding/generate-tracker",{method:"POST"});if(e.ok){let t=await e.json();f(t)}}finally{v(!1)}},_=async()=>{v(!0);try{let e=await fetch("/api/onboarding/verify-tracker",{method:"POST"});e.ok&&((await e.json()).verified?o(e=>({...e,trackerInstalled:!0,currentStep:"set-targets"})):alert("Tracker not detected yet. Please ensure the script is installed and try again."))}finally{v(!1)}},T=async()=>{v(!0);try{(await fetch("/api/onboarding/set-targets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).ok&&o(e=>({...e,targetsSet:!0,currentStep:"first-insights"}))}finally{v(!1)}},A=(e=r.currentStep,a.findIndex(t=>t.key===e));return p?(0,t.jsx)("div",{className:"flex min-h-[60vh] items-center justify-center",children:(0,t.jsx)("div",{className:"text-zinc-500",children:"Loading..."})}):(0,t.jsxs)("div",{className:"mx-auto max-w-3xl space-y-8 py-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold tracking-tight text-zinc-900",children:"Welcome to Optiq"}),(0,t.jsx)("p",{className:"mt-2 text-zinc-600",children:"Let's get you set up in just a few minutes"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center gap-2",children:a.map((e,s)=>{let n="workspace"===e.key&&r.workspaceCreated||"connect-ads"===e.key&&r.adsConnected||"install-tracker"===e.key&&r.trackerInstalled||"set-targets"===e.key&&r.targetsSet||"first-insights"===e.key&&!1,i=e.key===r.currentStep;return(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("button",{onClick:()=>{var t;return t=e.key,void o(e=>({...e,currentStep:t}))},className:`flex h-10 w-10 items-center justify-center rounded-full text-sm font-medium transition-colors ${n?"bg-green-500 text-white":i?"bg-zinc-900 text-white":"bg-zinc-200 text-zinc-600"}`,children:n?"âœ“":s+1}),s<a.length-1&&(0,t.jsx)("div",{className:`mx-2 h-0.5 w-8 ${s<A?"bg-green-500":"bg-zinc-200"}`})]},e.key)})}),(0,t.jsxs)("div",{className:"rounded-xl border border-zinc-200 bg-white p-8",children:["workspace"===r.currentStep&&(0,t.jsx)(c,{completed:r.workspaceCreated,onComplete:S,saving:k}),"connect-ads"===r.currentStep&&(0,t.jsx)(l,{connections:u,onConnect:z,onSkip:()=>{o(e=>({...e,currentStep:"install-tracker"}))},onContinue:w,saving:k}),"install-tracker"===r.currentStep&&(0,t.jsx)(d,{trackerInfo:b,onGenerate:C,onVerify:_,onSkip:()=>{o(e=>({...e,currentStep:"set-targets"}))},saving:k}),"set-targets"===r.currentStep&&(0,t.jsx)(m,{targets:y,onTargetsChange:j,onSave:T,saving:k}),"first-insights"===r.currentStep&&(0,t.jsx)(x,{onFinish:()=>{s.push("/app/roi")}})]})]})}function c(e){let n,i,a,r=(0,s.c)(6),{onComplete:c,saving:l}=e;r[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Create Your Workspace"}),(0,t.jsx)("p",{className:"mt-1 text-zinc-600",children:"Your workspace is already set up! Click continue to proceed."})]}),r[0]=n):n=r[0],r[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("div",{className:"rounded-lg border border-green-200 bg-green-50 p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 text-white",children:"âœ“"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium text-green-900",children:"Workspace Ready"}),(0,t.jsx)("div",{className:"text-sm text-green-700",children:"Your organization and workspace have been created"})]})]})}),r[1]=i):i=r[1];let o=l?"Saving...":"Continue";return r[2]!==c||r[3]!==l||r[4]!==o?(a=(0,t.jsxs)("div",{className:"space-y-6",children:[n,i,(0,t.jsx)("button",{onClick:c,disabled:l,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:o})]}),r[2]=c,r[3]=l,r[4]=o,r[5]=a):a=r[5],a}function l(e){let n,i,a,r,c,l,d,m,x,p,h,u,g=(0,s.c)(32),{connections:b,onConnect:f,onSkip:y,onContinue:j,saving:k}=e,v=b.google||b.meta||b.tiktok;g[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Connect Your Ad Accounts"}),(0,t.jsx)("p",{className:"mt-1 text-zinc-600",children:"Link your advertising platforms to start tracking spend and attribution"})]}),g[0]=n):n=g[0],g[1]!==f?(i=()=>f("google"),g[1]=f,g[2]=i):i=g[2],g[3]!==b.google||g[4]!==i?(a=(0,t.jsx)(o,{name:"Google Ads",icon:"G",connected:b.google,onConnect:i}),g[3]=b.google,g[4]=i,g[5]=a):a=g[5],g[6]!==f?(r=()=>f("meta"),g[6]=f,g[7]=r):r=g[7],g[8]!==b.meta||g[9]!==r?(c=(0,t.jsx)(o,{name:"Meta Ads",icon:"M",connected:b.meta,onConnect:r}),g[8]=b.meta,g[9]=r,g[10]=c):c=g[10],g[11]!==f?(l=()=>f("tiktok"),g[11]=f,g[12]=l):l=g[12],g[13]!==b.tiktok||g[14]!==l?(d=(0,t.jsx)(o,{name:"TikTok Ads",icon:"T",connected:b.tiktok,onConnect:l}),g[13]=b.tiktok,g[14]=l,g[15]=d):d=g[15],g[16]!==a||g[17]!==c||g[18]!==d?(m=(0,t.jsxs)("div",{className:"space-y-3",children:[a,c,d]}),g[16]=a,g[17]=c,g[18]=d,g[19]=m):m=g[19],g[20]!==y?(x=(0,t.jsx)("button",{onClick:y,className:"flex-1 rounded-lg border border-zinc-200 px-4 py-3 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Skip for now"}),g[20]=y,g[21]=x):x=g[21];let N=k||!v,S=k?"Saving...":"Continue";return g[22]!==j||g[23]!==N||g[24]!==S?(p=(0,t.jsx)("button",{onClick:j,disabled:N,className:"flex-1 rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:S}),g[22]=j,g[23]=N,g[24]=S,g[25]=p):p=g[25],g[26]!==p||g[27]!==x?(h=(0,t.jsxs)("div",{className:"flex gap-3",children:[x,p]}),g[26]=p,g[27]=x,g[28]=h):h=g[28],g[29]!==h||g[30]!==m?(u=(0,t.jsxs)("div",{className:"space-y-6",children:[n,m,h]}),g[29]=h,g[30]=m,g[31]=u):u=g[31],u}function o(e){let n,i,a,r,c,l,o,d=(0,s.c)(18),{name:m,icon:x,connected:p,onConnect:h}=e;d[0]!==x?(n=(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-zinc-100 text-lg font-bold text-zinc-700",children:x}),d[0]=x,d[1]=n):n=d[1],d[2]!==m?(i=(0,t.jsx)("div",{className:"font-medium text-zinc-900",children:m}),d[2]=m,d[3]=i):i=d[3];let u=p?"Connected":"Not connected";return d[4]!==u?(a=(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:u}),d[4]=u,d[5]=a):a=d[5],d[6]!==i||d[7]!==a?(r=(0,t.jsxs)("div",{children:[i,a]}),d[6]=i,d[7]=a,d[8]=r):r=d[8],d[9]!==n||d[10]!==r?(c=(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[n,r]}),d[9]=n,d[10]=r,d[11]=c):c=d[11],d[12]!==p||d[13]!==h?(l=p?(0,t.jsx)("span",{className:"rounded-full bg-green-100 px-3 py-1 text-sm font-medium text-green-700",children:"âœ“ Connected"}):(0,t.jsx)("button",{onClick:h,className:"rounded-lg border border-zinc-200 px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Connect"}),d[12]=p,d[13]=h,d[14]=l):l=d[14],d[15]!==c||d[16]!==l?(o=(0,t.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-200 p-4",children:[c,l]}),d[15]=c,d[16]=l,d[17]=o):o=d[17],o}function d(e){let i,a,r,c,l,o,d,m=(0,s.c)(21),{trackerInfo:x,onGenerate:p,onVerify:h,onSkip:u,saving:g}=e,[b,f]=(0,n.useState)(!1);m[0]!==x?(i=()=>{x&&(navigator.clipboard.writeText(x.snippet),f(!0),setTimeout(()=>f(!1),2e3))},m[0]=x,m[1]=i):i=m[1];let y=i;m[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Install Tracking Script"}),(0,t.jsx)("p",{className:"mt-1 text-zinc-600",children:"Add this script to your website to track visitor journeys and conversions"})]}),m[2]=a):a=m[2],m[3]!==b||m[4]!==y||m[5]!==p||m[6]!==g||m[7]!==x?(r=x?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Your Site Key"}),(0,t.jsx)("div",{className:"mt-1 rounded-lg bg-zinc-100 px-4 py-2 font-mono text-sm text-zinc-900",children:x.siteKey})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Copy this snippet into your website's <head> tag"}),(0,t.jsxs)("div",{className:"relative mt-1",children:[(0,t.jsx)("pre",{className:"overflow-x-auto rounded-lg bg-zinc-900 p-4 text-sm text-zinc-100",children:x.snippet}),(0,t.jsx)("button",{onClick:y,className:"absolute right-2 top-2 rounded bg-zinc-700 px-3 py-1 text-xs text-white hover:bg-zinc-600",children:b?"Copied!":"Copy"})]})]}),(0,t.jsx)("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-4",children:(0,t.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,t.jsx)("strong",{children:"What this script does:"}),(0,t.jsxs)("ul",{className:"mt-2 list-inside list-disc space-y-1",children:[(0,t.jsx)("li",{children:"Assigns a first-party visitor ID cookie"}),(0,t.jsx)("li",{children:"Captures UTM parameters and referrer"}),(0,t.jsx)("li",{children:"Tracks page views and conversions"}),(0,t.jsx)("li",{children:"Enables multi-touch attribution"})]})]})})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-zinc-600",children:"Generate your unique tracking script to get started."}),(0,t.jsx)("button",{onClick:p,disabled:g,className:"rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:g?"Generating...":"Generate Tracking Script"})]}),m[3]=b,m[4]=y,m[5]=p,m[6]=g,m[7]=x,m[8]=r):r=m[8],m[9]!==u?(c=(0,t.jsx)("button",{onClick:u,className:"flex-1 rounded-lg border border-zinc-200 px-4 py-3 text-sm font-medium text-zinc-700 hover:bg-zinc-50",children:"Skip for now"}),m[9]=u,m[10]=c):c=m[10];let j=g||!x,k=g?"Verifying...":"Verify Installation";return m[11]!==h||m[12]!==j||m[13]!==k?(l=(0,t.jsx)("button",{onClick:h,disabled:j,className:"flex-1 rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:k}),m[11]=h,m[12]=j,m[13]=k,m[14]=l):l=m[14],m[15]!==c||m[16]!==l?(o=(0,t.jsxs)("div",{className:"flex gap-3",children:[c,l]}),m[15]=c,m[16]=l,m[17]=o):o=m[17],m[18]!==r||m[19]!==o?(d=(0,t.jsxs)("div",{className:"space-y-6",children:[a,r,o]}),m[18]=r,m[19]=o,m[20]=d):d=m[20],d}function m(e){let n,i,a,r,c,l,o,d,m,x,p,h,u,g,b,f,y,j,k=(0,s.c)(36),{targets:v,onTargetsChange:N,onSave:S,saving:z}=e;k[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"Set Your Performance Targets"}),(0,t.jsx)("p",{className:"mt-1 text-zinc-600",children:"Define your CPA and ROAS goals to enable waste detection alerts"})]}),k[0]=n):n=k[0],k[1]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target CPA"}),k[1]=i):i=k[1],k[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("span",{className:"text-zinc-500",children:"$"}),k[2]=a):a=k[2],k[3]!==N||k[4]!==v?(r=e=>N({...v,targetCpa:parseFloat(e.target.value)||0}),k[3]=N,k[4]=v,k[5]=r):r=k[5],k[6]!==r||k[7]!==v.targetCpa?(c=(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[a,(0,t.jsx)("input",{type:"number",min:"0",step:"1",value:v.targetCpa,onChange:r,className:"w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]}),k[6]=r,k[7]=v.targetCpa,k[8]=c):c=k[8],k[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Your target cost per acquisition"}),k[9]=l):l=k[9],k[10]!==c?(o=(0,t.jsxs)("div",{children:[i,c,l]}),k[10]=c,k[11]=o):o=k[11],k[12]===Symbol.for("react.memo_cache_sentinel")?(d=(0,t.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target ROAS"}),k[12]=d):d=k[12],k[13]!==N||k[14]!==v?(m=e=>N({...v,targetRoas:parseFloat(e.target.value)||0}),k[13]=N,k[14]=v,k[15]=m):m=k[15],k[16]!==m||k[17]!==v.targetRoas?(x=(0,t.jsx)("input",{type:"number",min:"0",step:"0.1",value:v.targetRoas,onChange:m,className:"w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),k[16]=m,k[17]=v.targetRoas,k[18]=x):x=k[18],k[19]===Symbol.for("react.memo_cache_sentinel")?(p=(0,t.jsx)("span",{className:"text-zinc-500",children:"x"}),k[19]=p):p=k[19],k[20]!==x?(h=(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[x,p]}),k[20]=x,k[21]=h):h=k[21],k[22]===Symbol.for("react.memo_cache_sentinel")?(u=(0,t.jsx)("p",{className:"mt-1 text-xs text-zinc-500",children:"Your target return on ad spend"}),k[22]=u):u=k[22],k[23]!==h?(g=(0,t.jsxs)("div",{children:[d,h,u]}),k[23]=h,k[24]=g):g=k[24],k[25]!==g||k[26]!==o?(b=(0,t.jsxs)("div",{className:"grid gap-6 sm:grid-cols-2",children:[o,g]}),k[25]=g,k[26]=o,k[27]=b):b=k[27],k[28]===Symbol.for("react.memo_cache_sentinel")?(f=(0,t.jsx)("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4",children:(0,t.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,t.jsx)("strong",{children:"How targets work:"}),(0,t.jsx)("p",{className:"mt-1",children:"Optiq will alert you when campaigns exceed your CPA target or fall below your ROAS target. You can adjust these anytime in Settings."})]})}),k[28]=f):f=k[28];let w=z?"Saving...":"Save & Continue";return k[29]!==S||k[30]!==z||k[31]!==w?(y=(0,t.jsx)("button",{onClick:S,disabled:z,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:w}),k[29]=S,k[30]=z,k[31]=w,k[32]=y):y=k[32],k[33]!==b||k[34]!==y?(j=(0,t.jsxs)("div",{className:"space-y-6",children:[n,b,f,y]}),k[33]=b,k[34]=y,k[35]=j):j=k[35],j}function x(e){let n,i,a,r,c,l,o,d,m=(0,s.c)(9),{onFinish:x}=e;return m[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,t.jsx)("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100",children:(0,t.jsx)("span",{className:"text-3xl",children:"ðŸŽ‰"})}),i=(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-zinc-900",children:"You're All Set!"}),(0,t.jsx)("p",{className:"mt-1 text-zinc-600",children:"Optiq is now tracking your ad performance and building attribution data."})]}),m[0]=n,m[1]=i):(n=m[0],i=m[1]),m[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,t.jsx)("h3",{className:"font-medium text-zinc-900",children:"What happens next:"}),m[2]=a):a=m[2],m[3]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,t.jsx)("span",{children:"Cost data syncs from your connected ad accounts (usually within 1 hour)"})]}),m[3]=r):r=m[3],m[4]===Symbol.for("react.memo_cache_sentinel")?(c=(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,t.jsx)("span",{children:"Visitor journeys are built as users interact with your site"})]}),m[4]=c):c=m[4],m[5]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,t.jsx)("span",{children:"Attribution is calculated for each conversion"})]}),m[5]=l):l=m[5],m[6]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsxs)("div",{className:"rounded-lg border border-zinc-200 bg-zinc-50 p-6 text-left",children:[a,(0,t.jsxs)("ul",{className:"mt-3 space-y-2 text-sm text-zinc-600",children:[r,c,l,(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-green-500",children:"âœ“"}),(0,t.jsx)("span",{children:"Waste detection alerts you to underperforming spend"})]})]})]}),m[6]=o):o=m[6],m[7]!==x?(d=(0,t.jsxs)("div",{className:"space-y-6 text-center",children:[n,i,o,(0,t.jsx)("button",{onClick:x,className:"w-full rounded-lg bg-zinc-900 px-4 py-3 text-sm font-medium text-white hover:bg-zinc-800",children:"Go to Dashboard"})]}),m[7]=x,m[8]=d):d=m[8],d}e.s(["OnboardingClient",()=>r])}]);