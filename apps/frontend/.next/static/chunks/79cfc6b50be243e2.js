(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,57333,e=>{"use strict";var s=e.i(15442),t=e.i(35560),n=e.i(37075),r=e.i(30320);function a({initialSettings:e,onSave:t}){let[n,a]=(0,r.useState)(e),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),x=async()=>{o(!0),m(!1);try{await t({wasteAlerts:n.wasteAlerts,cpaAlerts:n.cpaAlerts,performanceAlerts:n.performanceAlerts,frequency:n.frequency}),m(!0),setTimeout(()=>m(!1),3e3)}finally{o(!1)}};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Waste Detection Alerts"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when ad spend waste is detected"})]}),(0,s.jsx)(l,{checked:n.wasteAlerts.enabled,onChange:e=>a(s=>({...s,wasteAlerts:{...s.wasteAlerts,enabled:e}}))})]}),n.wasteAlerts.enabled&&(0,s.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Minimum Waste Level"}),(0,s.jsxs)("select",{value:n.wasteAlerts.thresholdLevel,onChange:e=>a(s=>({...s,wasteAlerts:{...s.wasteAlerts,thresholdLevel:e.target.value}})),className:"mt-1 w-full max-w-xs rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,s.jsx)("option",{value:"low",children:"Low (any waste)"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"}),(0,s.jsx)("option",{value:"critical",children:"Critical only"})]})]}),(0,s.jsx)(i,{email:n.wasteAlerts.notifyEmail,inApp:n.wasteAlerts.notifyInApp,onEmailChange:e=>a(s=>({...s,wasteAlerts:{...s.wasteAlerts,notifyEmail:e}})),onInAppChange:e=>a(s=>({...s,wasteAlerts:{...s.wasteAlerts,notifyInApp:e}}))})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"CPA Threshold Alerts"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when CPA exceeds your target"})]}),(0,s.jsx)(l,{checked:n.cpaAlerts.enabled,onChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,enabled:e}}))})]}),n.cpaAlerts.enabled&&(0,s.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Target CPA"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-zinc-500",children:"$"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:n.cpaAlerts.targetCpa,onChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,targetCpa:parseFloat(e.target.value)||0}})),className:"w-32 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Warning Threshold"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",min:"0",max:"500",value:n.cpaAlerts.warningThresholdPercent,onChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,warningThresholdPercent:parseInt(e.target.value)||0}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,s.jsx)("span",{className:"text-sm text-zinc-500",children:"% above target"})]}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-zinc-400",children:["Alert at $",(n.cpaAlerts.targetCpa*(100+n.cpaAlerts.warningThresholdPercent)/100).toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Critical Threshold"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",min:"0",max:"500",value:n.cpaAlerts.criticalThresholdPercent,onChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,criticalThresholdPercent:parseInt(e.target.value)||0}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,s.jsx)("span",{className:"text-sm text-zinc-500",children:"% above target"})]}),(0,s.jsxs)("p",{className:"mt-1 text-xs text-zinc-400",children:["Alert at $",(n.cpaAlerts.targetCpa*(100+n.cpaAlerts.criticalThresholdPercent)/100).toFixed(2)]})]})]}),(0,s.jsx)(i,{email:n.cpaAlerts.notifyEmail,inApp:n.cpaAlerts.notifyInApp,onEmailChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,notifyEmail:e}})),onInAppChange:e=>a(s=>({...s,cpaAlerts:{...s.cpaAlerts,notifyInApp:e}}))})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Performance Drop Alerts"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Get notified when conversions drop significantly"})]}),(0,s.jsx)(l,{checked:n.performanceAlerts.enabled,onChange:e=>a(s=>({...s,performanceAlerts:{...s.performanceAlerts,enabled:e}}))})]}),n.performanceAlerts.enabled&&(0,s.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Conversion Drop Threshold"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",min:"10",max:"100",value:n.performanceAlerts.conversionDropPercent,onChange:e=>a(s=>({...s,performanceAlerts:{...s.performanceAlerts,conversionDropPercent:parseInt(e.target.value)||50}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,s.jsx)("span",{className:"text-sm text-zinc-500",children:"% drop"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Comparison Window"}),(0,s.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,s.jsx)("input",{type:"number",min:"1",max:"30",value:n.performanceAlerts.windowDays,onChange:e=>a(s=>({...s,performanceAlerts:{...s.performanceAlerts,windowDays:parseInt(e.target.value)||7}})),className:"w-24 rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"}),(0,s.jsx)("span",{className:"text-sm text-zinc-500",children:"days"})]})]})]}),(0,s.jsx)(i,{email:n.performanceAlerts.notifyEmail,inApp:n.performanceAlerts.notifyInApp,onEmailChange:e=>a(s=>({...s,performanceAlerts:{...s.performanceAlerts,notifyEmail:e}})),onInAppChange:e=>a(s=>({...s,performanceAlerts:{...s.performanceAlerts,notifyInApp:e}}))})]})]}),(0,s.jsxs)("section",{className:"rounded-xl border border-zinc-200 bg-white p-6",children:[(0,s.jsx)("h3",{className:"text-base font-medium text-zinc-900",children:"Alert Frequency"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-500",children:"Control how often you receive alerts"}),(0,s.jsxs)("div",{className:"mt-6 space-y-4 border-t border-zinc-100 pt-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Minimum Interval Between Alerts"}),(0,s.jsxs)("select",{value:n.frequency.minIntervalMinutes,onChange:e=>a(s=>({...s,frequency:{...s.frequency,minIntervalMinutes:parseInt(e.target.value)}})),className:"mt-1 w-full max-w-xs rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,s.jsx)("option",{value:"15",children:"15 minutes"}),(0,s.jsx)("option",{value:"30",children:"30 minutes"}),(0,s.jsx)("option",{value:"60",children:"1 hour"}),(0,s.jsx)("option",{value:"120",children:"2 hours"}),(0,s.jsx)("option",{value:"240",children:"4 hours"}),(0,s.jsx)("option",{value:"480",children:"8 hours"}),(0,s.jsx)("option",{value:"1440",children:"24 hours"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-zinc-100 p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-zinc-700",children:"Email Digest"}),(0,s.jsx)("p",{className:"text-xs text-zinc-500",children:"Receive a summary instead of individual emails"})]}),(0,s.jsx)(l,{checked:n.frequency.digestEnabled,onChange:e=>a(s=>({...s,frequency:{...s.frequency,digestEnabled:e}}))})]}),n.frequency.digestEnabled&&(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Digest Frequency"}),(0,s.jsxs)("select",{value:n.frequency.digestFrequency,onChange:e=>a(s=>({...s,frequency:{...s.frequency,digestFrequency:e.target.value}})),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400",children:[(0,s.jsx)("option",{value:"daily",children:"Daily"}),(0,s.jsx)("option",{value:"weekly",children:"Weekly"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Delivery Time"}),(0,s.jsx)("input",{type:"time",value:n.frequency.digestTime,onChange:e=>a(s=>({...s,frequency:{...s.frequency,digestTime:e.target.value}})),className:"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[d&&(0,s.jsx)("span",{className:"text-sm text-green-600",children:"Settings saved!"}),(0,s.jsx)("button",{onClick:x,disabled:c,className:"rounded-lg bg-zinc-900 px-4 py-2 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50",children:c?"Saving...":"Save Settings"})]})]})}function l(e){let n,r,a,l=(0,t.c)(10),{checked:i,onChange:c}=e;l[0]!==i||l[1]!==c?(n=()=>c(!i),l[0]=i,l[1]=c,l[2]=n):n=l[2];let o=`relative inline-flex h-6 w-11 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${i?"bg-zinc-900":"bg-zinc-200"}`,d=`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-transform ${i?"translate-x-5":"translate-x-0"}`;return l[3]!==d?(r=(0,s.jsx)("span",{className:d}),l[3]=d,l[4]=r):r=l[4],l[5]!==i||l[6]!==n||l[7]!==o||l[8]!==r?(a=(0,s.jsx)("button",{type:"button",role:"switch","aria-checked":i,onClick:n,className:o,children:r}),l[5]=i,l[6]=n,l[7]=o,l[8]=r,l[9]=a):a=l[9],a}function i(e){let n,r,a,l,i,c,o,d,m,x,h=(0,t.c)(20),{email:p,inApp:u,onEmailChange:f,onInAppChange:b}=e;return h[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,s.jsx)("label",{className:"block text-sm font-medium text-zinc-700",children:"Notification Channels"}),h[0]=n):n=h[0],h[1]!==b?(r=e=>b(e.target.checked),h[1]=b,h[2]=r):r=h[2],h[3]!==u||h[4]!==r?(a=(0,s.jsx)("input",{type:"checkbox",checked:u,onChange:r,className:"h-4 w-4 rounded border-zinc-300"}),h[3]=u,h[4]=r,h[5]=a):a=h[5],h[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,s.jsx)("span",{className:"text-sm text-zinc-600",children:"In-app notifications"}),h[6]=l):l=h[6],h[7]!==a?(i=(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[a,l]}),h[7]=a,h[8]=i):i=h[8],h[9]!==f?(c=e=>f(e.target.checked),h[9]=f,h[10]=c):c=h[10],h[11]!==p||h[12]!==c?(o=(0,s.jsx)("input",{type:"checkbox",checked:p,onChange:c,className:"h-4 w-4 rounded border-zinc-300"}),h[11]=p,h[12]=c,h[13]=o):o=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(d=(0,s.jsx)("span",{className:"text-sm text-zinc-600",children:"Email"}),h[14]=d):d=h[14],h[15]!==o?(m=(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[o,d]}),h[15]=o,h[16]=m):m=h[16],h[17]!==i||h[18]!==m?(x=(0,s.jsxs)("div",{children:[n,(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap gap-4",children:[i,m]})]}),h[17]=i,h[18]=m,h[19]=x):x=h[19],x}function c(e){let r,l,i,c=(0,t.c)(4),{initialSettings:d}=e;return c[0]===Symbol.for("react.memo_cache_sentinel")?(r=(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-zinc-500",children:[(0,s.jsx)(n.default,{href:"/app/settings",className:"hover:text-zinc-700",children:"Settings"}),(0,s.jsx)("span",{children:"/"}),(0,s.jsx)("span",{className:"text-zinc-900",children:"Alerts"})]}),l=(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Alert Settings"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:"Configure when and how you receive alerts about your ad performance"})]}),c[0]=r,c[1]=l):(r=c[0],l=c[1]),c[2]!==d?(i=(0,s.jsxs)("div",{className:"space-y-6",children:[r,l,(0,s.jsx)(a,{initialSettings:d,onSave:o})]}),c[2]=d,c[3]=i):i=c[3],i}async function o(e){if(!(await fetch("/api/settings/alerts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save settings")}e.s(["AlertSettingsPageClient",()=>c],57333)}]);