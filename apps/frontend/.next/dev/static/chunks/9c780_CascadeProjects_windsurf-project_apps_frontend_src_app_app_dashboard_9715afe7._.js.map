{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/enhanced-kpi-cards.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface EnhancedKPICardsProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface KPIData {\r\n  totalSpend: number;\r\n  totalConversions: number;\r\n  avgCpa: number;\r\n  avgRoas: number;\r\n  totalWaste: number;\r\n  wastePct: number;\r\n  // Comparison data (previous period)\r\n  prevSpend?: number;\r\n  prevConversions?: number;\r\n  prevCpa?: number;\r\n  prevRoas?: number;\r\n}\r\n\r\nexport function EnhancedKPICards({ dateRange, platform, attributionModel }: EnhancedKPICardsProps) {\r\n  const [data, setData] = useState<KPIData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\r\n  const [autoRefresh, setAutoRefresh] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchKPIs();\r\n    \r\n    // Auto-refresh every 30 seconds if enabled\r\n    if (autoRefresh) {\r\n      const interval = setInterval(() => {\r\n        fetchKPIs();\r\n      }, 30000);\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [dateRange, platform, attributionModel, autoRefresh]);\r\n\r\n  const fetchKPIs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        comparePrevious: \"true\",\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/kpis?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result);\r\n        setLastUpdated(new Date());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch KPIs:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateChange = (current: number, previous?: number): { value: number; isPositive: boolean } | null => {\r\n    if (!previous || previous === 0) return null;\r\n    const change = ((current - previous) / previous) * 100;\r\n    return { value: Math.abs(change), isPositive: change >= 0 };\r\n  };\r\n\r\n  if (loading && !data) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n          {[...Array(5)].map((_, i) => (\r\n            <div key={i} className=\"bg-white rounded-lg shadow p-6 animate-pulse\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-20 mb-2\"></div>\r\n              <div className=\"h-8 bg-gray-200 rounded w-24\"></div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data) {\r\n    return null;\r\n  }\r\n\r\n  const spendChange = calculateChange(data.totalSpend, data.prevSpend);\r\n  const conversionChange = calculateChange(data.totalConversions, data.prevConversions);\r\n  const cpaChange = calculateChange(data.avgCpa, data.prevCpa);\r\n  const roasChange = calculateChange(data.avgRoas, data.prevRoas);\r\n\r\n  const cards = [\r\n    {\r\n      label: \"Total Spend\",\r\n      value: `$${(data.totalSpend / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n      change: spendChange,\r\n      icon: \"üí∞\",\r\n      color: \"blue\",\r\n      invertChange: true, // Lower spend is better\r\n    },\r\n    {\r\n      label: \"Conversions\",\r\n      value: data.totalConversions.toLocaleString(undefined, { maximumFractionDigits: 1 }),\r\n      change: conversionChange,\r\n      icon: \"üéØ\",\r\n      color: \"green\",\r\n      invertChange: false,\r\n    },\r\n    {\r\n      label: \"Avg CPA\",\r\n      value: data.avgCpa ? `$${data.avgCpa.toFixed(2)}` : \"N/A\",\r\n      change: cpaChange,\r\n      icon: \"üìä\",\r\n      color: \"purple\",\r\n      invertChange: true, // Lower CPA is better\r\n    },\r\n    {\r\n      label: \"Avg ROAS\",\r\n      value: data.avgRoas ? `${data.avgRoas.toFixed(2)}x` : \"N/A\",\r\n      change: roasChange,\r\n      icon: \"üìà\",\r\n      color: \"orange\",\r\n      invertChange: false,\r\n    },\r\n    {\r\n      label: \"Waste Spend\",\r\n      value: `$${(data.totalWaste / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n      subValue: `${data.wastePct.toFixed(1)}% of spend`,\r\n      icon: \"‚ö†Ô∏è\",\r\n      color: \"red\",\r\n      invertChange: true,\r\n    },\r\n  ];\r\n\r\n  const colorClasses = {\r\n    blue: \"from-blue-50 to-blue-100 text-blue-900 border-blue-200\",\r\n    green: \"from-green-50 to-green-100 text-green-900 border-green-200\",\r\n    purple: \"from-purple-50 to-purple-100 text-purple-900 border-purple-200\",\r\n    orange: \"from-orange-50 to-orange-100 text-orange-900 border-orange-200\",\r\n    red: \"from-red-50 to-red-100 text-red-900 border-red-200\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header with last updated and refresh controls */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n          <span className=\"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n          <span>Last updated {formatDistanceToNow(lastUpdated, { addSuffix: true })}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setAutoRefresh(!autoRefresh)}\r\n            className={`px-3 py-1 text-sm rounded-lg transition-colors ${\r\n              autoRefresh\r\n                ? \"bg-green-100 text-green-700 hover:bg-green-200\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n            }`}\r\n          >\r\n            {autoRefresh ? \"üîÑ Auto-refresh ON\" : \"‚è∏Ô∏è Auto-refresh OFF\"}\r\n          </button>\r\n          <button\r\n            onClick={fetchKPIs}\r\n            disabled={loading}\r\n            className=\"px-3 py-1 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-colors\"\r\n          >\r\n            {loading ? \"Refreshing...\" : \"‚Üª Refresh Now\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPI Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n        {cards.map((card, index) => {\r\n          const change = card.change;\r\n          const isGood = change ? (card.invertChange ? !change.isPositive : change.isPositive) : null;\r\n          \r\n          return (\r\n            <div\r\n              key={index}\r\n              className={`bg-gradient-to-br ${colorClasses[card.color as keyof typeof colorClasses]} rounded-lg shadow-md border-2 p-6 transition-all hover:shadow-lg hover:scale-105`}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <p className=\"text-sm font-medium opacity-80\">{card.label}</p>\r\n                <span className=\"text-2xl\">{card.icon}</span>\r\n              </div>\r\n              <p className=\"text-3xl font-bold mb-1\">{card.value}</p>\r\n              \r\n              {/* Trend indicator */}\r\n              {change && (\r\n                <div className={`flex items-center gap-1 text-sm font-medium ${\r\n                  isGood ? \"text-green-700\" : \"text-red-700\"\r\n                }`}>\r\n                  <span>{isGood ? \"‚Üë\" : \"‚Üì\"}</span>\r\n                  <span>{change.value.toFixed(1)}%</span>\r\n                  <span className=\"text-xs opacity-70\">vs prev period</span>\r\n                </div>\r\n              )}\r\n              \r\n              {card.subValue && (\r\n                <p className=\"text-xs opacity-70 mt-1\">{card.subValue}</p>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","formatDistanceToNow","EnhancedKPICardsProps","dateRange","from","Date","to","platform","attributionModel","KPIData","totalSpend","totalConversions","avgCpa","avgRoas","totalWaste","wastePct","prevSpend","prevConversions","prevCpa","prevRoas","EnhancedKPICards","data","setData","loading","setLoading","lastUpdated","setLastUpdated","autoRefresh","setAutoRefresh","fetchKPIs","interval","setInterval","clearInterval","params","URLSearchParams","fromDate","toISOString","toDate","comparePrevious","response","fetch","ok","result","json","error","console","calculateChange","current","previous","value","isPositive","change","Math","abs","Array","map","_","i","spendChange","conversionChange","cpaChange","roasChange","cards","label","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","icon","color","invertChange","toFixed","subValue","colorClasses","blue","green","purple","orange","red","addSuffix","card","index","isGood"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/enhanced-chart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  AreaChart,\r\n  Area,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  TooltipProps,\r\n} from \"recharts\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface EnhancedChartProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface ChartDataPoint {\r\n  date: string;\r\n  spend: number;\r\n  conversions: number;\r\n  revenue: number;\r\n  roas: number;\r\n  cpa: number;\r\n  waste: number;\r\n}\r\n\r\ntype ChartType = \"line\" | \"area\" | \"bar\";\r\ntype MetricType = \"spend\" | \"conversions\" | \"revenue\" | \"roas\" | \"cpa\" | \"waste\";\r\n\r\nexport function EnhancedChart({ dateRange, platform, attributionModel }: EnhancedChartProps) {\r\n  const [data, setData] = useState<ChartDataPoint[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chartType, setChartType] = useState<ChartType>(\"area\");\r\n  const [selectedMetrics, setSelectedMetrics] = useState<MetricType[]>([\"spend\", \"conversions\"]);\r\n  const [showComparison, setShowComparison] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchChartData();\r\n  }, [dateRange, platform, attributionModel]);\r\n\r\n  const fetchChartData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/time-series?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch chart data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleMetric = (metric: MetricType) => {\r\n    setSelectedMetrics(prev => \r\n      prev.includes(metric) \r\n        ? prev.filter(m => m !== metric)\r\n        : [...prev, metric]\r\n    );\r\n  };\r\n\r\n  const exportData = () => {\r\n    const csv = [\r\n      [\"Date\", ...selectedMetrics.map(m => m.charAt(0).toUpperCase() + m.slice(1))].join(\",\"),\r\n      ...data.map(d => [\r\n        format(new Date(d.date), \"yyyy-MM-dd\"),\r\n        ...selectedMetrics.map(m => {\r\n          const value = d[m];\r\n          return m === \"spend\" || m === \"revenue\" || m === \"waste\" \r\n            ? (value / 1_000_000).toFixed(2)\r\n            : value.toFixed(2);\r\n        })\r\n      ].join(\",\"))\r\n    ].join(\"\\n\");\r\n\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `optiq-metrics-${format(new Date(), \"yyyy-MM-dd\")}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-48 mb-4\"></div>\r\n          <div className=\"h-80 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance Over Time</h3>\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          No data available for the selected period\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const metricConfig: Record<MetricType, { label: string; color: string; format: (v: number) => string }> = {\r\n    spend: { \r\n      label: \"Spend\", \r\n      color: \"#3b82f6\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n    conversions: { \r\n      label: \"Conversions\", \r\n      color: \"#22c55e\",\r\n      format: (v) => v.toFixed(1)\r\n    },\r\n    revenue: { \r\n      label: \"Revenue\", \r\n      color: \"#8b5cf6\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n    roas: { \r\n      label: \"ROAS\", \r\n      color: \"#f59e0b\",\r\n      format: (v) => `${v.toFixed(2)}x`\r\n    },\r\n    cpa: { \r\n      label: \"CPA\", \r\n      color: \"#ec4899\",\r\n      format: (v) => `$${v.toFixed(2)}`\r\n    },\r\n    waste: { \r\n      label: \"Waste\", \r\n      color: \"#ef4444\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n  };\r\n\r\n  const CustomTooltip = ({ active, payload, label }: any) => {\r\n    if (active && payload && payload.length) {\r\n      return (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg shadow-lg p-4\">\r\n          <p className=\"font-semibold text-gray-900 mb-2\">\r\n            {format(new Date(label), \"MMM dd, yyyy\")}\r\n          </p>\r\n          {payload.map((entry: any, index: number) => {\r\n            const metric = entry.dataKey as MetricType;\r\n            const config = metricConfig[metric];\r\n            return (\r\n              <div key={index} className=\"flex items-center justify-between gap-4 text-sm\">\r\n                <span className=\"flex items-center gap-2\">\r\n                  <span \r\n                    className=\"inline-block w-3 h-3 rounded-full\" \r\n                    style={{ backgroundColor: entry.color }}\r\n                  />\r\n                  {config.label}:\r\n                </span>\r\n                <span className=\"font-semibold\">{config.format(entry.value as number)}</span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const ChartComponent = chartType === \"line\" ? LineChart : chartType === \"area\" ? AreaChart : BarChart;\r\n  const DataComponent = chartType === \"line\" ? Line : chartType === \"area\" ? Area : Bar;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Performance Over Time</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Interactive metrics visualization</p>\r\n        </div>\r\n        \r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {/* Chart Type Selector */}\r\n          <div className=\"flex gap-1 bg-gray-100 rounded-lg p-1\">\r\n            {([\"line\", \"area\", \"bar\"] as ChartType[]).map(type => (\r\n              <button\r\n                key={type}\r\n                onClick={() => setChartType(type)}\r\n                className={`px-3 py-1 text-sm rounded-md transition-colors ${\r\n                  chartType === type\r\n                    ? \"bg-white text-gray-900 shadow-sm\"\r\n                    : \"text-gray-600 hover:text-gray-900\"\r\n                }`}\r\n              >\r\n                {type.charAt(0).toUpperCase() + type.slice(1)}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Export Button */}\r\n          <button\r\n            onClick={exportData}\r\n            className=\"px-3 py-1 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-1\"\r\n          >\r\n            <span>üì•</span>\r\n            <span>Export CSV</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metric Toggles */}\r\n      <div className=\"flex flex-wrap gap-2 mb-6\">\r\n        {(Object.keys(metricConfig) as MetricType[]).map(metric => {\r\n          const config = metricConfig[metric];\r\n          const isSelected = selectedMetrics.includes(metric);\r\n          return (\r\n            <button\r\n              key={metric}\r\n              onClick={() => toggleMetric(metric)}\r\n              className={`px-3 py-1.5 text-sm rounded-lg border-2 transition-all ${\r\n                isSelected\r\n                  ? \"border-current shadow-sm\"\r\n                  : \"border-gray-200 text-gray-600 hover:border-gray-300\"\r\n              }`}\r\n              style={isSelected ? { \r\n                borderColor: config.color,\r\n                backgroundColor: `${config.color}15`,\r\n                color: config.color\r\n              } : {}}\r\n            >\r\n              <span className=\"inline-block w-2 h-2 rounded-full mr-2\" style={{ backgroundColor: config.color }} />\r\n              {config.label}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <div className=\"h-80\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <ChartComponent data={data}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n            <XAxis \r\n              dataKey=\"date\" \r\n              tickFormatter={(date) => format(new Date(date), \"MMM dd\")}\r\n              stroke=\"#6b7280\"\r\n              style={{ fontSize: \"12px\" }}\r\n            />\r\n            <YAxis \r\n              stroke=\"#6b7280\"\r\n              style={{ fontSize: \"12px\" }}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend \r\n              wrapperStyle={{ fontSize: \"14px\" }}\r\n              formatter={(value) => metricConfig[value as MetricType]?.label || value}\r\n            />\r\n            \r\n            {selectedMetrics.map(metric => {\r\n              const config = metricConfig[metric];\r\n              const dataKey = metric;\r\n              \r\n              if (chartType === \"line\") {\r\n                return (\r\n                  <Line\r\n                    key={metric}\r\n                    type=\"monotone\"\r\n                    dataKey={dataKey}\r\n                    stroke={config.color}\r\n                    strokeWidth={2}\r\n                    dot={{ fill: config.color, r: 4 }}\r\n                    activeDot={{ r: 6 }}\r\n                  />\r\n                );\r\n              } else if (chartType === \"area\") {\r\n                return (\r\n                  <Area\r\n                    key={metric}\r\n                    type=\"monotone\"\r\n                    dataKey={dataKey}\r\n                    stroke={config.color}\r\n                    fill={config.color}\r\n                    fillOpacity={0.2}\r\n                    strokeWidth={2}\r\n                  />\r\n                );\r\n              } else {\r\n                return (\r\n                  <Bar\r\n                    key={metric}\r\n                    dataKey={dataKey}\r\n                    fill={config.color}\r\n                    radius={[4, 4, 0, 0]}\r\n                  />\r\n                );\r\n              }\r\n            })}\r\n          </ChartComponent>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* Chart Stats Summary */}\r\n      <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n          {selectedMetrics.map(metric => {\r\n            const config = metricConfig[metric];\r\n            const values = data.map(d => d[metric]);\r\n            const total = values.reduce((sum, v) => sum + v, 0);\r\n            const avg = total / values.length;\r\n            const max = Math.max(...values);\r\n            \r\n            return (\r\n              <div key={metric} className=\"text-center\">\r\n                <p className=\"text-xs text-gray-600 mb-1\">{config.label} Avg</p>\r\n                <p className=\"text-lg font-semibold\" style={{ color: config.color }}>\r\n                  {config.format(avg)}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Max: {config.format(max)}\r\n                </p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","LineChart","Line","AreaChart","Area","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","TooltipProps","format","EnhancedChartProps","dateRange","from","Date","to","platform","attributionModel","ChartDataPoint","date","spend","conversions","revenue","roas","cpa","waste","ChartType","MetricType","EnhancedChart","data","setData","loading","setLoading","chartType","setChartType","selectedMetrics","setSelectedMetrics","showComparison","setShowComparison","fetchChartData","params","URLSearchParams","fromDate","toISOString","toDate","response","fetch","ok","result","json","error","console","toggleMetric","metric","prev","includes","filter","m","exportData","csv","map","charAt","toUpperCase","slice","join","d","value","toFixed","blob","Blob","type","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","length","metricConfig","Record","label","color","v","CustomTooltip","active","payload","entry","index","dataKey","config","backgroundColor","ChartComponent","DataComponent","Object","keys","isSelected","borderColor","fontSize","fill","r","values","total","reduce","sum","avg","max","Math"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 949, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/campaign-table.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\ninterface CampaignTableProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface CampaignRow {\r\n  id: string;\r\n  grain: string;\r\n  name: string;\r\n  platformName: string;\r\n  spend: number;\r\n  conversions: number;\r\n  cpa: number | null;\r\n  roas: number | null;\r\n  waste: number;\r\n  wastePct: number;\r\n}\r\n\r\nexport function CampaignTable({ dateRange, platform, attributionModel }: CampaignTableProps) {\r\n  const [data, setData] = useState<CampaignRow[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [grain, setGrain] = useState<\"CAMPAIGN\" | \"ADSET\" | \"AD\">(\"CAMPAIGN\");\r\n  const [sortBy, setSortBy] = useState<\"spend\" | \"waste\" | \"cpa\" | \"roas\">(\"waste\");\r\n  const [sortOrder, setSortOrder] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n  useEffect(() => {\r\n    fetchTableData();\r\n  }, [dateRange, platform, attributionModel, grain]);\r\n\r\n  const fetchTableData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        grain,\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/campaigns?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch campaign data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSort = (column: typeof sortBy) => {\r\n    if (sortBy === column) {\r\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortBy(column);\r\n      setSortOrder(\"desc\");\r\n    }\r\n  };\r\n\r\n  const sortedData = [...data].sort((a, b) => {\r\n    let aVal = 0, bVal = 0;\r\n    \r\n    switch (sortBy) {\r\n      case \"spend\":\r\n        aVal = a.spend;\r\n        bVal = b.spend;\r\n        break;\r\n      case \"waste\":\r\n        aVal = a.waste;\r\n        bVal = b.waste;\r\n        break;\r\n      case \"cpa\":\r\n        aVal = a.cpa || Infinity;\r\n        bVal = b.cpa || Infinity;\r\n        break;\r\n      case \"roas\":\r\n        aVal = a.roas || 0;\r\n        bVal = b.roas || 0;\r\n        break;\r\n    }\r\n\r\n    return sortOrder === \"asc\" ? aVal - bVal : bVal - aVal;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-32 mb-4\"></div>\r\n          <div className=\"space-y-3\">\r\n            {[...Array(5)].map((_, i) => (\r\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow\">\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Performance by {grain}</h3>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => setGrain(\"CAMPAIGN\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"CAMPAIGN\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Campaign\r\n            </button>\r\n            <button\r\n              onClick={() => setGrain(\"ADSET\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"ADSET\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Ad Set\r\n            </button>\r\n            <button\r\n              onClick={() => setGrain(\"AD\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"AD\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Ad\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Name\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Platform\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"spend\")}\r\n              >\r\n                Spend {sortBy === \"spend\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Conversions\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"cpa\")}\r\n              >\r\n                CPA {sortBy === \"cpa\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"roas\")}\r\n              >\r\n                ROAS {sortBy === \"roas\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"waste\")}\r\n              >\r\n                Waste {sortBy === \"waste\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {sortedData.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={7} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  No data available for the selected period\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              sortedData.map((row) => {\r\n                const wasteLevel = row.wastePct > 75 ? \"high\" : row.wastePct > 50 ? \"medium\" : row.wastePct > 25 ? \"low\" : \"none\";\r\n                \r\n                return (\r\n                  <tr\r\n                    key={row.id}\r\n                    className={`hover:bg-gray-50 ${\r\n                      wasteLevel === \"high\" ? \"bg-red-50\" :\r\n                      wasteLevel === \"medium\" ? \"bg-orange-50\" :\r\n                      wasteLevel === \"low\" ? \"bg-yellow-50\" :\r\n                      \"\"\r\n                    }`}\r\n                  >\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">{row.name}</div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">{row.platformName}</div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        ${(row.spend / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.conversions.toLocaleString(undefined, { maximumFractionDigits: 1 })}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.cpa ? `$${row.cpa.toFixed(2)}` : \"N/A\"}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.roas ? `${row.roas.toFixed(2)}x` : \"N/A\"}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          ${(row.waste / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                        </div>\r\n                        {wasteLevel !== \"none\" && (\r\n                          <span\r\n                            className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${\r\n                              wasteLevel === \"high\" ? \"bg-red-100 text-red-800\" :\r\n                              wasteLevel === \"medium\" ? \"bg-orange-100 text-orange-800\" :\r\n                              \"bg-yellow-100 text-yellow-800\"\r\n                            }`}\r\n                          >\r\n                            {row.wastePct.toFixed(0)}%\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","CampaignTableProps","dateRange","from","Date","to","platform","attributionModel","CampaignRow","id","grain","name","platformName","spend","conversions","cpa","roas","waste","wastePct","CampaignTable","data","setData","loading","setLoading","setGrain","sortBy","setSortBy","sortOrder","setSortOrder","fetchTableData","params","URLSearchParams","fromDate","toISOString","toDate","response","fetch","ok","result","json","error","console","handleSort","column","sortedData","sort","a","b","aVal","bVal","Infinity","Array","map","_","i","length","row","wasteLevel","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","toFixed"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 1431, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/dashboard-filters.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface DashboardFiltersProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n  onDateRangeChange: (range: { from: Date; to: Date }) => void;\r\n  onPlatformChange: (platform: string | null) => void;\r\n  onAttributionModelChange: (model: string) => void;\r\n}\r\n\r\nconst PLATFORMS = [\r\n  { value: null, label: \"All Platforms\" },\r\n  { value: \"META_ADS\", label: \"Meta Ads\" },\r\n  { value: \"GOOGLE_ADS\", label: \"Google Ads\" },\r\n  { value: \"TIKTOK_ADS\", label: \"TikTok Ads\" },\r\n];\r\n\r\nconst ATTRIBUTION_MODELS = [\r\n  { value: \"LAST_TOUCH\", label: \"Last Touch\" },\r\n  { value: \"FIRST_TOUCH\", label: \"First Touch\" },\r\n  { value: \"LINEAR\", label: \"Linear\" },\r\n  { value: \"TIME_DECAY\", label: \"Time Decay\" },\r\n  { value: \"POSITION_BASED\", label: \"Position Based\" },\r\n];\r\n\r\nconst QUICK_RANGES = [\r\n  { label: \"Last 7 days\", days: 7 },\r\n  { label: \"Last 30 days\", days: 30 },\r\n  { label: \"Last 90 days\", days: 90 },\r\n];\r\n\r\nexport function DashboardFilters({\r\n  dateRange,\r\n  platform,\r\n  attributionModel,\r\n  onDateRangeChange,\r\n  onPlatformChange,\r\n  onAttributionModelChange,\r\n}: DashboardFiltersProps) {\r\n  const [showCustomRange, setShowCustomRange] = useState(false);\r\n\r\n  const handleQuickRange = (days: number) => {\r\n    const to = new Date();\r\n    const from = new Date(Date.now() - days * 24 * 60 * 60 * 1000);\r\n    onDateRangeChange({ from, to });\r\n    setShowCustomRange(false);\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return date.toISOString().split(\"T\")[0];\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow p-4\">\r\n      <div className=\"flex flex-wrap items-center gap-4\">\r\n        {/* Date Range */}\r\n        <div className=\"flex-1 min-w-[200px]\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Date Range\r\n          </label>\r\n          <div className=\"flex gap-2\">\r\n            {QUICK_RANGES.map((range) => (\r\n              <button\r\n                key={range.days}\r\n                onClick={() => handleQuickRange(range.days)}\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n              >\r\n                {range.label}\r\n              </button>\r\n            ))}\r\n            <button\r\n              onClick={() => setShowCustomRange(!showCustomRange)}\r\n              className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n            >\r\n              Custom\r\n            </button>\r\n          </div>\r\n          {showCustomRange && (\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.from)}\r\n                onChange={(e) =>\r\n                  onDateRangeChange({\r\n                    from: new Date(e.target.value),\r\n                    to: dateRange.to,\r\n                  })\r\n                }\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg\"\r\n              />\r\n              <span className=\"self-center text-gray-500\">to</span>\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.to)}\r\n                onChange={(e) =>\r\n                  onDateRangeChange({\r\n                    from: dateRange.from,\r\n                    to: new Date(e.target.value),\r\n                  })\r\n                }\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Platform Filter */}\r\n        <div className=\"w-48\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Platform\r\n          </label>\r\n          <select\r\n            value={platform || \"\"}\r\n            onChange={(e) => onPlatformChange(e.target.value || null)}\r\n            className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {PLATFORMS.map((p) => (\r\n              <option key={p.value || \"all\"} value={p.value || \"\"}>\r\n                {p.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Attribution Model */}\r\n        <div className=\"w-48\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Attribution Model\r\n          </label>\r\n          <select\r\n            value={attributionModel}\r\n            onChange={(e) => onAttributionModelChange(e.target.value)}\r\n            className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {ATTRIBUTION_MODELS.map((m) => (\r\n              <option key={m.value} value={m.value}>\r\n                {m.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","useState","DashboardFiltersProps","dateRange","from","Date","to","platform","attributionModel","onDateRangeChange","range","onPlatformChange","onAttributionModelChange","model","PLATFORMS","value","label","ATTRIBUTION_MODELS","QUICK_RANGES","days","DashboardFilters","t0","$","$i","Symbol","for","showCustomRange","setShowCustomRange","t1","now","handleQuickRange","formatDate","_DashboardFiltersFormatDate","t2","t3","map","DashboardFilters[QUICK_RANGES.map() > <button>.onClick]","t4","DashboardFilters[<button>.onClick]","t5","t6","e","target","e_0","t7","t8","t9","t10","e_1","t11","_DashboardFiltersPLATFORMSMap","t12","t13","t14","e_2","t15","_DashboardFiltersATTRIBUTION_MODELSMap","t16","t17","m","p","date","toISOString","split"],"mappings":";;;;;AAAa,SAAAA,CAAA,IAAAC,EAAA;AAEb,SAASC,QAAQ,QAAQ,OAAO;;;AAFhC,YAAY;;;AAaZ,MAAMa,SAAS,GAAG;IAChB;QAAEC,KAAK,EAAE,IAAI;QAAEC,KAAK,EAAE;IAAgB,CAAC;IACvC;QAAED,KAAK,EAAE,UAAU;QAAEC,KAAK,EAAE;IAAW,CAAC;IACxC;QAAED,KAAK,EAAE,YAAY;QAAEC,KAAK,EAAE;IAAa,CAAC;IAC5C;QAAED,KAAK,EAAE,YAAY;QAAEC,KAAK,EAAE;IAAa,CAAC;CAC7C;AAED,MAAMC,kBAAkB,GAAG;IACzB;QAAEF,KAAK,EAAE,YAAY;QAAEC,KAAK,EAAE;IAAa,CAAC;IAC5C;QAAED,KAAK,EAAE,aAAa;QAAEC,KAAK,EAAE;IAAc,CAAC;IAC9C;QAAED,KAAK,EAAE,QAAQ;QAAEC,KAAK,EAAE;IAAS,CAAC;IACpC;QAAED,KAAK,EAAE,YAAY;QAAEC,KAAK,EAAE;IAAa,CAAC;IAC5C;QAAED,KAAK,EAAE,gBAAgB;QAAEC,KAAK,EAAE;IAAiB,CAAC;CACrD;AAED,MAAME,YAAY,GAAG;IACnB;QAAEF,KAAK,EAAE,aAAa;QAAEG,IAAI,EAAE;IAAE,CAAC;IACjC;QAAEH,KAAK,EAAE,cAAc;QAAEG,IAAI,EAAE;IAAG,CAAC;IACnC;QAAEH,KAAK,EAAE,cAAc;QAAEG,IAAI,EAAE;IAAG,CAAC;CACpC;AAEM,0BAAAE,EAAA;;IAAA,MAAAC,CAAA,OAAAtB,0PAAA,EAAA;IAAA,IAAAsB,CAAA,CAAA,EAAA,KAAA,oEAAA;QAAA,IAAA,IAAAC,EAAA,GAAA,GAAAA,EAAA,GAAA,IAAAA,EAAA,IAAA,EAAA;YAAAD,CAAA,CAAAC,EAAA,CAAA,GAAAC,MAAA,CAAAC,GAAA,CAAA;QAAA;QAAAH,CAAA,CAAA,EAAA,GAAA;IAAA;IAA0B,MAAA,EAAAnB,SAAA,EAAAI,QAAA,EAAAC,gBAAA,EAAAC,iBAAA,EAAAE,gBAAA,EAAAC,wBAAAA,EAAA,GAAAS,EAOT;IACtB,MAAA,CAAAK,eAAA,EAAAC,kBAAA,CAAA,OAA8C1B,mPAAQ,EAAC,KAAK,CAAC;IAAC,IAAA2B,EAAA;IAAA,IAAAN,CAAA,CAAA,EAAA,KAAAb,iBAAA,EAAA;QAErCmB,EAAA,GAAA,CAAA;YAAA,uCAAAT,IAAA;gBACvB,MAAAb,EAAA,GAAW,IAAID,IAAI,CAAC,CAAC;gBACrB,MAAAD,IAAA,GAAa,IAAIC,IAAI,CAACA,IAAI,CAAAwB,GAAI,CAAC,CAAC,GAAGV,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC;gBAC9DV,iBAAiB,CAAC;oBAAAL,IAAA;oBAAAE;gBAAW,CAAC,CAAC;gBAC/BqB,kBAAkB,CAAC,KAAK,CAAC;YAAA;SAAA,CAAA,CAAA,qCAC1B;QAAAL,CAAA,CAAA,EAAA,GAAAb,iBAAA;QAAAa,CAAA,CAAA,EAAA,GAAAM,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAN,CAAA,CAAA,EAAA;IAAA;IALD,MAAAQ,gBAAA,GAAyBF,EAKxB;IAED,MAAAG,UAAA,GAAmBC,2BAElB;IAAC,IAAAC,EAAA;IAAA,IAAAX,CAAA,CAAA,EAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAOMQ,EAAA,iBAAA,uQAAA,KAEQ;YAFS,SAA8C,EAA9C,8CAA8C;sBAAC,UAEhE,EAFA,KAEQ;;;;;;QAAAX,CAAA,CAAA,EAAA,GAAAW,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAX,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAY,EAAA;IAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAQ,gBAAA,EAAA;QAELI,EAAA,GAAAhB,YAAY,CAAAiB,GAAI,CAAC;YAAA,wCAAAzB,KAAA,kBAChB,uQAAA,MAMS,CALF,GAAU,CAAV;oBACI,OAAkC,CAAlC,CAAA;wBAAA,2DAAA0B,CAAA,GAAMN,gBAAgB,CAACpB,KAAK,CAAAS,IAAK;oBAAC,CAAA,CAAA,0DAAD,CAAC;oBACjC,SAAsE,EAAtE,sEAAsE,CAE/E;8BAAAT,KAAK,CAAAM,KAAK,CACb,EANA,MAMS;mBALFN,KAAK,CAAAS,IAAI,CAAC;;;;;QAKR,CAAA,CAAA,uCACV,CAAC;QAAAG,CAAA,CAAA,EAAA,GAAAQ,gBAAA;QAAAR,CAAA,CAAA,EAAA,GAAAY,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAZ,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAe,EAAA;IAAA,IAAAf,CAAA,CAAA,EAAA,KAAAI,eAAA,EAAA;QACFW,EAAA,iBAAA,uQAAA,MAKS;YAJE,OAA0C,CAA1C,CAAA;gBAAA,sCAAAC,CAAA,GAAMX,kBAAkB,CAAC,CAACD,eAAe;YAAC,CAAA,CAAA,qCAAD,CAAC;YACzC,SAAsE,EAAtE,sEAAsE;sBACjF,MAED,EALA,MAKS;;;;;;QAAAJ,CAAA,CAAA,EAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,EAAA,GAAAe,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAf,CAAA,CAAA,EAAA;IAAA;IAAA,IAAAiB,EAAA;IAAA,IAAAjB,CAAA,CAAA,EAAA,KAAAY,EAAA,IAAAZ,CAAA,CAAA,EAAA,KAAAe,EAAA,EAAA;QAfXE,EAAA,iBAAA,uQAAA,GAgBM;YAhBS,SAAY,EAAZ,YAAY,CACxB;;gBAAAL,EAQA,CACD;gBAAAG,EAKQ,CACV,EAhBA,GAgBM;;;;;;;QAAAf,CAAA,CAAA,EAAA,GAAAY,EAAA;QAAAZ,CAAA,CAAA,EAAA,GAAAe,EAAA;QAAAf,CAAA,CAAA,GAAA,GAAAiB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAjB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAkB,EAAA;IAAA,IAAAlB,CAAA,CAAA,GAAA,KAAAnB,SAAA,IAAAmB,CAAA,CAAA,GAAA,KAAAb,iBAAA,IAAAa,CAAA,CAAA,GAAA,KAAAI,eAAA,EAAA;QACLc,EAAA,GAAAd,eA0BA,kBAzBC,uQAAA,GAwBM;YAxBS,SAAiB,EAAjB,iBAAiB;;8BAC9B,uQAAA,KAUE;oBATK,IAAM,EAAN,MAAM;oBACJ,KAA0B,CAA1B,CAAAK,UAAU,CAAC5B,SAAS,CAAAC,IAAK,EAAC;oBACvB,QAIN,CAJM,CAAA;wBAAA,uCAAAqC,CAAA,GACRhC,iBAAiB,CAAC;gCAAAL,IAAA,EACV,IAAIC,IAAI,CAACoC,CAAC,CAAAC,MAAO,CAAA3B,KAAM,CAAC;gCAAAT,EAAA,EAC1BH,SAAS,CAAAG,EAAAA;4BACf,CAAC;oBAAC,CAAA,CAAA,qCAAD,CAAC;oBAEM,SAAqD,EAArD,qDAAqD;;;;;;8BAEjE,uQAAA,IAAqD;oBAArC,SAA2B,EAA3B,2BAA2B;8BAAC,EAAE,EAA9C,IAAqD;;;;;;8BACrD,uQAAA,KAUE;oBATK,IAAM,EAAN,MAAM;oBACJ,KAAwB,CAAxB,CAAAyB,UAAU,CAAC5B,SAAS,CAAAG,EAAG,EAAC;oBACrB,QAIN,CAJM,CAAA;wBAAA,uCAAAqC,GAAA,GACRlC,iBAAiB,CAAC;gCAAAL,IAAA,EACVD,SAAS,CAAAC,IAAK;gCAAAE,EAAA,EAChB,IAAID,IAAI,CAACoC,GAAC,CAAAC,MAAO,CAAA3B,KAAM;4BAC7B,CAAC;oBAAC,CAAA,CAAA,qCAAD,CAAC;oBAEM,SAAqD,EAArD,qDAAqD,GAEnE,EAxBA,GAwBM,CACP;;;;;;;;;;;;QAAAO,CAAA,CAAA,GAAA,GAAAnB,SAAA;QAAAmB,CAAA,CAAA,GAAA,GAAAb,iBAAA;QAAAa,CAAA,CAAA,GAAA,GAAAI,eAAA;QAAAJ,CAAA,CAAA,GAAA,GAAAkB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAlB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAsB,EAAA;IAAA,IAAAtB,CAAA,CAAA,GAAA,KAAAiB,EAAA,IAAAjB,CAAA,CAAA,GAAA,KAAAkB,EAAA,EAAA;QA/CHI,EAAA,iBAAA,uQAAA,GAgDM;YAhDS,SAAsB,EAAtB,sBAAsB,CACnC;;gBAAAX,EAEO,CACP;gBAAAM,EAgBK,CACJ;gBAAAC,EA0BD,CACF,EAhDA,GAgDM;;;;;;;QAAAlB,CAAA,CAAA,GAAA,GAAAiB,EAAA;QAAAjB,CAAA,CAAA,GAAA,GAAAkB,EAAA;QAAAlB,CAAA,CAAA,GAAA,GAAAsB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAtB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAuB,EAAA;IAAA,IAAAvB,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAIJoB,EAAA,iBAAA,uQAAA,KAEQ;YAFS,SAA8C,EAA9C,8CAA8C;sBAAC,QAEhE,EAFA,KAEQ;;;;;;QAAAvB,CAAA,CAAA,GAAA,GAAAuB,EAAA;IAAA,OAAA;QAAAA,EAAA,GAAAvB,CAAA,CAAA,GAAA;IAAA;IAEC,MAAAwB,EAAA,GAAAvC,QAAc,IAAd,EAAc;IAAA,IAAAwC,GAAA;IAAA,IAAAzB,CAAA,CAAA,GAAA,KAAAX,gBAAA,EAAA;QACXoC,GAAA,GAAA,CAAA;YAAA,wCAAAC,GAAA,GAAOrC,gBAAgB,CAAC8B,GAAC,CAAAC,MAAO,CAAA3B,KAAc,IAAtB,IAAsB;SAAC,CAAA,CAAA,sCAAA;QAAAO,CAAA,CAAA,GAAA,GAAAX,gBAAA;QAAAW,CAAA,CAAA,GAAA,GAAAyB,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAzB,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA2B,GAAA;IAAA,IAAA3B,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGxDwB,GAAA,GAAAnC,SAAS,CAAAqB,GAAI,CAACe,6BAId,CAAC;QAAA5B,CAAA,CAAA,GAAA,GAAA2B,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAA3B,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA6B,GAAA;IAAA,IAAA7B,CAAA,CAAA,GAAA,KAAAyB,GAAA,IAAAzB,CAAA,CAAA,GAAA,KAAAwB,EAAA,EAAA;QAbNK,GAAA,iBAAA,uQAAA,GAeM;YAfS,SAAM,EAAN,MAAM,CACnB;;gBAAAN,EAEO;8BACP,uQAAA,MAUS;oBATA,KAAc,CAAd,CAAAC,EAAa,CAAC;oBACX,QAA+C,CAA/C,CAAAC,GAA8C,CAAC;oBAC/C,SAA6F,EAA7F,6FAA6F,CAEtG;8BAAAE,GAIA,CACH,EAVA,MAUS,CACX,EAfA,GAeM;;;;;;;;;;;;QAAA3B,CAAA,CAAA,GAAA,GAAAyB,GAAA;QAAAzB,CAAA,CAAA,GAAA,GAAAwB,EAAA;QAAAxB,CAAA,CAAA,GAAA,GAAA6B,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAA7B,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA8B,GAAA;IAAA,IAAA9B,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAIJ2B,GAAA,iBAAA,uQAAA,KAEQ;YAFS,SAA8C,EAA9C,8CAA8C;sBAAC,iBAEhE,EAFA,KAEQ;;;;;;QAAA9B,CAAA,CAAA,GAAA,GAAA8B,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAA9B,CAAA,CAAA,GAAA;IAAA;IAAA,IAAA+B,GAAA;IAAA,IAAA/B,CAAA,CAAA,GAAA,KAAAV,wBAAA,EAAA;QAGIyC,GAAA,GAAA,CAAA;YAAA,wCAAAC,GAAA,GAAO1C,wBAAwB,CAAC6B,GAAC,CAAAC,MAAO,CAAA3B,KAAM;SAAC,CAAA,CAAA,sCAAA;QAAAO,CAAA,CAAA,GAAA,GAAAV,wBAAA;QAAAU,CAAA,CAAA,GAAA,GAAA+B,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAA/B,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAiC,GAAA;IAAA,IAAAjC,CAAA,CAAA,GAAA,KAAAE,MAAA,CAAAC,GAAA,CAAA,8BAAA;QAGxD8B,GAAA,GAAAtC,kBAAkB,CAAAkB,GAAI,CAACqB,sCAIvB,CAAC;QAAAlC,CAAA,CAAA,GAAA,GAAAiC,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAjC,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAmC,GAAA;IAAA,IAAAnC,CAAA,CAAA,GAAA,KAAAd,gBAAA,IAAAc,CAAA,CAAA,GAAA,KAAA+B,GAAA,EAAA;QAbNI,GAAA,iBAAA,uQAAA,GAeM;YAfS,SAAM,EAAN,MAAM,CACnB;;gBAAAL,GAEO;8BACP,uQAAA,MAUS;oBATA5C,KAAgB,CAAhBA,CAAAA,gBAAe,CAAC;oBACb,QAA+C,CAA/C,CAAA6C,GAA8C,CAAC;oBAC/C,SAA6F,EAA7F,6FAA6F,CAEtG;8BAAAE,GAIA,CACH,EAVA,MAUS,CACX,EAfA,GAeM;;;;;;;;;;;;QAAAjC,CAAA,CAAA,GAAA,GAAAd,gBAAA;QAAAc,CAAA,CAAA,GAAA,GAAA+B,GAAA;QAAA/B,CAAA,CAAA,GAAA,GAAAmC,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAAnC,CAAA,CAAA,GAAA;IAAA;IAAA,IAAAoC,GAAA;IAAA,IAAApC,CAAA,CAAA,GAAA,KAAA6B,GAAA,IAAA7B,CAAA,CAAA,GAAA,KAAAmC,GAAA,IAAAnC,CAAA,CAAA,GAAA,KAAAsB,EAAA,EAAA;QAvFVc,GAAA,iBAAA,uQAAA,GAyFM;YAzFS,SAAgC,EAAhC,gCAAgC;oCAC7C,uQAAA,GAuFM;gBAvFS,SAAmC,EAAnC,mCAAmC,CAEhD;;oBAAAd,EAgDK,CAGL;oBAAAO,GAeK,CAGL;oBAAAM,GAeK,CACP,EAvFA,GAuFM,CACR,EAzFA,GAyFM;;;;;;;;;;;;QAAAnC,CAAA,CAAA,GAAA,GAAA6B,GAAA;QAAA7B,CAAA,CAAA,GAAA,GAAAmC,GAAA;QAAAnC,CAAA,CAAA,GAAA,GAAAsB,EAAA;QAAAtB,CAAA,CAAA,GAAA,GAAAoC,GAAA;IAAA,OAAA;QAAAA,GAAA,GAAApC,CAAA,CAAA,GAAA;IAAA;IAAA,OAzFNoC,GAyFM;AAAA;;KA/GHtC;AAAA,SAAAoC,uCAAAG,CAAA;IAAA,qBAwGO,uQAAA,MAES,CAFI,GAAO,CAAP;QAAgB,KAAO,CAAP,CAAAA,CAAC,CAAA5C,KAAK,CAAC,CACjC;kBAAA4C,CAAC,CAAA3C,KAAK,CACT,EAFA,MAES;OAFI2C,CAAC,CAAA5C,KAAK,CAAC;;;;;AAEX;AA1GhB,SAAAmC,8BAAAU,CAAA;IAAA,qBAsFO,uQAAA,MAES,CAFI,GAAgB,CAAhB;QAAyB,KAAa,CAAb,CAAAA,CAAC,CAAA7C,KAAY,IAAb,EAAY,CAAC,CAChD;kBAAA6C,CAAC,CAAA5C,KAAK,CACT,EAFA,MAES;OAFI4C,CAAC,CAAA7C,KAAe,IAAhB,KAAe,CAAC;;;;;AAEpB;AAxFhB,SAAAiB,4BAAA6B,IAAA;IAAA,OAkBIA,IAAI,CAAAC,WAAY,CAAC,CAAC,CAAAC,KAAM,CAAC,GAAG,CAAC,CAAA,EAAG;AAAA","ignoreList":[]}},
    {"offset": {"line": 1858, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/comparison-mode.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { format, subDays, startOfDay, endOfDay } from \"date-fns\";\r\n\r\n/**\r\n * Comparison Mode Component\r\n * \r\n * Side-by-side comparison of two date ranges\r\n * Features:\r\n * - Compare current vs previous period\r\n * - Compare custom date ranges\r\n * - Visual diff indicators\r\n * - Percentage change calculations\r\n */\r\n\r\ninterface ComparisonModeProps {\r\n  attributionModel: string;\r\n  platform: string | null;\r\n}\r\n\r\ninterface PeriodData {\r\n  spend: number;\r\n  conversions: number;\r\n  revenue: number;\r\n  roas: number;\r\n  cpa: number;\r\n  impressions: number;\r\n  clicks: number;\r\n  ctr: number;\r\n}\r\n\r\ninterface ComparisonData {\r\n  periodA: PeriodData;\r\n  periodB: PeriodData;\r\n  changes: Record<keyof PeriodData, { value: number; percentage: number }>;\r\n}\r\n\r\nexport function ComparisonMode({ attributionModel, platform }: ComparisonModeProps) {\r\n  const [periodA, setPeriodA] = useState({\r\n    from: startOfDay(subDays(new Date(), 30)),\r\n    to: endOfDay(subDays(new Date(), 1)),\r\n    label: \"Last 30 Days\",\r\n  });\r\n  \r\n  const [periodB, setPeriodB] = useState({\r\n    from: startOfDay(subDays(new Date(), 60)),\r\n    to: endOfDay(subDays(new Date(), 31)),\r\n    label: \"Previous 30 Days\",\r\n  });\r\n\r\n  const [data, setData] = useState<ComparisonData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchComparisonData();\r\n  }, [periodA, periodB, attributionModel, platform]);\r\n\r\n  const fetchComparisonData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [responseA, responseB] = await Promise.all([\r\n        fetch(`/api/dashboard/kpis?${new URLSearchParams({\r\n          fromDate: periodA.from.toISOString(),\r\n          toDate: periodA.to.toISOString(),\r\n          attributionModel,\r\n          ...(platform ? { platform } : {}),\r\n        })}`),\r\n        fetch(`/api/dashboard/kpis?${new URLSearchParams({\r\n          fromDate: periodB.from.toISOString(),\r\n          toDate: periodB.to.toISOString(),\r\n          attributionModel,\r\n          ...(platform ? { platform } : {}),\r\n        })}`),\r\n      ]);\r\n\r\n      if (responseA.ok && responseB.ok) {\r\n        const dataA = await responseA.json();\r\n        const dataB = await responseB.json();\r\n\r\n        const periodAData: PeriodData = {\r\n          spend: dataA.totalSpend / 1_000_000,\r\n          conversions: dataA.totalConversions,\r\n          revenue: (dataA.totalSpend * dataA.avgRoas) / 1_000_000,\r\n          roas: dataA.avgRoas,\r\n          cpa: dataA.avgCpa,\r\n          impressions: dataA.totalImpressions || 0,\r\n          clicks: dataA.totalClicks || 0,\r\n          ctr: dataA.avgCtr || 0,\r\n        };\r\n\r\n        const periodBData: PeriodData = {\r\n          spend: dataB.totalSpend / 1_000_000,\r\n          conversions: dataB.totalConversions,\r\n          revenue: (dataB.totalSpend * dataB.avgRoas) / 1_000_000,\r\n          roas: dataB.avgRoas,\r\n          cpa: dataB.avgCpa,\r\n          impressions: dataB.totalImpressions || 0,\r\n          clicks: dataB.totalClicks || 0,\r\n          ctr: dataB.avgCtr || 0,\r\n        };\r\n\r\n        const changes = Object.keys(periodAData).reduce((acc, key) => {\r\n          const k = key as keyof PeriodData;\r\n          const valueA = periodAData[k];\r\n          const valueB = periodBData[k];\r\n          const diff = valueA - valueB;\r\n          const percentage = valueB !== 0 ? (diff / valueB) * 100 : 0;\r\n          \r\n          acc[k] = { value: diff, percentage };\r\n          return acc;\r\n        }, {} as Record<keyof PeriodData, { value: number; percentage: number }>);\r\n\r\n        setData({\r\n          periodA: periodAData,\r\n          periodB: periodBData,\r\n          changes,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch comparison data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const quickPresets = [\r\n    {\r\n      label: \"Last 7 vs Previous 7\",\r\n      periodA: { from: startOfDay(subDays(new Date(), 7)), to: endOfDay(new Date()), label: \"Last 7 Days\" },\r\n      periodB: { from: startOfDay(subDays(new Date(), 14)), to: endOfDay(subDays(new Date(), 8)), label: \"Previous 7 Days\" },\r\n    },\r\n    {\r\n      label: \"Last 30 vs Previous 30\",\r\n      periodA: { from: startOfDay(subDays(new Date(), 30)), to: endOfDay(new Date()), label: \"Last 30 Days\" },\r\n      periodB: { from: startOfDay(subDays(new Date(), 60)), to: endOfDay(subDays(new Date(), 31)), label: \"Previous 30 Days\" },\r\n    },\r\n    {\r\n      label: \"This Month vs Last Month\",\r\n      periodA: { from: startOfDay(new Date(new Date().getFullYear(), new Date().getMonth(), 1)), to: endOfDay(new Date()), label: \"This Month\" },\r\n      periodB: { from: startOfDay(new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1)), to: endOfDay(new Date(new Date().getFullYear(), new Date().getMonth(), 0)), label: \"Last Month\" },\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-48 mb-6\"></div>\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data) return null;\r\n\r\n  const metrics: Array<{ key: keyof PeriodData; label: string; format: (v: number) => string; invertChange?: boolean }> = [\r\n    { key: \"spend\", label: \"Spend\", format: (v) => `$${v.toFixed(2)}`, invertChange: true },\r\n    { key: \"conversions\", label: \"Conversions\", format: (v) => v.toFixed(1) },\r\n    { key: \"revenue\", label: \"Revenue\", format: (v) => `$${v.toFixed(2)}` },\r\n    { key: \"roas\", label: \"ROAS\", format: (v) => `${v.toFixed(2)}x` },\r\n    { key: \"cpa\", label: \"CPA\", format: (v) => `$${v.toFixed(2)}`, invertChange: true },\r\n    { key: \"impressions\", label: \"Impressions\", format: (v) => v.toLocaleString() },\r\n    { key: \"clicks\", label: \"Clicks\", format: (v) => v.toLocaleString() },\r\n    { key: \"ctr\", label: \"CTR\", format: (v) => `${v.toFixed(2)}%` },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Period Comparison</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Compare performance across different time periods</p>\r\n        </div>\r\n        \r\n        {/* Quick Presets */}\r\n        <div className=\"flex gap-2\">\r\n          {quickPresets.map((preset, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => {\r\n                setPeriodA(preset.periodA);\r\n                setPeriodB(preset.periodB);\r\n              }}\r\n              className=\"px-3 py-1.5 text-sm rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors\"\r\n            >\r\n              {preset.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Period Labels */}\r\n      <div className=\"grid grid-cols-2 gap-6 mb-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center px-4 py-2 rounded-lg bg-blue-100 text-blue-900 font-semibold\">\r\n            <span className=\"mr-2\">üìÖ</span>\r\n            {periodA.label}\r\n          </div>\r\n          <p className=\"text-xs text-gray-600 mt-2\">\r\n            {format(periodA.from, \"MMM dd, yyyy\")} - {format(periodA.to, \"MMM dd, yyyy\")}\r\n          </p>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center px-4 py-2 rounded-lg bg-purple-100 text-purple-900 font-semibold\">\r\n            <span className=\"mr-2\">üìÖ</span>\r\n            {periodB.label}\r\n          </div>\r\n          <p className=\"text-xs text-gray-600 mt-2\">\r\n            {format(periodB.from, \"MMM dd, yyyy\")} - {format(periodB.to, \"MMM dd, yyyy\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Comparison Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead>\r\n            <tr className=\"border-b-2 border-gray-200\">\r\n              <th className=\"text-left py-3 px-4 font-semibold text-gray-900\">Metric</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-blue-900\">{periodA.label}</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-purple-900\">{periodB.label}</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Change</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {metrics.map((metric) => {\r\n              const change = data.changes[metric.key];\r\n              const isPositive = change.percentage > 0;\r\n              const isGood = metric.invertChange ? !isPositive : isPositive;\r\n              \r\n              return (\r\n                <tr key={metric.key} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                  <td className=\"py-3 px-4 font-medium text-gray-900\">{metric.label}</td>\r\n                  <td className=\"py-3 px-4 text-right text-blue-900 font-semibold\">\r\n                    {metric.format(data.periodA[metric.key])}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right text-purple-900 font-semibold\">\r\n                    {metric.format(data.periodB[metric.key])}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right\">\r\n                    <div className={`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-sm font-semibold ${\r\n                      Math.abs(change.percentage) < 0.1 \r\n                        ? \"bg-gray-100 text-gray-700\"\r\n                        : isGood \r\n                          ? \"bg-green-100 text-green-700\" \r\n                          : \"bg-red-100 text-red-700\"\r\n                    }`}>\r\n                      {Math.abs(change.percentage) < 0.1 ? (\r\n                        <span>‚Üí</span>\r\n                      ) : isPositive ? (\r\n                        <span>‚Üë</span>\r\n                      ) : (\r\n                        <span>‚Üì</span>\r\n                      )}\r\n                      <span>{Math.abs(change.percentage).toFixed(1)}%</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Summary Insights */}\r\n      <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\r\n        <h4 className=\"font-semibold text-gray-900 mb-2\">üìä Key Insights</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm\">\r\n          {data.changes.roas.percentage > 5 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>ROAS improved by {data.changes.roas.percentage.toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.cpa.percentage < -5 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>CPA decreased by {Math.abs(data.changes.cpa.percentage).toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.conversions.percentage > 10 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>Conversions up {data.changes.conversions.percentage.toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.spend.percentage > 20 && (\r\n            <div className=\"flex items-center gap-2 text-orange-700\">\r\n              <span>‚ö†</span>\r\n              <span>Spend increased significantly ({data.changes.spend.percentage.toFixed(1)}%)</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","format","subDays","startOfDay","endOfDay","ComparisonModeProps","attributionModel","platform","PeriodData","spend","conversions","revenue","roas","cpa","impressions","clicks","ctr","ComparisonData","periodA","periodB","changes","Record","value","percentage","ComparisonMode","setPeriodA","from","Date","to","label","setPeriodB","data","setData","loading","setLoading","fetchComparisonData","responseA","responseB","Promise","all","fetch","URLSearchParams","fromDate","toISOString","toDate","ok","dataA","json","dataB","periodAData","totalSpend","totalConversions","avgRoas","avgCpa","totalImpressions","totalClicks","avgCtr","periodBData","Object","keys","reduce","acc","key","k","valueA","valueB","diff","error","console","quickPresets","getFullYear","getMonth","metrics","Array","v","invertChange","toFixed","toLocaleString","map","preset","idx","metric","change","isPositive","isGood","Math","abs"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 2545, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/drill-down-modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from \"recharts\";\r\n\r\n/**\r\n * Drill-Down Modal Component\r\n * \r\n * Detailed breakdown when clicking on chart data points or metrics\r\n * Features:\r\n * - Campaign-level breakdown\r\n * - Ad set and ad-level details\r\n * - Geographic distribution\r\n * - Device breakdown\r\n * - Time-of-day analysis\r\n */\r\n\r\ninterface DrillDownModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  data: {\r\n    type: \"campaign\" | \"platform\" | \"date\" | \"metric\";\r\n    id?: string;\r\n    name: string;\r\n    date?: string;\r\n    metric?: string;\r\n    value?: number;\r\n  };\r\n  dateRange: { from: Date; to: Date };\r\n  attributionModel: string;\r\n}\r\n\r\ninterface DrillDownData {\r\n  summary: {\r\n    spend: number;\r\n    conversions: number;\r\n    revenue: number;\r\n    roas: number;\r\n    cpa: number;\r\n    clicks: number;\r\n    impressions: number;\r\n  };\r\n  breakdown: {\r\n    byCampaign?: Array<{ name: string; spend: number; conversions: number; roas: number }>;\r\n    byAdSet?: Array<{ name: string; spend: number; conversions: number; roas: number }>;\r\n    byAd?: Array<{ name: string; spend: number; conversions: number; ctr: number }>;\r\n    byDevice?: Array<{ device: string; spend: number; conversions: number }>;\r\n    byHour?: Array<{ hour: number; conversions: number; spend: number }>;\r\n  };\r\n}\r\n\r\nconst COLORS = [\"#3b82f6\", \"#22c55e\", \"#f59e0b\", \"#ec4899\", \"#8b5cf6\", \"#ef4444\"];\r\n\r\nexport function DrillDownModal({ isOpen, onClose, data, dateRange, attributionModel }: DrillDownModalProps) {\r\n  const [drillDownData, setDrillDownData] = useState<DrillDownData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<\"campaigns\" | \"adsets\" | \"ads\" | \"devices\" | \"time\">(\"campaigns\");\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchDrillDownData();\r\n    }\r\n  }, [isOpen, data, dateRange, attributionModel]);\r\n\r\n  const fetchDrillDownData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        type: data.type,\r\n        ...(data.id ? { id: data.id } : {}),\r\n        ...(data.date ? { date: data.date } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/drill-down?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setDrillDownData(result);\r\n      } else {\r\n        // Mock data for demonstration\r\n        setDrillDownData({\r\n          summary: {\r\n            spend: 12500,\r\n            conversions: 85,\r\n            revenue: 42000,\r\n            roas: 3.36,\r\n            cpa: 147.06,\r\n            clicks: 1250,\r\n            impressions: 45000,\r\n          },\r\n          breakdown: {\r\n            byCampaign: [\r\n              { name: \"Summer Sale 2024\", spend: 5000, conversions: 40, roas: 4.2 },\r\n              { name: \"Brand Awareness Q4\", spend: 4000, conversions: 25, roas: 3.1 },\r\n              { name: \"Retargeting Campaign\", spend: 3500, conversions: 20, roas: 2.8 },\r\n            ],\r\n            byAdSet: [\r\n              { name: \"Lookalike Audience 1%\", spend: 3000, conversions: 25, roas: 3.8 },\r\n              { name: \"Interest: Fitness\", spend: 2500, conversions: 20, roas: 3.5 },\r\n              { name: \"Custom Audience - Website\", spend: 2000, conversions: 15, roas: 3.2 },\r\n            ],\r\n            byAd: [\r\n              { name: \"Video Ad - Product Demo\", spend: 2000, conversions: 18, ctr: 2.5 },\r\n              { name: \"Carousel - Top Products\", spend: 1800, conversions: 15, ctr: 2.2 },\r\n              { name: \"Single Image - Discount\", spend: 1500, conversions: 12, ctr: 1.9 },\r\n            ],\r\n            byDevice: [\r\n              { device: \"Mobile\", spend: 7000, conversions: 50 },\r\n              { device: \"Desktop\", spend: 4000, conversions: 28 },\r\n              { device: \"Tablet\", spend: 1500, conversions: 7 },\r\n            ],\r\n            byHour: Array.from({ length: 24 }, (_, i) => ({\r\n              hour: i,\r\n              conversions: Math.floor(Math.random() * 10) + 1,\r\n              spend: Math.floor(Math.random() * 1000) + 200,\r\n            })),\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch drill-down data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{data.name}</h2>\r\n              <p className=\"text-blue-100 mt-1\">\r\n                Detailed breakdown ‚Ä¢ {format(dateRange.from, \"MMM dd\")} - {format(dateRange.to, \"MMM dd, yyyy\")}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n          ) : drillDownData ? (\r\n            <>\r\n              {/* Summary Cards */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                {[\r\n                  { label: \"Spend\", value: `$${drillDownData.summary.spend.toLocaleString()}`, color: \"blue\" },\r\n                  { label: \"Conversions\", value: drillDownData.summary.conversions.toLocaleString(), color: \"green\" },\r\n                  { label: \"ROAS\", value: `${drillDownData.summary.roas.toFixed(2)}x`, color: \"purple\" },\r\n                  { label: \"CPA\", value: `$${drillDownData.summary.cpa.toFixed(2)}`, color: \"orange\" },\r\n                ].map((card, idx) => (\r\n                  <div key={idx} className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200\">\r\n                    <p className=\"text-sm text-gray-600 mb-1\">{card.label}</p>\r\n                    <p className={`text-2xl font-bold text-${card.color}-600`}>{card.value}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Tabs */}\r\n              <div className=\"flex gap-2 mb-6 border-b border-gray-200\">\r\n                {[\r\n                  { key: \"campaigns\", label: \"Campaigns\", icon: \"üìä\" },\r\n                  { key: \"adsets\", label: \"Ad Sets\", icon: \"üéØ\" },\r\n                  { key: \"ads\", label: \"Ads\", icon: \"üì±\" },\r\n                  { key: \"devices\", label: \"Devices\", icon: \"üíª\" },\r\n                  { key: \"time\", label: \"Time Analysis\", icon: \"‚è∞\" },\r\n                ].map((tab) => (\r\n                  <button\r\n                    key={tab.key}\r\n                    onClick={() => setActiveTab(tab.key as any)}\r\n                    className={`px-4 py-2 text-sm font-medium transition-colors ${\r\n                      activeTab === tab.key\r\n                        ? \"text-blue-600 border-b-2 border-blue-600\"\r\n                        : \"text-gray-600 hover:text-gray-900\"\r\n                    }`}\r\n                  >\r\n                    <span className=\"mr-2\">{tab.icon}</span>\r\n                    {tab.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Tab Content */}\r\n              <div className=\"space-y-6\">\r\n                {activeTab === \"campaigns\" && drillDownData.breakdown.byCampaign && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Campaign Performance</h3>\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"w-full\">\r\n                        <thead className=\"bg-gray-50\">\r\n                          <tr>\r\n                            <th className=\"text-left py-3 px-4 font-semibold text-gray-900\">Campaign</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Spend</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Conversions</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">ROAS</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {drillDownData.breakdown.byCampaign.map((campaign, idx) => (\r\n                            <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                              <td className=\"py-3 px-4 font-medium text-gray-900\">{campaign.name}</td>\r\n                              <td className=\"py-3 px-4 text-right text-gray-900\">${campaign.spend.toLocaleString()}</td>\r\n                              <td className=\"py-3 px-4 text-right text-gray-900\">{campaign.conversions}</td>\r\n                              <td className=\"py-3 px-4 text-right\">\r\n                                <span className={`font-semibold ${campaign.roas >= 3 ? \"text-green-600\" : \"text-orange-600\"}`}>\r\n                                  {campaign.roas.toFixed(2)}x\r\n                                </span>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"devices\" && drillDownData.breakdown.byDevice && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Device Breakdown</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div className=\"h-64\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                          <PieChart>\r\n                            <Pie\r\n                              data={drillDownData.breakdown.byDevice}\r\n                              dataKey=\"spend\"\r\n                              nameKey=\"device\"\r\n                              cx=\"50%\"\r\n                              cy=\"50%\"\r\n                              outerRadius={80}\r\n                              label={(entry: any) => `${entry.device}: $${entry.spend.toLocaleString()}`}\r\n                            >\r\n                              {drillDownData.breakdown.byDevice.map((entry, index) => (\r\n                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                              ))}\r\n                            </Pie>\r\n                            <Tooltip />\r\n                          </PieChart>\r\n                        </ResponsiveContainer>\r\n                      </div>\r\n                      <div className=\"space-y-3\">\r\n                        {drillDownData.breakdown.byDevice.map((device, idx) => (\r\n                          <div key={idx} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"w-4 h-4 rounded-full\" style={{ backgroundColor: COLORS[idx % COLORS.length] }}></div>\r\n                              <span className=\"font-medium text-gray-900\">{device.device}</span>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                              <p className=\"font-semibold text-gray-900\">{device.conversions} conversions</p>\r\n                              <p className=\"text-sm text-gray-600\">${device.spend.toLocaleString()} spend</p>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"time\" && drillDownData.breakdown.byHour && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance by Hour of Day</h3>\r\n                    <div className=\"h-80\">\r\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <BarChart data={drillDownData.breakdown.byHour}>\r\n                          <CartesianGrid strokeDasharray=\"3 3\" />\r\n                          <XAxis \r\n                            dataKey=\"hour\" \r\n                            tickFormatter={(hour) => `${hour}:00`}\r\n                          />\r\n                          <YAxis yAxisId=\"left\" />\r\n                          <YAxis yAxisId=\"right\" orientation=\"right\" />\r\n                          <Tooltip \r\n                            labelFormatter={(hour) => `${hour}:00 - ${hour}:59`}\r\n                            formatter={(value: any, name?: string) => [\r\n                              name === \"conversions\" ? value : `$${value}`,\r\n                              name === \"conversions\" ? \"Conversions\" : \"Spend\"\r\n                            ]}\r\n                          />\r\n                          <Bar yAxisId=\"left\" dataKey=\"conversions\" fill=\"#22c55e\" name=\"Conversions\" />\r\n                          <Bar yAxisId=\"right\" dataKey=\"spend\" fill=\"#3b82f6\" name=\"Spend\" />\r\n                        </BarChart>\r\n                      </ResponsiveContainer>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600 mt-4 text-center\">\r\n                      üí° Peak conversion hours: {drillDownData.breakdown.byHour\r\n                        .sort((a, b) => b.conversions - a.conversions)\r\n                        .slice(0, 3)\r\n                        .map(h => `${h.hour}:00`)\r\n                        .join(\", \")}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              No detailed data available\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-gray-50 px-6 py-4 border-t border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useState","useEffect","format","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","PieChart","Pie","Cell","DrillDownModalProps","isOpen","onClose","data","type","id","name","date","metric","value","dateRange","from","Date","to","attributionModel","DrillDownData","summary","spend","conversions","revenue","roas","cpa","clicks","impressions","breakdown","byCampaign","Array","byAdSet","byAd","ctr","byDevice","device","byHour","hour","COLORS","DrillDownModal","drillDownData","setDrillDownData","loading","setLoading","activeTab","setActiveTab","fetchDrillDownData","params","URLSearchParams","fromDate","toISOString","toDate","response","fetch","ok","result","json","length","_","i","Math","floor","random","error","console","label","toLocaleString","color","toFixed","map","card","idx","key","icon","tab","campaign","entry","index","backgroundColor","sort","a","b","slice","h","join"],"mappings":";;;;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,UAAU;;;;;;;;;AACjC,SACEC,QAAQ,EACRC,GAAG,EACHC,KAAK,EACLC,KAAK,EACLC,aAAa,EACbC,OAAO,EACPC,mBAAmB,EACnBC,QAAQ,EACRC,GAAG,EACHC,IAAI,QACC,UAAU;;;;AAfjB,YAAY;;;;AA+DZ,MAAMmC,MAAM,GAAG;IAAC,SAAS;IAAE,SAAS;IAAE,SAAS;IAAE,SAAS;IAAE,SAAS;IAAE,SAAS;CAAC;AAE1E,wBAAwB,EAAEjC,MAAM,EAAEC,OAAO,EAAEC,IAAI,EAAEO,SAAS,EAAEI,gBAAAA,EAAuC,EAAE;;IAC1G,MAAM,CAACsB,aAAa,EAAEC,gBAAgB,CAAC,OAAGlD,mPAAQ,CAAC4B,CAAsB,IAAI,CAAC,OAAd,GAAG,IAAI,CAAC;IACxE,MAAM,CAACuB,OAAO,EAAEC,UAAU,CAAC,OAAGpD,mPAAQ,EAAC,IAAI,CAAC;IAC5C,MAAM,CAACqD,SAAS,EAAEC,YAAY,CAAC,OAAGtD,mPAAQ,CAAC,CAAqD,UAA1C,CAAqD,CAAC,CAAnD,QAAQ,GAAG,KAAK,GAAG,SAAS,GAAG,MAAM,CAAC;QAE/FC,oPAAS;oCAAC,MAAM;YACd,IAAIa,MAAM,EAAE;gBACVyC,kBAAkB,CAAC,CAAC;YACtB;QACF,CAAC;mCAAE;QAACzC,MAAM;QAAEE,IAAI;QAAEO,SAAS;QAAEI,gBAAgB;KAAC,CAAC;IAE/C,MAAM4B,kBAAkB,GAAG,MAAAA,CAAA,KAAY;QACrCH,UAAU,CAAC,IAAI,CAAC;QAChB,IAAI;YACF,MAAMI,MAAM,GAAG,IAAIC,eAAe,CAAC;gBACjCC,QAAQ,EAAEnC,SAAS,CAACC,IAAI,CAACmC,WAAW,CAAC,CAAC;gBACtCC,MAAM,EAAErC,SAAS,CAACG,EAAE,CAACiC,WAAW,CAAC,CAAC;gBAClChC,gBAAgB;gBAChBV,IAAI,EAAED,IAAI,CAACC,IAAI;gBACf,GAAID,IAAI,CAACE,EAAE,GAAG;oBAAEA,EAAE,EAAEF,IAAI,CAACE,EAAAA;gBAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBACnC,GAAIF,IAAI,CAACI,IAAI,GAAG;oBAAEA,IAAI,EAAEJ,IAAI,CAACI,IAAAA;gBAAK,CAAC,GAAG,CAAC,CAAC;YAC1C,CAAC,CAAC;YAEF,MAAMyC,QAAQ,GAAG,MAAMC,KAAK,CAAC,CAAA,0BAAA,EAA6BN,MAAM,EAAE,CAAC;YACnE,IAAIK,QAAQ,CAACE,EAAE,EAAE;gBACf,MAAMC,MAAM,GAAG,MAAMH,QAAQ,CAACI,IAAI,CAAC,CAAC;gBACpCf,gBAAgB,CAACc,MAAM,CAAC;YAC1B,CAAC,MAAM;gBACL,8BAAA;gBACAd,gBAAgB,CAAC;oBACfrB,OAAO,EAAE;wBACPC,KAAK,EAAE,KAAK;wBACZC,WAAW,EAAE,EAAE;wBACfC,OAAO,EAAE,KAAK;wBACdC,IAAI,EAAE,IAAI;wBACVC,GAAG,EAAE,MAAM;wBACXC,MAAM,EAAE,IAAI;wBACZC,WAAW,EAAE;oBACf,CAAC;oBACDC,SAAS,EAAE;wBACTC,UAAU,EAAE;4BACV;gCAAEnB,IAAI,EAAE,kBAAkB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;4BACrE;gCAAEd,IAAI,EAAE,oBAAoB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;4BACvE;gCAAEd,IAAI,EAAE,sBAAsB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;yBAC1E;wBACDO,OAAO,EAAE;4BACP;gCAAErB,IAAI,EAAE,uBAAuB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;4BAC1E;gCAAEd,IAAI,EAAE,mBAAmB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;4BACtE;gCAAEd,IAAI,EAAE,2BAA2B;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEE,IAAI,EAAE;4BAAI,CAAC;yBAC/E;wBACDQ,IAAI,EAAE;4BACJ;gCAAEtB,IAAI,EAAE,yBAAyB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEW,GAAG,EAAE;4BAAI,CAAC;4BAC3E;gCAAEvB,IAAI,EAAE,yBAAyB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEW,GAAG,EAAE;4BAAI,CAAC;4BAC3E;gCAAEvB,IAAI,EAAE,yBAAyB;gCAAEW,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE,EAAE;gCAAEW,GAAG,EAAE;4BAAI,CAAC;yBAC5E;wBACDC,QAAQ,EAAE;4BACR;gCAAEC,MAAM,EAAE,QAAQ;gCAAEd,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE;4BAAG,CAAC;4BAClD;gCAAEa,MAAM,EAAE,SAAS;gCAAEd,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE;4BAAG,CAAC;4BACnD;gCAAEa,MAAM,EAAE,QAAQ;gCAAEd,KAAK,EAAE,IAAI;gCAAEC,WAAW,EAAE;4BAAE,CAAC;yBAClD;wBACDc,MAAM,EAAEN,KAAK,CAACf,IAAI,CAAC;4BAAE0C,MAAM,EAAE;wBAAG,CAAC,EAAE,CAACC,CAAC,EAAEC,CAAC,GAAA,CAAM;gCAC5CtB,IAAI,EAAEsB,CAAC;gCACPrC,WAAW,EAAEsC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;gCAC/CzC,KAAK,EAAEuC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG;4BAC5C,CAAC,CAAC;oBACJ;gBACF,CAAC,CAAC;YACJ;QACF,CAAC,CAAC,OAAOC,KAAK,EAAE;YACdC,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;QAC1D,CAAC,QAAS;YACRpB,UAAU,CAAC,KAAK,CAAC;QACnB;IACF,CAAC;IAED,IAAI,CAACtC,MAAM,EAAE,OAAO,IAAI;IAExB,qBACE,uQAAC,GAAG;QAAC,SAAS,EAAC,gFAAgF,CAAC;gCAC9F,uQAAC,GAAG;YAAC,SAAS,EAAC,4FAA4F,CAAC;;8BAE1G,uQAAC,GAAG;oBAAC,SAAS,EAAC,6DAA6D,CAAC;4CAC3E,uQAAC,GAAG;wBAAC,SAAS,EAAC,mCAAmC,CAAC;;0CACjD,uQAAC,GAAG,CAAC;;kDACH,uQAAC,EAAE;wCAAC,SAAS,EAAC,oBAAoB,CAAC;kDAACE,IAAI,CAACG,IAAI,CAAC,EAAE,EAAE,CAAC;;;;;;kDACnD,uQAAC,CAAC;wCAAC,SAAS,EAAC,oBAAoB;;4CAAC;gDACVjB,4OAAM,EAACqB,SAAS,CAACC,IAAI,EAAE,QAAQ,CAAC;4CAAC,GAAG;gDAACtB,4OAAM,EAACqB,SAAS,CAACG,EAAE,EAAE,cAAc,CAAC,CAAC;;;;;;;;;;;;;0CAGpG,uQAAC,MAAM;gCACL,OAAO,CAAC,CAACX,OAAO,CAAC;gCACjB,SAAS,EAAC,gFAAgF,CAC3F;wDACC,uQAAC,GAAG;oCAAC,SAAS,EAAC,SAAS;oCAAC,IAAI,EAAC,MAAM;oCAAC,MAAM,EAAC,cAAc;oCAAC,OAAO,EAAC,WAAW,CAAC;8CAC7E,qRAAC,IAAI;wCAAC,aAAa,EAAC,OAAO;wCAAC,cAAc,EAAC,OAAO;wCAAC,WAAW,CAAC,CAAC,CAAC,CAAC;wCAAC,CAAC,EAAC,sBAAsB,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAOtG,uQAAC,GAAG;oBAAC,SAAS,EAAC,4BAA4B,CAAC;8BACzCoC,OAAO,iBACN,uQAAC,GAAG;wBAAC,SAAS,EAAC,uCAAuC,CAAC;gDACrD,uQAAC,GAAG;4BAAC,SAAS,EAAC,gEAAgE,CAAC,EAAE,GAAG,CAAC;;;;;;;;;;+BAEtFF,aAAa,iBACf,EAAE;;0CAEA,uQAAC,GAAG;gCAAC,SAAS,EAAC,4CAA4C,CAAC;0CACzD;oCACC;wCAAEyB,KAAK,EAAE,OAAO;wCAAEpD,KAAK,EAAE,CAAA,CAAA,EAAI2B,aAAa,CAACpB,OAAO,CAACC,KAAK,CAAC6C,cAAc,CAAC,CAAC,EAAE;wCAAEC,KAAK,EAAE;oCAAO,CAAC;oCAC5F;wCAAEF,KAAK,EAAE,aAAa;wCAAEpD,KAAK,EAAE2B,aAAa,CAACpB,OAAO,CAACE,WAAW,CAAC4C,cAAc,CAAC,CAAC;wCAAEC,KAAK,EAAE;oCAAQ,CAAC;oCACnG;wCAAEF,KAAK,EAAE,MAAM;wCAAEpD,KAAK,EAAE,GAAG2B,aAAa,CAACpB,OAAO,CAACI,IAAI,CAAC4C,OAAO,CAAC,CAAC,CAAC,CAAA,CAAA,CAAG;wCAAED,KAAK,EAAE;oCAAS,CAAC;oCACtF;wCAAEF,KAAK,EAAE,KAAK;wCAAEpD,KAAK,EAAE,CAAA,CAAA,EAAI2B,aAAa,CAACpB,OAAO,CAACK,GAAG,CAAC2C,OAAO,CAAC,CAAC,CAAC,EAAE;wCAAED,KAAK,EAAE;oCAAS,CAAC;iCACrF,CAACE,GAAG,CAAC,CAACC,IAAI,EAAEC,GAAG,iBACd,uQAAC,GAAG,CAAC,GAAG,CAAC;wCAAM,SAAS,EAAC,kFAAkF,CAAC;;0DAC1G,uQAAC,CAAC;gDAAC,SAAS,EAAC,4BAA4B,CAAC;0DAACD,IAAI,CAACL,KAAK,CAAC,EAAE,CAAC,CAAC;;;;;;0DAC1D,uQAAC,CAAC;gDAAC,SAAS,CAAC,CAAC,CAAA,wBAAA,EAA2BK,IAAI,CAACH,KAAK,CAAA,IAAA,CAAM,CAAC,CAAC;0DAACG,IAAI,CAACzD,KAAK,CAAC,EAAE,CAAC,CAAC;;;;;;;uCAFnE0D,GAAG,CAAC;;;;;;;;;;0CAQlB,uQAAC,GAAG;gCAAC,SAAS,EAAC,0CAA0C,CAAC;0CACvD;oCACC;wCAAEC,GAAG,EAAE,WAAW;wCAAEP,KAAK,EAAE,WAAW;wCAAEQ,IAAI,EAAE;oCAAK,CAAC;oCACpD;wCAAED,GAAG,EAAE,QAAQ;wCAAEP,KAAK,EAAE,SAAS;wCAAEQ,IAAI,EAAE;oCAAK,CAAC;oCAC/C;wCAAED,GAAG,EAAE,KAAK;wCAAEP,KAAK,EAAE,KAAK;wCAAEQ,IAAI,EAAE;oCAAK,CAAC;oCACxC;wCAAED,GAAG,EAAE,SAAS;wCAAEP,KAAK,EAAE,SAAS;wCAAEQ,IAAI,EAAE;oCAAK,CAAC;oCAChD;wCAAED,GAAG,EAAE,MAAM;wCAAEP,KAAK,EAAE,eAAe;wCAAEQ,IAAI,EAAE;oCAAI,CAAC;iCACnD,CAACJ,GAAG,EAAEK,GAAG,iBACR,uQAAC,MAAM,CACL,GAAG,CAAC;wCACJ,OAAO,CAAC,CAAC,IAAM7B,YAAY,CAAC6B,GAAG,CAACF,GAAG,IAAI,GAAG,CAAC,CAAC;wCAC5C,SAAS,CAAC,CAAC,CAAA,gDAAA,EACT5B,SAAS,KAAK8B,GAAG,CAACF,GAAG,GACjB,0CAA0C,GAC1C,mCAAmC,EACvC,CAAC,CACJ;;0DACC,uQAAC,IAAI;gDAAC,SAAS,EAAC,MAAM,CAAC;0DAACE,GAAG,CAACD,IAAI,CAAC,EAAE,IAAI,CAAC;;;;;;4CACvCC,GAAG,CAACT,KAAK,CAAC;;uCATNS,GAAG,CAACF,GAAG,CAAC;;;;;;;;;;0CAenB,uQAAC,GAAG;gCAAC,SAAS,EAAC,WAAW,CAAC;;oCACxB5B,SAAS,KAAK,WAAW,IAAIJ,aAAa,CAACZ,SAAS,CAACC,UAAU,kBAC9D,uQAAC,GAAG,CAAC;;0DACH,uQAAC,EAAE;gDAAC,SAAS,EAAC,0CAA0C;0DAAC,oBAAoB,EAAE,EAAE,CAAC;;;;;;0DAClF,uQAAC,GAAG;gDAAC,SAAS,EAAC,iBAAiB,CAAC;wEAC/B,uQAAC,KAAK;oDAAC,SAAS,EAAC,QAAQ,CAAC;;sEACxB,uQAAC,KAAK;4DAAC,SAAS,EAAC,YAAY,CAAC;oFAC5B,uQAAC,EAAE,CAAC;;kFACF,uQAAC,EAAE;wEAAC,SAAS,EAAC,iDAAiD;kFAAC,QAAQ,EAAE,EAAE,CAAC;;;;;;kFAC7E,uQAAC,EAAE;wEAAC,SAAS,EAAC,kDAAkD;kFAAC,KAAK,EAAE,EAAE,CAAC;;;;;;kFAC3E,uQAAC,EAAE;wEAAC,SAAS,EAAC,kDAAkD;kFAAC,WAAW,EAAE,EAAE,CAAC;;;;;;kFACjF,uQAAC,EAAE;wEAAC,SAAS,EAAC,kDAAkD;kFAAC,IAAI,EAAE,EAAE,CAAC;;;;;;;;;;;;;;;;;sEAG9E,uQAAC,KAAK,CAAC;sEACJW,aAAa,CAACZ,SAAS,CAACC,UAAU,CAACwC,GAAG,CAAC,CAACM,QAAQ,EAAEJ,KAAG,iBACpD,uQAAC,EAAE,CAAC,GAAG,CAAC;oEAAM,SAAS,EAAC,2CAA2C,CAAC;;sFAClE,uQAAC,EAAE;4EAAC,SAAS,EAAC,qCAAqC,CAAC;sFAACI,QAAQ,CAACjE,IAAI,CAAC,EAAE,EAAE,CAAC;;;;;;sFACxE,uQAAC,EAAE;4EAAC,SAAS,EAAC,oCAAoC;;gFAAC,CAAC;gFAACiE,QAAQ,CAACtD,KAAK,CAAC6C,cAAc,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;;;;;;;sFAC1F,uQAAC,EAAE;4EAAC,SAAS,EAAC,oCAAoC,CAAC;sFAACS,QAAQ,CAACrD,WAAW,CAAC,EAAE,EAAE,CAAC;;;;;;sFAC9E,uQAAC,EAAE;4EAAC,SAAS,EAAC,sBAAsB,CAAC;oGACnC,uQAAC,IAAI;gFAAC,SAAS,CAAC,CAAC,CAAA,cAAA,EAAiBqD,QAAQ,CAACnD,IAAI,IAAI,CAAC,GAAG,gBAAgB,GAAG,iBAAiB,EAAE,CAAC,CAAC;;oFAC5FmD,QAAQ,CAACnD,IAAI,CAAC4C,OAAO,CAAC,CAAC,CAAC;oFAAC;;;;;;;;;;;;;mEANvBG,KAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;oCAiBxB3B,SAAS,KAAK,SAAS,IAAIJ,aAAa,CAACZ,SAAS,CAACM,QAAQ,kBAC1D,uQAAC,GAAG,CAAC;;0DACH,uQAAC,EAAE;gDAAC,SAAS,EAAC,0CAA0C;0DAAC,gBAAgB,EAAE,EAAE,CAAC;;;;;;0DAC9E,uQAAC,GAAG;gDAAC,SAAS,EAAC,uCAAuC,CAAC;;kEACrD,uQAAC,GAAG;wDAAC,SAAS,EAAC,MAAM,CAAC;kEACpB,qRAAC,uQAAmB;4DAAC,KAAK,EAAC,MAAM;4DAAC,MAAM,EAAC,MAAM,CAAC;sEAC9C,qRAAC,6OAAQ,CAAC;;kFACR,uQAAC,mOAAG;wEACF,IAAI,CAAC,CAACM,aAAa,CAACZ,SAAS,CAACM,QAAQ,CAAC;wEACvC,OAAO,EAAC,OAAO;wEACf,OAAO,EAAC,QAAQ;wEAChB,EAAE,EAAC,KAAK;wEACR,EAAE,EAAC,KAAK;wEACR,WAAW,CAAC,CAAC,EAAE,CAAC;wEAChB,KAAK,CAAC,CAAC,CAAC0C,KAAK,EAAE,CAAQ,EAAL,CAAQA,KAAK,CAACzC,MAAM,CAAA,GAAA,EAAMyC,KAAK,CAACvD,KAAK,CAAC6C,cAAc,CAAC,CAAC,EAAE,CAAC,CAC5E;kFACE1B,aAAa,CAACZ,SAAS,CAACM,QAAQ,CAACmC,GAAG,CAAC,CAACO,OAAK,EAAEC,KAAK,iBACjD,uQAAC,yOAAI,CAAC,GAAG,CAAC;gFAAkB,IAAI,CAAC,CAACvC,MAAM,CAACuC,KAAK,GAAGvC,MAAM,CAACmB,MAAM,CAAC,CAAC,GACjE,CAAC,CAAC;+EADU,CAAA,KAAA,EAAQoB,KAAK,EAAE,CAAC;;;;;;;;;;kFAG/B,uQAAC,+OAAO,GAAG;;;;;;;;;;;;;;;;;;;;;kEAIjB,uQAAC,GAAG;wDAAC,SAAS,EAAC,WAAW,CAAC;kEACxBrC,aAAa,CAACZ,SAAS,CAACM,QAAQ,CAACmC,GAAG,CAAC,CAAClC,MAAM,EAAEoC,KAAG,iBAChD,uQAAC,GAAG,CAAC,GAAG,CAAC;gEAAM,SAAS,EAAC,6DAA6D,CAAC;;kFACrF,uQAAC,GAAG;wEAAC,SAAS,EAAC,yBAAyB,CAAC;;0FACvC,uQAAC,GAAG;gFAAC,SAAS,EAAC,sBAAsB;gFAAC,KAAK,CAAC,CAAC;oFAAEO,eAAe,EAAExC,MAAM,CAACiC,KAAG,GAAGjC,MAAM,CAACmB,MAAM,CAAA;gFAAE,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC;;;;;;0FACrG,uQAAC,IAAI;gFAAC,SAAS,EAAC,2BAA2B,CAAC;0FAACtB,MAAM,CAACA,MAAM,CAAC,EAAE,IAAI,CAAC;;;;;;;;;;;;kFAEpE,uQAAC,GAAG;wEAAC,SAAS,EAAC,YAAY,CAAC;;0FAC1B,uQAAC,CAAC;gFAAC,SAAS,EAAC,6BAA6B,CAAC;;oFAACA,MAAM,CAACb,WAAW;oFAAC,YAAY,EAAE,CAAC,CAAC;;;;;;;0FAC/E,uQAAC,CAAC;gFAAC,SAAS,EAAC,uBAAuB;;oFAAC,CAAC;oFAACa,MAAM,CAACd,KAAK,CAAC6C,cAAc,CAAC,CAAC;oFAAC,MAAM,EAAE,CAAC,CAAC;;;;;;;;;;;;;;+DAPzEK,KAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;oCAgBvB3B,SAAS,KAAK,MAAM,IAAIJ,aAAa,CAACZ,SAAS,CAACQ,MAAM,kBACrD,uQAAC,GAAG,CAAC;;0DACH,uQAAC,EAAE;gDAAC,SAAS,EAAC,0CAA0C;0DAAC,0BAA0B,EAAE,EAAE,CAAC;;;;;;0DACxF,uQAAC,GAAG;gDAAC,SAAS,EAAC,MAAM,CAAC;wEACpB,uQAAC,uQAAmB;oDAAC,KAAK,EAAC,MAAM;oDAAC,MAAM,EAAC,MAAM,CAAC;4EAC9C,uQAAC,6OAAQ;wDAAC,IAAI,CAAC,CAACI,aAAa,CAACZ,SAAS,CAACQ,MAAM,CAAC,CAAC;;0EAC9C,uQAAC,2PAAa;gEAAC,eAAe,EAAC,KAAK,GAAG;;;;;;0EACvC,uQAAC,2OAAK;gEACJ,OAAO,EAAC,MAAM;gEACd,aAAa,CAAC,EAAEC,IAAI,GAAK,GAAGA,IAAI,CAAA,GAAA,CAAK,CAAC,GACtC;;;;;;0EACF,uQAAC,2OAAK;gEAAC,OAAO,EAAC,MAAM,GAAG;;;;;;0EACxB,uQAAC,2OAAK;gEAAC,OAAO,EAAC,OAAO;gEAAC,WAAW,EAAC,OAAO,GAAG;;;;;;0EAC7C,uQAAC,+OAAO;gEACN,cAAc,CAAC,EAAEA,MAAI,GAAK,GAAGA,MAAI,CAAA,MAAA,EAASA,MAAI,CAAA,GAAA,CAAK,CAAC;gEACpD,SAAS,CAAC,CAAC,CAACxB,KAAK,EAAE,AAAKH,GAAF,CAAe,CAAR,EAAE,AAAW,MAAL;wEACnCA,IAAI,KAAK,aAAa,GAAGG,KAAK,GAAG,CAAA,CAAA,EAAIA,KAAK,EAAE;wEAC5CH,IAAI,KAAK,aAAa,GAAG,aAAa,GAAG,OAAO;qEACjD,CAAC,GACF;;;;;;0EACF,uQAAC,uOAAG;gEAAC,OAAO,EAAC,MAAM;gEAAC,OAAO,EAAC,aAAa;gEAAC,IAAI,EAAC,SAAS;gEAAC,IAAI,EAAC,aAAa,GAAG;;;;;;0EAC9E,uQAAC,uOAAG;gEAAC,OAAO,EAAC,OAAO;gEAAC,OAAO,EAAC,OAAO;gEAAC,IAAI,EAAC,SAAS;gEAAC,IAAI,EAAC,OAAO,GAAG;;;;;;;;;;;;;;;;;;;;;;0DAIzE,uQAAC,CAAC;gDAAC,SAAS,EAAC,wCAAwC;;oDAAC;oDACzB8B,aAAa,CAACZ,SAAS,CAACQ,MAAM,CACtD2C,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,GAAKA,CAAC,CAAC3D,WAAW,GAAG0D,CAAC,CAAC1D,WAAW,CAAC,CAC7C4D,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CACXb,GAAG,EAACc,CAAC,GAAI,GAAGA,CAAC,CAAC9C,IAAI,CAAA,GAAA,CAAK,CAAC,CACxB+C,IAAI,CAAC,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;qDAOxB,uQAAC,GAAG;wBAAC,SAAS,EAAC,iCAAiC;kCAAC;;;;;;;;;;;8BAOrD,uQAAC,GAAG;oBAAC,SAAS,EAAC,+CAA+C,CAAC;4CAC7D,uQAAC,MAAM;wBACL,OAAO,CAAC,CAAC9E,OAAO,CAAC;wBACjB,SAAS,EAAC,iFAAiF;kCAC5F;;;;;;;;;;;;;;;;;;;;;;AAOX;;KAtRgBiC,cAAcA","ignoreList":[]}},
    {"offset": {"line": 3380, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/date-range-presets.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { startOfDay, endOfDay, subDays, startOfWeek, endOfWeek, startOfMonth, endOfMonth, subMonths, subWeeks } from \"date-fns\";\r\n\r\n/**\r\n * Date Range Presets Component\r\n * \r\n * Quick date range selection with common presets\r\n * Features:\r\n * - Today, Yesterday, Last 7/30/90 days\r\n * - This/Last Week, Month, Quarter\r\n * - Custom date range picker\r\n * - Comparison period auto-calculation\r\n */\r\n\r\nexport interface DateRangePreset {\r\n  label: string;\r\n  getValue: () => { from: Date; to: Date };\r\n  icon?: string;\r\n  category: \"quick\" | \"week\" | \"month\" | \"custom\";\r\n}\r\n\r\nexport const dateRangePresets: DateRangePreset[] = [\r\n  // Quick Ranges\r\n  {\r\n    label: \"Today\",\r\n    getValue: () => ({\r\n      from: startOfDay(new Date()),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Yesterday\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 1)),\r\n      to: endOfDay(subDays(new Date(), 1)),\r\n    }),\r\n    icon: \"üìÜ\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 7 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 7)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìä\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 30 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 30)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìà\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 90 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 90)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìâ\",\r\n    category: \"quick\",\r\n  },\r\n  \r\n  // Week Ranges\r\n  {\r\n    label: \"This Week\",\r\n    getValue: () => ({\r\n      from: startOfWeek(new Date(), { weekStartsOn: 1 }),\r\n      to: endOfWeek(new Date(), { weekStartsOn: 1 }),\r\n    }),\r\n    icon: \"üóìÔ∏è\",\r\n    category: \"week\",\r\n  },\r\n  {\r\n    label: \"Last Week\",\r\n    getValue: () => ({\r\n      from: startOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\r\n      to: endOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\r\n    }),\r\n    icon: \"üóìÔ∏è\",\r\n    category: \"week\",\r\n  },\r\n  \r\n  // Month Ranges\r\n  {\r\n    label: \"This Month\",\r\n    getValue: () => ({\r\n      from: startOfMonth(new Date()),\r\n      to: endOfMonth(new Date()),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"month\",\r\n  },\r\n  {\r\n    label: \"Last Month\",\r\n    getValue: () => ({\r\n      from: startOfMonth(subMonths(new Date(), 1)),\r\n      to: endOfMonth(subMonths(new Date(), 1)),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"month\",\r\n  },\r\n  {\r\n    label: \"Last 3 Months\",\r\n    getValue: () => ({\r\n      from: startOfMonth(subMonths(new Date(), 3)),\r\n      to: endOfMonth(new Date()),\r\n    }),\r\n    icon: \"üìä\",\r\n    category: \"month\",\r\n  },\r\n];\r\n\r\ninterface DateRangePresetsProps {\r\n  onSelect: (range: { from: Date; to: Date }) => void;\r\n  currentRange?: { from: Date; to: Date };\r\n}\r\n\r\nexport function DateRangePresets({ onSelect, currentRange }: DateRangePresetsProps) {\r\n  const categories = [\r\n    { key: \"quick\", label: \"Quick Select\" },\r\n    { key: \"week\", label: \"Weekly\" },\r\n    { key: \"month\", label: \"Monthly\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Date Range Presets</h3>\r\n      \r\n      <div className=\"space-y-6\">\r\n        {categories.map((category) => {\r\n          const presets = dateRangePresets.filter(p => p.category === category.key);\r\n          \r\n          return (\r\n            <div key={category.key}>\r\n              <h4 className=\"text-sm font-medium text-gray-700 mb-3\">{category.label}</h4>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2\">\r\n                {presets.map((preset) => {\r\n                  const range = preset.getValue();\r\n                  const isActive = currentRange && \r\n                    range.from.getTime() === currentRange.from.getTime() &&\r\n                    range.to.getTime() === currentRange.to.getTime();\r\n                  \r\n                  return (\r\n                    <button\r\n                      key={preset.label}\r\n                      onClick={() => onSelect(range)}\r\n                      className={`px-3 py-2 text-sm rounded-lg border-2 transition-all ${\r\n                        isActive\r\n                          ? \"border-blue-600 bg-blue-50 text-blue-900 font-semibold shadow-sm\"\r\n                          : \"border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50\"\r\n                      }`}\r\n                    >\r\n                      {preset.icon && <span className=\"mr-1\">{preset.icon}</span>}\r\n                      {preset.label}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Custom Range Info */}\r\n      <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <span className=\"text-2xl\">üí°</span>\r\n          <div className=\"text-sm\">\r\n            <p className=\"font-medium text-gray-900 mb-1\">Pro Tip</p>\r\n            <p className=\"text-gray-700\">\r\n              Use the date picker in the filters above for custom date ranges. \r\n              Presets automatically calculate comparison periods for trend analysis.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Calculate comparison period for a given date range\r\n * Returns the previous period of equal length\r\n */\r\nexport function getComparisonPeriod(range: { from: Date; to: Date }): { from: Date; to: Date } {\r\n  const durationMs = range.to.getTime() - range.from.getTime();\r\n  const durationDays = Math.ceil(durationMs / (1000 * 60 * 60 * 24));\r\n  \r\n  return {\r\n    from: startOfDay(subDays(range.from, durationDays)),\r\n    to: endOfDay(subDays(range.to, durationDays)),\r\n  };\r\n}\r\n\r\n/**\r\n * Get preset label for a date range if it matches\r\n */\r\nexport function getPresetLabel(range: { from: Date; to: Date }): string | null {\r\n  for (const preset of dateRangePresets) {\r\n    const presetRange = preset.getValue();\r\n    if (\r\n      presetRange.from.getTime() === range.from.getTime() &&\r\n      presetRange.to.getTime() === range.to.getTime()\r\n    ) {\r\n      return preset.label;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n"],"names":["c","_c","startOfDay","endOfDay","subDays","startOfWeek","endOfWeek","startOfMonth","endOfMonth","subMonths","subWeeks","DateRangePreset","label","getValue","from","Date","to","icon","category","dateRangePresets","weekStartsOn","DateRangePresetsProps","onSelect","range","currentRange","DateRangePresets","t0","$","$i","Symbol","for","t1","key","categories","t2","t3","map","presets","filter","p","preset","isActive","getTime","DateRangePresets[categories.map() > presets.map() > <button>.onClick]","t4","t5","t6","getComparisonPeriod","durationMs","durationDays","Math","ceil","getPresetLabel","presetRange"],"mappings":"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","ignoreList":[]}},
    {"offset": {"line": 3734, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/advanced-dashboard-client.tsx"],"sourcesContent":["\"use client\";\r\n\r\n/**\r\n * Advanced Dashboard Client Component\r\n * \r\n * Complete dashboard with all advanced features:\r\n * - Real-time updates with WebSocket support\r\n * - Period comparison mode\r\n * - Drill-down capabilities\r\n * - Date range presets\r\n * - Enhanced visualizations\r\n * - Export functionality\r\n */\r\n\r\nimport { useState } from \"react\";\r\nimport { EnhancedKPICards } from \"./components/enhanced-kpi-cards\";\r\nimport { EnhancedChart } from \"./components/enhanced-chart\";\r\nimport { CampaignTable } from \"./components/campaign-table\";\r\nimport { DashboardFilters } from \"./components/dashboard-filters\";\r\nimport { ComparisonMode } from \"./components/comparison-mode\";\r\nimport { DrillDownModal } from \"./components/drill-down-modal\";\r\nimport { DateRangePresets } from \"./components/date-range-presets\";\r\nimport { subDays, startOfDay, endOfDay } from \"date-fns\";\r\n\r\ntype ViewMode = \"overview\" | \"comparison\" | \"presets\";\r\n\r\nexport function AdvancedDashboardClient() {\r\n  const [dateRange, setDateRange] = useState<{ from: Date; to: Date }>({\r\n    from: startOfDay(subDays(new Date(), 30)),\r\n    to: endOfDay(new Date()),\r\n  });\r\n  const [platform, setPlatform] = useState<string | null>(null);\r\n  const [attributionModel, setAttributionModel] = useState<string>(\"LAST_TOUCH\");\r\n  const [viewMode, setViewMode] = useState<ViewMode>(\"overview\");\r\n  \r\n  // Drill-down state\r\n  const [drillDownData, setDrillDownData] = useState<{\r\n    isOpen: boolean;\r\n    data: any;\r\n  }>({\r\n    isOpen: false,\r\n    data: null,\r\n  });\r\n\r\n  const handleDrillDown = (data: any) => {\r\n    setDrillDownData({\r\n      isOpen: true,\r\n      data,\r\n    });\r\n  };\r\n\r\n  const closeDrillDown = () => {\r\n    setDrillDownData({\r\n      isOpen: false,\r\n      data: null,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Page Header with View Mode Switcher */}\r\n      <div className=\"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent\">\r\n            Dashboard\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-1\">Real-time marketing performance analytics</p>\r\n        </div>\r\n        \r\n        {/* View Mode Switcher */}\r\n        <div className=\"flex gap-1 bg-white rounded-xl p-1 shadow-md\">\r\n          {[\r\n            { key: \"overview\", label: \"Overview\", icon: \"üìä\" },\r\n            { key: \"comparison\", label: \"Compare\", icon: \"‚öñÔ∏è\" },\r\n            { key: \"presets\", label: \"Presets\", icon: \"‚ö°\" },\r\n          ].map((mode) => (\r\n            <button\r\n              key={mode.key}\r\n              onClick={() => setViewMode(mode.key as ViewMode)}\r\n              className={`px-4 py-2 text-sm rounded-lg transition-all ${\r\n                viewMode === mode.key\r\n                  ? \"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md\"\r\n                  : \"text-gray-600 hover:bg-gray-50\"\r\n              }`}\r\n            >\r\n              <span className=\"mr-1\">{mode.icon}</span>\r\n              {mode.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div>\r\n        {/* Filters - Always visible */}\r\n        <div className=\"mb-6\">\r\n          <DashboardFilters\r\n            dateRange={dateRange}\r\n            platform={platform}\r\n            attributionModel={attributionModel}\r\n            onDateRangeChange={setDateRange}\r\n            onPlatformChange={setPlatform}\r\n            onAttributionModelChange={setAttributionModel}\r\n          />\r\n        </div>\r\n\r\n        {/* View-specific content */}\r\n        {viewMode === \"overview\" && (\r\n          <div className=\"space-y-6\">\r\n            {/* Enhanced KPI Cards with real-time updates */}\r\n            <EnhancedKPICards\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Enhanced Interactive Chart */}\r\n            <EnhancedChart\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Campaign Table */}\r\n            <CampaignTable\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Quick Stats Footer */}\r\n            <div className=\"glass backdrop-blur-xl bg-white/70 rounded-2xl shadow-xl p-6 border border-white/20\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üöÄ Advanced Features</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">üîÑ</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-blue-900\">Real-time Updates</p>\r\n                    <p className=\"text-sm text-blue-700\">Auto-refresh every 30s</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">‚öñÔ∏è</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-purple-900\">Period Comparison</p>\r\n                    <p className=\"text-sm text-purple-700\">Side-by-side analysis</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">üîç</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-green-900\">Drill-Down</p>\r\n                    <p className=\"text-sm text-green-700\">Click for details</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">‚ö°</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-orange-900\">Quick Presets</p>\r\n                    <p className=\"text-sm text-orange-700\">Fast date selection</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {viewMode === \"comparison\" && (\r\n          <div className=\"space-y-6\">\r\n            <ComparisonMode\r\n              attributionModel={attributionModel}\r\n              platform={platform}\r\n            />\r\n            \r\n            {/* Additional comparison insights */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üí° Comparison Tips</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Compare equal-length periods for accurate trend analysis</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Look for consistent improvements across multiple metrics</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Consider seasonality when comparing different months</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Use attribution models to understand customer journey changes</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {viewMode === \"presets\" && (\r\n          <div className=\"space-y-6\">\r\n            <DateRangePresets\r\n              onSelect={(range) => {\r\n                setDateRange(range);\r\n                setViewMode(\"overview\");\r\n              }}\r\n              currentRange={dateRange}\r\n            />\r\n            \r\n            {/* Preset usage guide */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üìö Preset Guide</h3>\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div className=\"flex items-start gap-3 p-3 bg-blue-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üìÖ</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-blue-900\">Quick Select</p>\r\n                    <p className=\"text-blue-700\">Best for daily monitoring and recent performance checks</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-3 bg-purple-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üóìÔ∏è</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-purple-900\">Weekly Ranges</p>\r\n                    <p className=\"text-purple-700\">Ideal for week-over-week trend analysis</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-3 bg-green-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üìä</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-green-900\">Monthly Ranges</p>\r\n                    <p className=\"text-green-700\">Perfect for strategic planning and budget reviews</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Drill-Down Modal */}\r\n      {drillDownData.isOpen && drillDownData.data && (\r\n        <DrillDownModal\r\n          isOpen={drillDownData.isOpen}\r\n          onClose={closeDrillDown}\r\n          data={drillDownData.data}\r\n          dateRange={dateRange}\r\n          attributionModel={attributionModel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["c","_c","useState","EnhancedKPICards","EnhancedChart","CampaignTable","DashboardFilters","ComparisonMode","DrillDownModal","DateRangePresets","subDays","startOfDay","endOfDay","ViewMode","AdvancedDashboardClient","$","$i","Symbol","for","t0","from","Date","to","dateRange","setDateRange","platform","setPlatform","attributionModel","setAttributionModel","viewMode","setViewMode","t1","isOpen","data","drillDownData","setDrillDownData","t2","AdvancedDashboardClient[closeDrillDown]","closeDrillDown","t3","t4","key","label","icon","t5","map","mode","AdvancedDashboardClient[(anonymous)() > <button>.onClick]","t6","t7","t8","t9","range","t10","t11","t12"],"mappings":"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","ignoreList":[]}}]
}