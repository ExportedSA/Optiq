{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/notifications/client.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useState } from \"react\";\r\n\r\ntype NotificationDto = {\r\n  id: string;\r\n  title: string;\r\n  message: string;\r\n  priority: string;\r\n  status: string;\r\n  actionUrl?: string | null;\r\n  metadata: any;\r\n  createdAt: string;\r\n  readAt: string | null;\r\n};\r\n\r\nexport function NotificationsClient() {\r\n  const [items, setItems] = useState<NotificationDto[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const load = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/notifications?limit=50&includeRead=true\");\r\n      if (!res.ok) throw new Error(\"Failed to load notifications\");\r\n      const json = await res.json();\r\n      setItems(json.notifications ?? []);\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Unknown error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    void load();\r\n  }, [load]);\r\n\r\n  async function markRead(id: string) {\r\n    await fetch(\"/api/notifications/read\", {\r\n      method: \"POST\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      body: JSON.stringify({ notificationId: id }),\r\n    });\r\n    void load();\r\n  }\r\n\r\n  async function markAllRead() {\r\n    await fetch(\"/api/notifications/read-all\", { method: \"POST\" });\r\n    void load();\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-end justify-between gap-3\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold tracking-tight\">Notifications</h1>\r\n          <p className=\"mt-1 text-sm text-zinc-600\">Alerts and system messages for your workspace.</p>\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => void markAllRead()}\r\n          className=\"rounded-lg border border-zinc-200 bg-white px-4 py-2 text-sm font-medium text-zinc-700 hover:bg-zinc-50\"\r\n        >\r\n          Mark all read\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className=\"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700\">{error}</div>\r\n      )}\r\n\r\n      <div className=\"overflow-hidden rounded-xl border border-zinc-200 bg-white\">\r\n        <div className=\"divide-y divide-zinc-100\">\r\n          {loading ? (\r\n            <div className=\"p-6 text-sm text-zinc-500\">Loadingâ€¦</div>\r\n          ) : items.length === 0 ? (\r\n            <div className=\"p-6 text-sm text-zinc-500\">No notifications.</div>\r\n          ) : (\r\n            items.map((n) => (\r\n              <div key={n.id} className=\"flex items-start justify-between gap-4 p-4 hover:bg-zinc-50\">\r\n                <div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <span className={`text-xs font-medium ${n.readAt ? \"text-zinc-400\" : \"text-zinc-900\"}`}>\r\n                      {n.title}\r\n                    </span>\r\n                    {!n.readAt && (\r\n                      <span className=\"rounded-full bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-700\">new</span>\r\n                    )}\r\n                    <span className=\"rounded-full bg-zinc-100 px-2 py-0.5 text-xs font-medium text-zinc-600\">\r\n                      {n.priority}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"mt-1 text-sm text-zinc-600\">{n.message}</p>\r\n                  <div className=\"mt-2 text-xs text-zinc-500\">\r\n                    {new Date(n.createdAt).toLocaleString()}\r\n                  </div>\r\n\r\n                  {n.actionUrl ? (\r\n                    <a className=\"mt-2 inline-block text-sm underline\" href={n.actionUrl}>\r\n                      View\r\n                    </a>\r\n                  ) : null}\r\n                </div>\r\n\r\n                {!n.readAt ? (\r\n                  <button\r\n                    onClick={() => void markRead(n.id)}\r\n                    className=\"rounded-lg border border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-700 hover:bg-zinc-50\"\r\n                  >\r\n                    Mark read\r\n                  </button>\r\n                ) : null}\r\n              </div>\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["useCallback","useEffect","useState","NotificationDto","id","title","message","priority","status","actionUrl","metadata","createdAt","readAt","NotificationsClient","items","setItems","loading","setLoading","error","setError","load","res","fetch","ok","Error","json","notifications","e","markRead","method","headers","body","JSON","stringify","notificationId","markAllRead","length","map","n","Date","toLocaleString"],"mappings":"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","ignoreList":[]}}]
}