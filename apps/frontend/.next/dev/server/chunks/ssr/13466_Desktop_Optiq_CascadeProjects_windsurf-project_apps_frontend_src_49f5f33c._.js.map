{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/components/analytics/date-range-selector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport type { DateRangePreset } from \"@/lib/analytics\";\r\n\r\ninterface DateRangeSelectorProps {\r\n  value: DateRangePreset;\r\n  onChange: (preset: DateRangePreset) => void;\r\n  customRange?: { start: Date; end: Date };\r\n  onCustomRangeChange?: (range: { start: Date; end: Date }) => void;\r\n}\r\n\r\nconst presets: { value: DateRangePreset; label: string }[] = [\r\n  { value: \"7d\", label: \"Last 7 days\" },\r\n  { value: \"14d\", label: \"Last 14 days\" },\r\n  { value: \"30d\", label: \"Last 30 days\" },\r\n  { value: \"90d\", label: \"Last 90 days\" },\r\n];\r\n\r\nexport function DateRangeSelector({\r\n  value,\r\n  onChange,\r\n  customRange,\r\n  onCustomRangeChange,\r\n}: DateRangeSelectorProps) {\r\n  const [showCustom, setShowCustom] = useState(false);\r\n  const [tempStart, setTempStart] = useState(\r\n    customRange?.start.toISOString().split(\"T\")[0] ?? \"\"\r\n  );\r\n  const [tempEnd, setTempEnd] = useState(\r\n    customRange?.end.toISOString().split(\"T\")[0] ?? \"\"\r\n  );\r\n\r\n  const handlePresetClick = (preset: DateRangePreset) => {\r\n    if (preset === \"custom\") {\r\n      setShowCustom(true);\r\n    } else {\r\n      setShowCustom(false);\r\n      onChange(preset);\r\n    }\r\n  };\r\n\r\n  const handleCustomApply = () => {\r\n    if (tempStart && tempEnd && onCustomRangeChange) {\r\n      const start = new Date(tempStart);\r\n      start.setHours(0, 0, 0, 0);\r\n      const end = new Date(tempEnd);\r\n      end.setHours(23, 59, 59, 999);\r\n      onCustomRangeChange({ start, end });\r\n      onChange(\"custom\");\r\n      setShowCustom(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-wrap items-center gap-2\">\r\n      {presets.map((preset) => (\r\n        <button\r\n          key={preset.value}\r\n          onClick={() => handlePresetClick(preset.value)}\r\n          className={`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${\r\n            value === preset.value && !showCustom\r\n              ? \"bg-zinc-900 text-white\"\r\n              : \"bg-zinc-100 text-zinc-700 hover:bg-zinc-200\"\r\n          }`}\r\n        >\r\n          {preset.label}\r\n        </button>\r\n      ))}\r\n\r\n      <div className=\"relative\">\r\n        <button\r\n          onClick={() => setShowCustom(!showCustom)}\r\n          className={`rounded-lg px-3 py-1.5 text-sm font-medium transition-colors ${\r\n            value === \"custom\"\r\n              ? \"bg-zinc-900 text-white\"\r\n              : \"bg-zinc-100 text-zinc-700 hover:bg-zinc-200\"\r\n          }`}\r\n        >\r\n          Custom\r\n        </button>\r\n\r\n        {showCustom && (\r\n          <>\r\n            <div\r\n              className=\"fixed inset-0 z-10\"\r\n              onClick={() => setShowCustom(false)}\r\n            />\r\n            <div className=\"absolute right-0 z-20 mt-2 w-72 rounded-lg border border-zinc-200 bg-white p-4 shadow-lg\">\r\n              <div className=\"space-y-3\">\r\n                <div>\r\n                  <label className=\"block text-xs font-medium text-zinc-600\">\r\n                    Start Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={tempStart}\r\n                    onChange={(e) => setTempStart(e.target.value)}\r\n                    className=\"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-xs font-medium text-zinc-600\">\r\n                    End Date\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={tempEnd}\r\n                    onChange={(e) => setTempEnd(e.target.value)}\r\n                    className=\"mt-1 w-full rounded-lg border border-zinc-200 px-3 py-2 text-sm outline-none focus:border-zinc-400\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex justify-end gap-2\">\r\n                  <button\r\n                    onClick={() => setShowCustom(false)}\r\n                    className=\"rounded-lg px-3 py-1.5 text-sm font-medium text-zinc-600 hover:bg-zinc-100\"\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                  <button\r\n                    onClick={handleCustomApply}\r\n                    disabled={!tempStart || !tempEnd}\r\n                    className=\"rounded-lg bg-zinc-900 px-3 py-1.5 text-sm font-medium text-white hover:bg-zinc-800 disabled:opacity-50\"\r\n                  >\r\n                    Apply\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAYA,MAAM,UAAuD;IAC3D;QAAE,OAAO;QAAM,OAAO;IAAc;IACpC;QAAE,OAAO;QAAO,OAAO;IAAe;IACtC;QAAE,OAAO;QAAO,OAAO;IAAe;IACtC;QAAE,OAAO;QAAO,OAAO;IAAe;CACvC;AAEM,SAAS,kBAAkB,EAChC,KAAK,EACL,QAAQ,EACR,WAAW,EACX,mBAAmB,EACI;IACvB,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,2RAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,2RAAQ,EACxC,aAAa,MAAM,cAAc,MAAM,IAAI,CAAC,EAAE,IAAI;IAEpD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2RAAQ,EACpC,aAAa,IAAI,cAAc,MAAM,IAAI,CAAC,EAAE,IAAI;IAGlD,MAAM,oBAAoB,CAAC;QACzB,IAAI,WAAW,UAAU;YACvB,cAAc;QAChB,OAAO;YACL,cAAc;YACd,SAAS;QACX;IACF;IAEA,MAAM,oBAAoB;QACxB,IAAI,aAAa,WAAW,qBAAqB;YAC/C,MAAM,QAAQ,IAAI,KAAK;YACvB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;YACxB,MAAM,MAAM,IAAI,KAAK;YACrB,IAAI,QAAQ,CAAC,IAAI,IAAI,IAAI;YACzB,oBAAoB;gBAAE;gBAAO;YAAI;YACjC,SAAS;YACT,cAAc;QAChB;IACF;IAEA,qBACE,wTAAC;QAAI,WAAU;;YACZ,QAAQ,GAAG,CAAC,CAAC,uBACZ,wTAAC;oBAEC,SAAS,IAAM,kBAAkB,OAAO,KAAK;oBAC7C,WAAW,CAAC,6DAA6D,EACvE,UAAU,OAAO,KAAK,IAAI,CAAC,aACvB,2BACA,+CACJ;8BAED,OAAO,KAAK;mBARR,OAAO,KAAK;;;;;0BAYrB,wTAAC;gBAAI,WAAU;;kCACb,wTAAC;wBACC,SAAS,IAAM,cAAc,CAAC;wBAC9B,WAAW,CAAC,6DAA6D,EACvE,UAAU,WACN,2BACA,+CACJ;kCACH;;;;;;oBAIA,4BACC;;0CACE,wTAAC;gCACC,WAAU;gCACV,SAAS,IAAM,cAAc;;;;;;0CAE/B,wTAAC;gCAAI,WAAU;0CACb,cAAA,wTAAC;oCAAI,WAAU;;sDACb,wTAAC;;8DACC,wTAAC;oDAAM,WAAU;8DAA0C;;;;;;8DAG3D,wTAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;oDAC5C,WAAU;;;;;;;;;;;;sDAGd,wTAAC;;8DACC,wTAAC;oDAAM,WAAU;8DAA0C;;;;;;8DAG3D,wTAAC;oDACC,MAAK;oDACL,OAAO;oDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oDAC1C,WAAU;;;;;;;;;;;;sDAGd,wTAAC;4CAAI,WAAU;;8DACb,wTAAC;oDACC,SAAS,IAAM,cAAc;oDAC7B,WAAU;8DACX;;;;;;8DAGD,wTAAC;oDACC,SAAS;oDACT,UAAU,CAAC,aAAa,CAAC;oDACzB,WAAU;8DACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWnB"}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/components/analytics/spend-conversion-chart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo } from \"react\";\r\nimport type { TimeSeriesPoint, PlatformTimeSeries } from \"@/lib/analytics\";\r\n\r\ninterface SpendConversionChartProps {\r\n  data: TimeSeriesPoint[];\r\n  platformData?: PlatformTimeSeries[];\r\n  showPlatformOverlay?: boolean;\r\n  height?: number;\r\n}\r\n\r\nconst PLATFORM_COLORS: Record<string, string> = {\r\n  GOOGLE_ADS: \"#4285F4\",\r\n  META: \"#1877F2\",\r\n  TIKTOK: \"#FF0050\",\r\n  LINKEDIN: \"#0A66C2\",\r\n};\r\n\r\nfunction formatCurrency(value: number): string {\r\n  if (value >= 1000000) return `$${(value / 1000000).toFixed(1)}M`;\r\n  if (value >= 1000) return `$${(value / 1000).toFixed(1)}K`;\r\n  return `$${value.toFixed(0)}`;\r\n}\r\n\r\nfunction formatNumber(value: number): string {\r\n  if (value >= 1000000) return `${(value / 1000000).toFixed(1)}M`;\r\n  if (value >= 1000) return `${(value / 1000).toFixed(1)}K`;\r\n  return value.toFixed(0);\r\n}\r\n\r\nexport function SpendConversionChart({\r\n  data,\r\n  platformData,\r\n  showPlatformOverlay = false,\r\n  height = 300,\r\n}: SpendConversionChartProps) {\r\n  const chartData = useMemo(() => {\r\n    if (data.length === 0) return null;\r\n\r\n    const maxSpend = Math.max(...data.map((d) => d.spend), 1);\r\n    const maxConversions = Math.max(...data.map((d) => d.conversions), 1);\r\n\r\n    const spendPadding = maxSpend * 0.1;\r\n    const convPadding = maxConversions * 0.1;\r\n\r\n    const normalizedSpend = data.map((d) => ({\r\n      ...d,\r\n      spendNorm: d.spend / (maxSpend + spendPadding),\r\n      convNorm: d.conversions / (maxConversions + convPadding),\r\n    }));\r\n\r\n    return {\r\n      points: normalizedSpend,\r\n      maxSpend: maxSpend + spendPadding,\r\n      maxConversions: maxConversions + convPadding,\r\n    };\r\n  }, [data]);\r\n\r\n  const platformChartData = useMemo(() => {\r\n    if (!platformData || !showPlatformOverlay) return null;\r\n\r\n    const maxSpend = Math.max(\r\n      ...platformData.flatMap((p) => p.data.map((d) => d.spend)),\r\n      1\r\n    );\r\n\r\n    return platformData.map((platform) => ({\r\n      ...platform,\r\n      normalizedData: platform.data.map((d) => ({\r\n        ...d,\r\n        spendNorm: d.spend / (maxSpend * 1.1),\r\n      })),\r\n    }));\r\n  }, [platformData, showPlatformOverlay]);\r\n\r\n  if (!chartData || data.length === 0) {\r\n    return (\r\n      <div\r\n        className=\"flex items-center justify-center rounded-xl border border-zinc-200 bg-white\"\r\n        style={{ height }}\r\n      >\r\n        <p className=\"text-sm text-zinc-500\">No data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const chartWidth = 100;\r\n  const chartHeight = 100;\r\n  const padding = { top: 10, right: 10, bottom: 20, left: 10 };\r\n  const innerWidth = chartWidth - padding.left - padding.right;\r\n  const innerHeight = chartHeight - padding.top - padding.bottom;\r\n\r\n  const xStep = innerWidth / Math.max(chartData.points.length - 1, 1);\r\n\r\n  const spendPath = chartData.points\r\n    .map((p, i) => {\r\n      const x = padding.left + i * xStep;\r\n      const y = padding.top + innerHeight * (1 - p.spendNorm);\r\n      return `${i === 0 ? \"M\" : \"L\"} ${x} ${y}`;\r\n    })\r\n    .join(\" \");\r\n\r\n  const convPath = chartData.points\r\n    .map((p, i) => {\r\n      const x = padding.left + i * xStep;\r\n      const y = padding.top + innerHeight * (1 - p.convNorm);\r\n      return `${i === 0 ? \"M\" : \"L\"} ${x} ${y}`;\r\n    })\r\n    .join(\" \");\r\n\r\n  const spendAreaPath =\r\n    spendPath +\r\n    ` L ${padding.left + (chartData.points.length - 1) * xStep} ${padding.top + innerHeight}` +\r\n    ` L ${padding.left} ${padding.top + innerHeight} Z`;\r\n\r\n  return (\r\n    <div className=\"rounded-xl border border-zinc-200 bg-white p-4\">\r\n      <div className=\"mb-4 flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"h-3 w-3 rounded-full bg-blue-500\" />\r\n            <span className=\"text-xs text-zinc-600\">Spend</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <span className=\"h-3 w-3 rounded-full bg-green-500\" />\r\n            <span className=\"text-xs text-zinc-600\">Conversions</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-4 text-xs text-zinc-500\">\r\n          <span>Max: {formatCurrency(chartData.maxSpend)}</span>\r\n          <span>Max: {formatNumber(chartData.maxConversions)} conv</span>\r\n        </div>\r\n      </div>\r\n\r\n      <svg\r\n        viewBox={`0 0 ${chartWidth} ${chartHeight}`}\r\n        className=\"w-full\"\r\n        style={{ height }}\r\n        preserveAspectRatio=\"none\"\r\n      >\r\n        <defs>\r\n          <linearGradient id=\"spendGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"0%\" stopColor=\"#3B82F6\" stopOpacity=\"0.3\" />\r\n            <stop offset=\"100%\" stopColor=\"#3B82F6\" stopOpacity=\"0.05\" />\r\n          </linearGradient>\r\n        </defs>\r\n\r\n        {[0, 0.25, 0.5, 0.75, 1].map((tick) => (\r\n          <line\r\n            key={tick}\r\n            x1={padding.left}\r\n            y1={padding.top + innerHeight * tick}\r\n            x2={padding.left + innerWidth}\r\n            y2={padding.top + innerHeight * tick}\r\n            stroke=\"#e4e4e7\"\r\n            strokeWidth=\"0.5\"\r\n          />\r\n        ))}\r\n\r\n        <path d={spendAreaPath} fill=\"url(#spendGradient)\" />\r\n\r\n        <path\r\n          d={spendPath}\r\n          fill=\"none\"\r\n          stroke=\"#3B82F6\"\r\n          strokeWidth=\"2\"\r\n          vectorEffect=\"non-scaling-stroke\"\r\n        />\r\n\r\n        <path\r\n          d={convPath}\r\n          fill=\"none\"\r\n          stroke=\"#22C55E\"\r\n          strokeWidth=\"2\"\r\n          vectorEffect=\"non-scaling-stroke\"\r\n        />\r\n\r\n        {showPlatformOverlay &&\r\n          platformChartData?.map((platform) => {\r\n            const platformPath = platform.normalizedData\r\n              .map((p, i) => {\r\n                const x = padding.left + i * xStep;\r\n                const y = padding.top + innerHeight * (1 - p.spendNorm);\r\n                return `${i === 0 ? \"M\" : \"L\"} ${x} ${y}`;\r\n              })\r\n              .join(\" \");\r\n\r\n            return (\r\n              <path\r\n                key={platform.platformCode}\r\n                d={platformPath}\r\n                fill=\"none\"\r\n                stroke={PLATFORM_COLORS[platform.platformCode] ?? \"#6B7280\"}\r\n                strokeWidth=\"1.5\"\r\n                strokeDasharray=\"4 2\"\r\n                vectorEffect=\"non-scaling-stroke\"\r\n                opacity=\"0.7\"\r\n              />\r\n            );\r\n          })}\r\n\r\n        {chartData.points.map((p, i) => {\r\n          const x = padding.left + i * xStep;\r\n          const ySpend = padding.top + innerHeight * (1 - p.spendNorm);\r\n          const yConv = padding.top + innerHeight * (1 - p.convNorm);\r\n\r\n          return (\r\n            <g key={p.date}>\r\n              <circle\r\n                cx={x}\r\n                cy={ySpend}\r\n                r=\"1.5\"\r\n                fill=\"#3B82F6\"\r\n                className=\"hover:r-3 transition-all\"\r\n              />\r\n              <circle\r\n                cx={x}\r\n                cy={yConv}\r\n                r=\"1.5\"\r\n                fill=\"#22C55E\"\r\n                className=\"hover:r-3 transition-all\"\r\n              />\r\n            </g>\r\n          );\r\n        })}\r\n\r\n        {chartData.points.length <= 31 &&\r\n          chartData.points\r\n            .filter((_, i) => i % Math.ceil(chartData.points.length / 7) === 0)\r\n            .map((p, i, arr) => {\r\n              const originalIndex = chartData.points.findIndex(\r\n                (pt) => pt.date === p.date\r\n              );\r\n              const x = padding.left + originalIndex * xStep;\r\n              const label = new Date(p.date).toLocaleDateString(\"en-US\", {\r\n                month: \"short\",\r\n                day: \"numeric\",\r\n              });\r\n\r\n              return (\r\n                <text\r\n                  key={p.date}\r\n                  x={x}\r\n                  y={chartHeight - 2}\r\n                  textAnchor={\r\n                    i === 0 ? \"start\" : i === arr.length - 1 ? \"end\" : \"middle\"\r\n                  }\r\n                  className=\"fill-zinc-500\"\r\n                  style={{ fontSize: \"3px\" }}\r\n                >\r\n                  {label}\r\n                </text>\r\n              );\r\n            })}\r\n      </svg>\r\n\r\n      {showPlatformOverlay && platformData && platformData.length > 0 && (\r\n        <div className=\"mt-3 flex flex-wrap items-center gap-3 border-t border-zinc-100 pt-3\">\r\n          <span className=\"text-xs text-zinc-500\">Platforms:</span>\r\n          {platformData.map((platform) => (\r\n            <div key={platform.platformCode} className=\"flex items-center gap-1.5\">\r\n              <span\r\n                className=\"h-2 w-4 rounded-sm\"\r\n                style={{\r\n                  backgroundColor:\r\n                    PLATFORM_COLORS[platform.platformCode] ?? \"#6B7280\",\r\n                }}\r\n              />\r\n              <span className=\"text-xs text-zinc-600\">{platform.platformName}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/analytics/client.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { DateRangeSelector } from \"@/components/analytics/date-range-selector\";\r\nimport { SpendConversionChart } from \"@/components/analytics/spend-conversion-chart\";\r\nimport type { ChartData, DateRangePreset } from \"@/lib/analytics\";\r\n\r\ninterface AnalyticsPageClientProps {\r\n  initialData: ChartData;\r\n  initialDateRange: { start: string; end: string };\r\n}\r\n\r\nfunction formatCurrency(value: number): string {\r\n  return new Intl.NumberFormat(\"en-US\", {\r\n    style: \"currency\",\r\n    currency: \"USD\",\r\n    minimumFractionDigits: 2,\r\n    maximumFractionDigits: 2,\r\n  }).format(value);\r\n}\r\n\r\nfunction formatNumber(value: number): string {\r\n  return new Intl.NumberFormat(\"en-US\").format(value);\r\n}\r\n\r\nexport function AnalyticsPageClient({\r\n  initialData,\r\n  initialDateRange,\r\n}: AnalyticsPageClientProps) {\r\n  const [datePreset, setDatePreset] = useState<DateRangePreset>(\"30d\");\r\n  const [customRange, setCustomRange] = useState<{ start: Date; end: Date }>({\r\n    start: new Date(initialDateRange.start),\r\n    end: new Date(initialDateRange.end),\r\n  });\r\n  const [showPlatformOverlay, setShowPlatformOverlay] = useState(true);\r\n  const [data] = useState(initialData);\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold tracking-tight\">Analytics</h1>\r\n          <p className=\"mt-1 text-sm text-zinc-600\">\r\n            Spend and conversion trends over time\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\r\n        <DateRangeSelector\r\n          value={datePreset}\r\n          onChange={setDatePreset}\r\n          customRange={customRange}\r\n          onCustomRangeChange={setCustomRange}\r\n        />\r\n\r\n        <label className=\"flex items-center gap-2\">\r\n          <input\r\n            type=\"checkbox\"\r\n            checked={showPlatformOverlay}\r\n            onChange={(e) => setShowPlatformOverlay(e.target.checked)}\r\n            className=\"h-4 w-4 rounded border-zinc-300\"\r\n          />\r\n          <span className=\"text-sm text-zinc-600\">Show platform breakdown</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n        <SummaryCard\r\n          label=\"Total Spend\"\r\n          value={formatCurrency(data.summary.totalSpend)}\r\n        />\r\n        <SummaryCard\r\n          label=\"Total Conversions\"\r\n          value={formatNumber(data.summary.totalConversions)}\r\n        />\r\n        <SummaryCard\r\n          label=\"Average CPA\"\r\n          value={data.summary.avgCpa ? formatCurrency(data.summary.avgCpa) : \"—\"}\r\n        />\r\n        <SummaryCard\r\n          label=\"Total Revenue\"\r\n          value={formatCurrency(data.summary.totalRevenue)}\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <h2 className=\"mb-3 text-sm font-medium text-zinc-900\">\r\n          Spend vs Conversions\r\n        </h2>\r\n        <SpendConversionChart\r\n          data={data.total}\r\n          platformData={data.byPlatform}\r\n          showPlatformOverlay={showPlatformOverlay}\r\n          height={350}\r\n        />\r\n      </div>\r\n\r\n      {data.byPlatform.length > 0 && (\r\n        <div>\r\n          <h2 className=\"mb-3 text-sm font-medium text-zinc-900\">\r\n            Platform Breakdown\r\n          </h2>\r\n          <div className=\"grid gap-4 lg:grid-cols-2\">\r\n            {data.byPlatform.map((platform) => {\r\n              const totalSpend = platform.data.reduce((s, d) => s + d.spend, 0);\r\n              const totalConv = platform.data.reduce((s, d) => s + d.conversions, 0);\r\n              const cpa = totalConv > 0 ? totalSpend / totalConv : null;\r\n\r\n              return (\r\n                <div\r\n                  key={platform.platformCode}\r\n                  className=\"rounded-xl border border-zinc-200 bg-white p-4\"\r\n                >\r\n                  <div className=\"mb-3 flex items-center justify-between\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <PlatformBadge code={platform.platformCode} />\r\n                      <span className=\"font-medium\">{platform.platformName}</span>\r\n                    </div>\r\n                    <div className=\"text-right text-xs text-zinc-500\">\r\n                      <div>{formatCurrency(totalSpend)} spend</div>\r\n                      <div>{formatNumber(totalConv)} conv</div>\r\n                    </div>\r\n                  </div>\r\n                  <SpendConversionChart\r\n                    data={platform.data}\r\n                    height={150}\r\n                    showPlatformOverlay={false}\r\n                  />\r\n                  <div className=\"mt-2 text-center text-xs text-zinc-500\">\r\n                    CPA: {cpa ? formatCurrency(cpa) : \"—\"}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SummaryCard({ label, value }: { label: string; value: string }) {\r\n  return (\r\n    <div className=\"rounded-xl border border-zinc-200 bg-white p-4\">\r\n      <p className=\"text-xs font-medium text-zinc-500\">{label}</p>\r\n      <p className=\"mt-1 text-xl font-semibold tracking-tight\">{value}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PlatformBadge({ code }: { code: string }) {\r\n  const colors: Record<string, string> = {\r\n    GOOGLE_ADS: \"bg-blue-500\",\r\n    META: \"bg-indigo-500\",\r\n    TIKTOK: \"bg-pink-500\",\r\n    LINKEDIN: \"bg-sky-600\",\r\n  };\r\n\r\n  const labels: Record<string, string> = {\r\n    GOOGLE_ADS: \"G\",\r\n    META: \"M\",\r\n    TIKTOK: \"T\",\r\n    LINKEDIN: \"L\",\r\n  };\r\n\r\n  return (\r\n    <span\r\n      className={`inline-flex h-6 w-6 items-center justify-center rounded text-xs font-bold text-white ${\r\n        colors[code] ?? \"bg-zinc-500\"\r\n      }`}\r\n    >\r\n      {labels[code] ?? \"?\"}\r\n    </span>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}