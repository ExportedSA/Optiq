{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/enhanced-kpi-cards.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\ninterface EnhancedKPICardsProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface KPIData {\r\n  totalSpend: number;\r\n  totalConversions: number;\r\n  avgCpa: number;\r\n  avgRoas: number;\r\n  totalWaste: number;\r\n  wastePct: number;\r\n  // Comparison data (previous period)\r\n  prevSpend?: number;\r\n  prevConversions?: number;\r\n  prevCpa?: number;\r\n  prevRoas?: number;\r\n}\r\n\r\nexport function EnhancedKPICards({ dateRange, platform, attributionModel }: EnhancedKPICardsProps) {\r\n  const [data, setData] = useState<KPIData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [lastUpdated, setLastUpdated] = useState<Date>(new Date());\r\n  const [autoRefresh, setAutoRefresh] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchKPIs();\r\n    \r\n    // Auto-refresh every 30 seconds if enabled\r\n    if (autoRefresh) {\r\n      const interval = setInterval(() => {\r\n        fetchKPIs();\r\n      }, 30000);\r\n      \r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [dateRange, platform, attributionModel, autoRefresh]);\r\n\r\n  const fetchKPIs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        comparePrevious: \"true\",\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/kpis?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result);\r\n        setLastUpdated(new Date());\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch KPIs:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const calculateChange = (current: number, previous?: number): { value: number; isPositive: boolean } | null => {\r\n    if (!previous || previous === 0) return null;\r\n    const change = ((current - previous) / previous) * 100;\r\n    return { value: Math.abs(change), isPositive: change >= 0 };\r\n  };\r\n\r\n  if (loading && !data) {\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n          {[...Array(5)].map((_, i) => (\r\n            <div key={i} className=\"bg-white rounded-lg shadow p-6 animate-pulse\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-20 mb-2\"></div>\r\n              <div className=\"h-8 bg-gray-200 rounded w-24\"></div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data) {\r\n    return null;\r\n  }\r\n\r\n  const spendChange = calculateChange(data.totalSpend, data.prevSpend);\r\n  const conversionChange = calculateChange(data.totalConversions, data.prevConversions);\r\n  const cpaChange = calculateChange(data.avgCpa, data.prevCpa);\r\n  const roasChange = calculateChange(data.avgRoas, data.prevRoas);\r\n\r\n  const cards = [\r\n    {\r\n      label: \"Total Spend\",\r\n      value: `$${(data.totalSpend / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n      change: spendChange,\r\n      icon: \"üí∞\",\r\n      color: \"blue\",\r\n      invertChange: true, // Lower spend is better\r\n    },\r\n    {\r\n      label: \"Conversions\",\r\n      value: data.totalConversions.toLocaleString(undefined, { maximumFractionDigits: 1 }),\r\n      change: conversionChange,\r\n      icon: \"üéØ\",\r\n      color: \"green\",\r\n      invertChange: false,\r\n    },\r\n    {\r\n      label: \"Avg CPA\",\r\n      value: data.avgCpa ? `$${data.avgCpa.toFixed(2)}` : \"N/A\",\r\n      change: cpaChange,\r\n      icon: \"üìä\",\r\n      color: \"purple\",\r\n      invertChange: true, // Lower CPA is better\r\n    },\r\n    {\r\n      label: \"Avg ROAS\",\r\n      value: data.avgRoas ? `${data.avgRoas.toFixed(2)}x` : \"N/A\",\r\n      change: roasChange,\r\n      icon: \"üìà\",\r\n      color: \"orange\",\r\n      invertChange: false,\r\n    },\r\n    {\r\n      label: \"Waste Spend\",\r\n      value: `$${(data.totalWaste / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`,\r\n      subValue: `${data.wastePct.toFixed(1)}% of spend`,\r\n      icon: \"‚ö†Ô∏è\",\r\n      color: \"red\",\r\n      invertChange: true,\r\n    },\r\n  ];\r\n\r\n  const colorClasses = {\r\n    blue: \"from-blue-50 to-blue-100 text-blue-900 border-blue-200\",\r\n    green: \"from-green-50 to-green-100 text-green-900 border-green-200\",\r\n    purple: \"from-purple-50 to-purple-100 text-purple-900 border-purple-200\",\r\n    orange: \"from-orange-50 to-orange-100 text-orange-900 border-orange-200\",\r\n    red: \"from-red-50 to-red-100 text-red-900 border-red-200\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* Header with last updated and refresh controls */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-2 text-sm text-gray-600\">\r\n          <span className=\"inline-block w-2 h-2 bg-green-500 rounded-full animate-pulse\"></span>\r\n          <span>Last updated {formatDistanceToNow(lastUpdated, { addSuffix: true })}</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <button\r\n            onClick={() => setAutoRefresh(!autoRefresh)}\r\n            className={`px-3 py-1 text-sm rounded-lg transition-colors ${\r\n              autoRefresh\r\n                ? \"bg-green-100 text-green-700 hover:bg-green-200\"\r\n                : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n            }`}\r\n          >\r\n            {autoRefresh ? \"üîÑ Auto-refresh ON\" : \"‚è∏Ô∏è Auto-refresh OFF\"}\r\n          </button>\r\n          <button\r\n            onClick={fetchKPIs}\r\n            disabled={loading}\r\n            className=\"px-3 py-1 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition-colors\"\r\n          >\r\n            {loading ? \"Refreshing...\" : \"‚Üª Refresh Now\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* KPI Cards */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\r\n        {cards.map((card, index) => {\r\n          const change = card.change;\r\n          const isGood = change ? (card.invertChange ? !change.isPositive : change.isPositive) : null;\r\n          \r\n          return (\r\n            <div\r\n              key={index}\r\n              className={`bg-gradient-to-br ${colorClasses[card.color as keyof typeof colorClasses]} rounded-lg shadow-md border-2 p-6 transition-all hover:shadow-lg hover:scale-105`}\r\n            >\r\n              <div className=\"flex items-center justify-between mb-2\">\r\n                <p className=\"text-sm font-medium opacity-80\">{card.label}</p>\r\n                <span className=\"text-2xl\">{card.icon}</span>\r\n              </div>\r\n              <p className=\"text-3xl font-bold mb-1\">{card.value}</p>\r\n              \r\n              {/* Trend indicator */}\r\n              {change && (\r\n                <div className={`flex items-center gap-1 text-sm font-medium ${\r\n                  isGood ? \"text-green-700\" : \"text-red-700\"\r\n                }`}>\r\n                  <span>{isGood ? \"‚Üë\" : \"‚Üì\"}</span>\r\n                  <span>{change.value.toFixed(1)}%</span>\r\n                  <span className=\"text-xs opacity-70\">vs prev period</span>\r\n                </div>\r\n              )}\r\n              \r\n              {card.subValue && (\r\n                <p className=\"text-xs opacity-70 mt-1\">{card.subValue}</p>\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAyBO,SAAS,iBAAiB,EAAE,SAAS,EAAE,QAAQ,EAAE,gBAAgB,EAAyB;IAC/F,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,2RAAQ,EAAiB;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,2RAAQ,EAAC;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2RAAQ,EAAO,IAAI;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,2RAAQ,EAAC;IAE/C,IAAA,4RAAS,EAAC;QACR;QAEA,2CAA2C;QAC3C,IAAI,aAAa;YACf,MAAM,WAAW,YAAY;gBAC3B;YACF,GAAG;YAEH,OAAO,IAAM,cAAc;QAC7B;IACF,GAAG;QAAC;QAAW;QAAU;QAAkB;KAAY;IAEvD,MAAM,YAAY;QAChB,WAAW;QACX,IAAI;YACF,MAAM,SAAS,IAAI,gBAAgB;gBACjC,UAAU,UAAU,IAAI,CAAC,WAAW;gBACpC,QAAQ,UAAU,EAAE,CAAC,WAAW;gBAChC;gBACA,iBAAiB;gBACjB,GAAI,WAAW;oBAAE;gBAAS,IAAI,CAAC,CAAC;YAClC;YAEA,MAAM,WAAW,MAAM,MAAM,CAAC,oBAAoB,EAAE,QAAQ;YAC5D,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,SAAS,MAAM,SAAS,IAAI;gBAClC,QAAQ;gBACR,eAAe,IAAI;YACrB;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,kBAAkB,CAAC,SAAiB;QACxC,IAAI,CAAC,YAAY,aAAa,GAAG,OAAO;QACxC,MAAM,SAAS,AAAC,CAAC,UAAU,QAAQ,IAAI,WAAY;QACnD,OAAO;YAAE,OAAO,KAAK,GAAG,CAAC;YAAS,YAAY,UAAU;QAAE;IAC5D;IAEA,IAAI,WAAW,CAAC,MAAM;QACpB,qBACE,wTAAC;YAAI,WAAU;sBACb,cAAA,wTAAC;gBAAI,WAAU;0BACZ;uBAAI,MAAM;iBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,wTAAC;wBAAY,WAAU;;0CACrB,wTAAC;gCAAI,WAAU;;;;;;0CACf,wTAAC;gCAAI,WAAU;;;;;;;uBAFP;;;;;;;;;;;;;;;IAQpB;IAEA,IAAI,CAAC,MAAM;QACT,OAAO;IACT;IAEA,MAAM,cAAc,gBAAgB,KAAK,UAAU,EAAE,KAAK,SAAS;IACnE,MAAM,mBAAmB,gBAAgB,KAAK,gBAAgB,EAAE,KAAK,eAAe;IACpF,MAAM,YAAY,gBAAgB,KAAK,MAAM,EAAE,KAAK,OAAO;IAC3D,MAAM,aAAa,gBAAgB,KAAK,OAAO,EAAE,KAAK,QAAQ;IAE9D,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,CAAC,KAAK,UAAU,GAAG,SAAS,EAAE,cAAc,CAAC,WAAW;gBAAE,uBAAuB;gBAAG,uBAAuB;YAAE,IAAI;YAC5H,QAAQ;YACR,MAAM;YACN,OAAO;YACP,cAAc;QAChB;QACA;YACE,OAAO;YACP,OAAO,KAAK,gBAAgB,CAAC,cAAc,CAAC,WAAW;gBAAE,uBAAuB;YAAE;YAClF,QAAQ;YACR,MAAM;YACN,OAAO;YACP,cAAc;QAChB;QACA;YACE,OAAO;YACP,OAAO,KAAK,MAAM,GAAG,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG;YACpD,QAAQ;YACR,MAAM;YACN,OAAO;YACP,cAAc;QAChB;QACA;YACE,OAAO;YACP,OAAO,KAAK,OAAO,GAAG,GAAG,KAAK,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG;YACtD,QAAQ;YACR,MAAM;YACN,OAAO;YACP,cAAc;QAChB;QACA;YACE,OAAO;YACP,OAAO,CAAC,CAAC,EAAE,CAAC,KAAK,UAAU,GAAG,SAAS,EAAE,cAAc,CAAC,WAAW;gBAAE,uBAAuB;gBAAG,uBAAuB;YAAE,IAAI;YAC5H,UAAU,GAAG,KAAK,QAAQ,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC;YACjD,MAAM;YACN,OAAO;YACP,cAAc;QAChB;KACD;IAED,MAAM,eAAe;QACnB,MAAM;QACN,OAAO;QACP,QAAQ;QACR,QAAQ;QACR,KAAK;IACP;IAEA,qBACE,wTAAC;QAAI,WAAU;;0BAEb,wTAAC;gBAAI,WAAU;;kCACb,wTAAC;wBAAI,WAAU;;0CACb,wTAAC;gCAAK,WAAU;;;;;;0CAChB,wTAAC;;oCAAK;oCAAc,IAAA,mPAAmB,EAAC,aAAa;wCAAE,WAAW;oCAAK;;;;;;;;;;;;;kCAEzE,wTAAC;wBAAI,WAAU;;0CACb,wTAAC;gCACC,SAAS,IAAM,eAAe,CAAC;gCAC/B,WAAW,CAAC,+CAA+C,EACzD,cACI,mDACA,+CACJ;0CAED,cAAc,uBAAuB;;;;;;0CAExC,wTAAC;gCACC,SAAS;gCACT,UAAU;gCACV,WAAU;0CAET,UAAU,kBAAkB;;;;;;;;;;;;;;;;;;0BAMnC,wTAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,MAAM;oBAChB,MAAM,SAAS,KAAK,MAAM;oBAC1B,MAAM,SAAS,SAAU,KAAK,YAAY,GAAG,CAAC,OAAO,UAAU,GAAG,OAAO,UAAU,GAAI;oBAEvF,qBACE,wTAAC;wBAEC,WAAW,CAAC,kBAAkB,EAAE,YAAY,CAAC,KAAK,KAAK,CAA8B,CAAC,iFAAiF,CAAC;;0CAExK,wTAAC;gCAAI,WAAU;;kDACb,wTAAC;wCAAE,WAAU;kDAAkC,KAAK,KAAK;;;;;;kDACzD,wTAAC;wCAAK,WAAU;kDAAY,KAAK,IAAI;;;;;;;;;;;;0CAEvC,wTAAC;gCAAE,WAAU;0CAA2B,KAAK,KAAK;;;;;;4BAGjD,wBACC,wTAAC;gCAAI,WAAW,CAAC,4CAA4C,EAC3D,SAAS,mBAAmB,gBAC5B;;kDACA,wTAAC;kDAAM,SAAS,MAAM;;;;;;kDACtB,wTAAC;;4CAAM,OAAO,KAAK,CAAC,OAAO,CAAC;4CAAG;;;;;;;kDAC/B,wTAAC;wCAAK,WAAU;kDAAqB;;;;;;;;;;;;4BAIxC,KAAK,QAAQ,kBACZ,wTAAC;gCAAE,WAAU;0CAA2B,KAAK,QAAQ;;;;;;;uBArBlD;;;;;gBAyBX;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 346, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/enhanced-chart.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  AreaChart,\r\n  Area,\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  TooltipProps,\r\n} from \"recharts\";\r\nimport { format } from \"date-fns\";\r\n\r\ninterface EnhancedChartProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface ChartDataPoint {\r\n  date: string;\r\n  spend: number;\r\n  conversions: number;\r\n  revenue: number;\r\n  roas: number;\r\n  cpa: number;\r\n  waste: number;\r\n}\r\n\r\ntype ChartType = \"line\" | \"area\" | \"bar\";\r\ntype MetricType = \"spend\" | \"conversions\" | \"revenue\" | \"roas\" | \"cpa\" | \"waste\";\r\n\r\nexport function EnhancedChart({ dateRange, platform, attributionModel }: EnhancedChartProps) {\r\n  const [data, setData] = useState<ChartDataPoint[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chartType, setChartType] = useState<ChartType>(\"area\");\r\n  const [selectedMetrics, setSelectedMetrics] = useState<MetricType[]>([\"spend\", \"conversions\"]);\r\n  const [showComparison, setShowComparison] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchChartData();\r\n  }, [dateRange, platform, attributionModel]);\r\n\r\n  const fetchChartData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/time-series?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch chart data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const toggleMetric = (metric: MetricType) => {\r\n    setSelectedMetrics(prev => \r\n      prev.includes(metric) \r\n        ? prev.filter(m => m !== metric)\r\n        : [...prev, metric]\r\n    );\r\n  };\r\n\r\n  const exportData = () => {\r\n    const csv = [\r\n      [\"Date\", ...selectedMetrics.map(m => m.charAt(0).toUpperCase() + m.slice(1))].join(\",\"),\r\n      ...data.map(d => [\r\n        format(new Date(d.date), \"yyyy-MM-dd\"),\r\n        ...selectedMetrics.map(m => {\r\n          const value = d[m];\r\n          return m === \"spend\" || m === \"revenue\" || m === \"waste\" \r\n            ? (value / 1_000_000).toFixed(2)\r\n            : value.toFixed(2);\r\n        })\r\n      ].join(\",\"))\r\n    ].join(\"\\n\");\r\n\r\n    const blob = new Blob([csv], { type: \"text/csv\" });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement(\"a\");\r\n    a.href = url;\r\n    a.download = `optiq-metrics-${format(new Date(), \"yyyy-MM-dd\")}.csv`;\r\n    a.click();\r\n    URL.revokeObjectURL(url);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-48 mb-4\"></div>\r\n          <div className=\"h-80 bg-gray-200 rounded\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance Over Time</h3>\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          No data available for the selected period\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const metricConfig: Record<MetricType, { label: string; color: string; format: (v: number) => string }> = {\r\n    spend: { \r\n      label: \"Spend\", \r\n      color: \"#3b82f6\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n    conversions: { \r\n      label: \"Conversions\", \r\n      color: \"#22c55e\",\r\n      format: (v) => v.toFixed(1)\r\n    },\r\n    revenue: { \r\n      label: \"Revenue\", \r\n      color: \"#8b5cf6\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n    roas: { \r\n      label: \"ROAS\", \r\n      color: \"#f59e0b\",\r\n      format: (v) => `${v.toFixed(2)}x`\r\n    },\r\n    cpa: { \r\n      label: \"CPA\", \r\n      color: \"#ec4899\",\r\n      format: (v) => `$${v.toFixed(2)}`\r\n    },\r\n    waste: { \r\n      label: \"Waste\", \r\n      color: \"#ef4444\",\r\n      format: (v) => `$${(v / 1_000_000).toFixed(2)}`\r\n    },\r\n  };\r\n\r\n  const CustomTooltip = ({ active, payload, label }: any) => {\r\n    if (active && payload && payload.length) {\r\n      return (\r\n        <div className=\"bg-white border border-gray-200 rounded-lg shadow-lg p-4\">\r\n          <p className=\"font-semibold text-gray-900 mb-2\">\r\n            {format(new Date(label), \"MMM dd, yyyy\")}\r\n          </p>\r\n          {payload.map((entry: any, index: number) => {\r\n            const metric = entry.dataKey as MetricType;\r\n            const config = metricConfig[metric];\r\n            return (\r\n              <div key={index} className=\"flex items-center justify-between gap-4 text-sm\">\r\n                <span className=\"flex items-center gap-2\">\r\n                  <span \r\n                    className=\"inline-block w-3 h-3 rounded-full\" \r\n                    style={{ backgroundColor: entry.color }}\r\n                  />\r\n                  {config.label}:\r\n                </span>\r\n                <span className=\"font-semibold\">{config.format(entry.value as number)}</span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      );\r\n    }\r\n    return null;\r\n  };\r\n\r\n  const ChartComponent = chartType === \"line\" ? LineChart : chartType === \"area\" ? AreaChart : BarChart;\r\n  const DataComponent = chartType === \"line\" ? Line : chartType === \"area\" ? Area : Bar;\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Performance Over Time</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Interactive metrics visualization</p>\r\n        </div>\r\n        \r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {/* Chart Type Selector */}\r\n          <div className=\"flex gap-1 bg-gray-100 rounded-lg p-1\">\r\n            {([\"line\", \"area\", \"bar\"] as ChartType[]).map(type => (\r\n              <button\r\n                key={type}\r\n                onClick={() => setChartType(type)}\r\n                className={`px-3 py-1 text-sm rounded-md transition-colors ${\r\n                  chartType === type\r\n                    ? \"bg-white text-gray-900 shadow-sm\"\r\n                    : \"text-gray-600 hover:text-gray-900\"\r\n                }`}\r\n              >\r\n                {type.charAt(0).toUpperCase() + type.slice(1)}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Export Button */}\r\n          <button\r\n            onClick={exportData}\r\n            className=\"px-3 py-1 text-sm rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center gap-1\"\r\n          >\r\n            <span>üì•</span>\r\n            <span>Export CSV</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Metric Toggles */}\r\n      <div className=\"flex flex-wrap gap-2 mb-6\">\r\n        {(Object.keys(metricConfig) as MetricType[]).map(metric => {\r\n          const config = metricConfig[metric];\r\n          const isSelected = selectedMetrics.includes(metric);\r\n          return (\r\n            <button\r\n              key={metric}\r\n              onClick={() => toggleMetric(metric)}\r\n              className={`px-3 py-1.5 text-sm rounded-lg border-2 transition-all ${\r\n                isSelected\r\n                  ? \"border-current shadow-sm\"\r\n                  : \"border-gray-200 text-gray-600 hover:border-gray-300\"\r\n              }`}\r\n              style={isSelected ? { \r\n                borderColor: config.color,\r\n                backgroundColor: `${config.color}15`,\r\n                color: config.color\r\n              } : {}}\r\n            >\r\n              <span className=\"inline-block w-2 h-2 rounded-full mr-2\" style={{ backgroundColor: config.color }} />\r\n              {config.label}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <div className=\"h-80\">\r\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n          <ChartComponent data={data}>\r\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e5e7eb\" />\r\n            <XAxis \r\n              dataKey=\"date\" \r\n              tickFormatter={(date) => format(new Date(date), \"MMM dd\")}\r\n              stroke=\"#6b7280\"\r\n              style={{ fontSize: \"12px\" }}\r\n            />\r\n            <YAxis \r\n              stroke=\"#6b7280\"\r\n              style={{ fontSize: \"12px\" }}\r\n            />\r\n            <Tooltip content={<CustomTooltip />} />\r\n            <Legend \r\n              wrapperStyle={{ fontSize: \"14px\" }}\r\n              formatter={(value) => metricConfig[value as MetricType]?.label || value}\r\n            />\r\n            \r\n            {selectedMetrics.map(metric => {\r\n              const config = metricConfig[metric];\r\n              const dataKey = metric;\r\n              \r\n              if (chartType === \"line\") {\r\n                return (\r\n                  <Line\r\n                    key={metric}\r\n                    type=\"monotone\"\r\n                    dataKey={dataKey}\r\n                    stroke={config.color}\r\n                    strokeWidth={2}\r\n                    dot={{ fill: config.color, r: 4 }}\r\n                    activeDot={{ r: 6 }}\r\n                  />\r\n                );\r\n              } else if (chartType === \"area\") {\r\n                return (\r\n                  <Area\r\n                    key={metric}\r\n                    type=\"monotone\"\r\n                    dataKey={dataKey}\r\n                    stroke={config.color}\r\n                    fill={config.color}\r\n                    fillOpacity={0.2}\r\n                    strokeWidth={2}\r\n                  />\r\n                );\r\n              } else {\r\n                return (\r\n                  <Bar\r\n                    key={metric}\r\n                    dataKey={dataKey}\r\n                    fill={config.color}\r\n                    radius={[4, 4, 0, 0]}\r\n                  />\r\n                );\r\n              }\r\n            })}\r\n          </ChartComponent>\r\n        </ResponsiveContainer>\r\n      </div>\r\n\r\n      {/* Chart Stats Summary */}\r\n      <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-4\">\r\n          {selectedMetrics.map(metric => {\r\n            const config = metricConfig[metric];\r\n            const values = data.map(d => d[metric]);\r\n            const total = values.reduce((sum, v) => sum + v, 0);\r\n            const avg = total / values.length;\r\n            const max = Math.max(...values);\r\n            \r\n            return (\r\n              <div key={metric} className=\"text-center\">\r\n                <p className=\"text-xs text-gray-600 mb-1\">{config.label} Avg</p>\r\n                <p className=\"text-lg font-semibold\" style={{ color: config.color }}>\r\n                  {config.format(avg)}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 mt-1\">\r\n                  Max: {config.format(max)}\r\n                </p>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 923, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/campaign-table.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\ninterface CampaignTableProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n}\r\n\r\ninterface CampaignRow {\r\n  id: string;\r\n  grain: string;\r\n  name: string;\r\n  platformName: string;\r\n  spend: number;\r\n  conversions: number;\r\n  cpa: number | null;\r\n  roas: number | null;\r\n  waste: number;\r\n  wastePct: number;\r\n}\r\n\r\nexport function CampaignTable({ dateRange, platform, attributionModel }: CampaignTableProps) {\r\n  const [data, setData] = useState<CampaignRow[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [grain, setGrain] = useState<\"CAMPAIGN\" | \"ADSET\" | \"AD\">(\"CAMPAIGN\");\r\n  const [sortBy, setSortBy] = useState<\"spend\" | \"waste\" | \"cpa\" | \"roas\">(\"waste\");\r\n  const [sortOrder, setSortOrder] = useState<\"asc\" | \"desc\">(\"desc\");\r\n\r\n  useEffect(() => {\r\n    fetchTableData();\r\n  }, [dateRange, platform, attributionModel, grain]);\r\n\r\n  const fetchTableData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        grain,\r\n        ...(platform ? { platform } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/campaigns?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setData(result.data || []);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch campaign data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSort = (column: typeof sortBy) => {\r\n    if (sortBy === column) {\r\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortBy(column);\r\n      setSortOrder(\"desc\");\r\n    }\r\n  };\r\n\r\n  const sortedData = [...data].sort((a, b) => {\r\n    let aVal = 0, bVal = 0;\r\n    \r\n    switch (sortBy) {\r\n      case \"spend\":\r\n        aVal = a.spend;\r\n        bVal = b.spend;\r\n        break;\r\n      case \"waste\":\r\n        aVal = a.waste;\r\n        bVal = b.waste;\r\n        break;\r\n      case \"cpa\":\r\n        aVal = a.cpa || Infinity;\r\n        bVal = b.cpa || Infinity;\r\n        break;\r\n      case \"roas\":\r\n        aVal = a.roas || 0;\r\n        bVal = b.roas || 0;\r\n        break;\r\n    }\r\n\r\n    return sortOrder === \"asc\" ? aVal - bVal : bVal - aVal;\r\n  });\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-32 mb-4\"></div>\r\n          <div className=\"space-y-3\">\r\n            {[...Array(5)].map((_, i) => (\r\n              <div key={i} className=\"h-12 bg-gray-200 rounded\"></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow\">\r\n      <div className=\"p-6 border-b border-gray-200\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Performance by {grain}</h3>\r\n          <div className=\"flex gap-2\">\r\n            <button\r\n              onClick={() => setGrain(\"CAMPAIGN\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"CAMPAIGN\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Campaign\r\n            </button>\r\n            <button\r\n              onClick={() => setGrain(\"ADSET\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"ADSET\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Ad Set\r\n            </button>\r\n            <button\r\n              onClick={() => setGrain(\"AD\")}\r\n              className={`px-3 py-1 text-sm rounded-lg ${\r\n                grain === \"AD\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              Ad\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Name\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Platform\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"spend\")}\r\n              >\r\n                Spend {sortBy === \"spend\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Conversions\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"cpa\")}\r\n              >\r\n                CPA {sortBy === \"cpa\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"roas\")}\r\n              >\r\n                ROAS {sortBy === \"roas\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n              <th\r\n                className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:text-gray-700\"\r\n                onClick={() => handleSort(\"waste\")}\r\n              >\r\n                Waste {sortBy === \"waste\" && (sortOrder === \"asc\" ? \"‚Üë\" : \"‚Üì\")}\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {sortedData.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={7} className=\"px-6 py-12 text-center text-gray-500\">\r\n                  No data available for the selected period\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              sortedData.map((row) => {\r\n                const wasteLevel = row.wastePct > 75 ? \"high\" : row.wastePct > 50 ? \"medium\" : row.wastePct > 25 ? \"low\" : \"none\";\r\n                \r\n                return (\r\n                  <tr\r\n                    key={row.id}\r\n                    className={`hover:bg-gray-50 ${\r\n                      wasteLevel === \"high\" ? \"bg-red-50\" :\r\n                      wasteLevel === \"medium\" ? \"bg-orange-50\" :\r\n                      wasteLevel === \"low\" ? \"bg-yellow-50\" :\r\n                      \"\"\r\n                    }`}\r\n                  >\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">{row.name}</div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-500\">{row.platformName}</div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        ${(row.spend / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.conversions.toLocaleString(undefined, { maximumFractionDigits: 1 })}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.cpa ? `$${row.cpa.toFixed(2)}` : \"N/A\"}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {row.roas ? `${row.roas.toFixed(2)}x` : \"N/A\"}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                      <div className=\"flex items-center justify-end gap-2\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">\r\n                          ${(row.waste / 1_000_000).toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\r\n                        </div>\r\n                        {wasteLevel !== \"none\" && (\r\n                          <span\r\n                            className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${\r\n                              wasteLevel === \"high\" ? \"bg-red-100 text-red-800\" :\r\n                              wasteLevel === \"medium\" ? \"bg-orange-100 text-orange-800\" :\r\n                              \"bg-yellow-100 text-yellow-800\"\r\n                            }`}\r\n                          >\r\n                            {row.wastePct.toFixed(0)}%\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                );\r\n              })\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/dashboard-filters.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ninterface DashboardFiltersProps {\r\n  dateRange: { from: Date; to: Date };\r\n  platform: string | null;\r\n  attributionModel: string;\r\n  onDateRangeChange: (range: { from: Date; to: Date }) => void;\r\n  onPlatformChange: (platform: string | null) => void;\r\n  onAttributionModelChange: (model: string) => void;\r\n}\r\n\r\nconst PLATFORMS = [\r\n  { value: null, label: \"All Platforms\" },\r\n  { value: \"META_ADS\", label: \"Meta Ads\" },\r\n  { value: \"GOOGLE_ADS\", label: \"Google Ads\" },\r\n  { value: \"TIKTOK_ADS\", label: \"TikTok Ads\" },\r\n];\r\n\r\nconst ATTRIBUTION_MODELS = [\r\n  { value: \"LAST_TOUCH\", label: \"Last Touch\" },\r\n  { value: \"FIRST_TOUCH\", label: \"First Touch\" },\r\n  { value: \"LINEAR\", label: \"Linear\" },\r\n  { value: \"TIME_DECAY\", label: \"Time Decay\" },\r\n  { value: \"POSITION_BASED\", label: \"Position Based\" },\r\n];\r\n\r\nconst QUICK_RANGES = [\r\n  { label: \"Last 7 days\", days: 7 },\r\n  { label: \"Last 30 days\", days: 30 },\r\n  { label: \"Last 90 days\", days: 90 },\r\n];\r\n\r\nexport function DashboardFilters({\r\n  dateRange,\r\n  platform,\r\n  attributionModel,\r\n  onDateRangeChange,\r\n  onPlatformChange,\r\n  onAttributionModelChange,\r\n}: DashboardFiltersProps) {\r\n  const [showCustomRange, setShowCustomRange] = useState(false);\r\n\r\n  const handleQuickRange = (days: number) => {\r\n    const to = new Date();\r\n    const from = new Date(Date.now() - days * 24 * 60 * 60 * 1000);\r\n    onDateRangeChange({ from, to });\r\n    setShowCustomRange(false);\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return date.toISOString().split(\"T\")[0];\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow p-4\">\r\n      <div className=\"flex flex-wrap items-center gap-4\">\r\n        {/* Date Range */}\r\n        <div className=\"flex-1 min-w-[200px]\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Date Range\r\n          </label>\r\n          <div className=\"flex gap-2\">\r\n            {QUICK_RANGES.map((range) => (\r\n              <button\r\n                key={range.days}\r\n                onClick={() => handleQuickRange(range.days)}\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n              >\r\n                {range.label}\r\n              </button>\r\n            ))}\r\n            <button\r\n              onClick={() => setShowCustomRange(!showCustomRange)}\r\n              className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50\"\r\n            >\r\n              Custom\r\n            </button>\r\n          </div>\r\n          {showCustomRange && (\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.from)}\r\n                onChange={(e) =>\r\n                  onDateRangeChange({\r\n                    from: new Date(e.target.value),\r\n                    to: dateRange.to,\r\n                  })\r\n                }\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg\"\r\n              />\r\n              <span className=\"self-center text-gray-500\">to</span>\r\n              <input\r\n                type=\"date\"\r\n                value={formatDate(dateRange.to)}\r\n                onChange={(e) =>\r\n                  onDateRangeChange({\r\n                    from: dateRange.from,\r\n                    to: new Date(e.target.value),\r\n                  })\r\n                }\r\n                className=\"px-3 py-2 text-sm border border-gray-300 rounded-lg\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Platform Filter */}\r\n        <div className=\"w-48\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Platform\r\n          </label>\r\n          <select\r\n            value={platform || \"\"}\r\n            onChange={(e) => onPlatformChange(e.target.value || null)}\r\n            className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {PLATFORMS.map((p) => (\r\n              <option key={p.value || \"all\"} value={p.value || \"\"}>\r\n                {p.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Attribution Model */}\r\n        <div className=\"w-48\">\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Attribution Model\r\n          </label>\r\n          <select\r\n            value={attributionModel}\r\n            onChange={(e) => onAttributionModelChange(e.target.value)}\r\n            className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\r\n          >\r\n            {ATTRIBUTION_MODELS.map((m) => (\r\n              <option key={m.value} value={m.value}>\r\n                {m.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1647, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/comparison-mode.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { format, subDays, startOfDay, endOfDay } from \"date-fns\";\r\n\r\n/**\r\n * Comparison Mode Component\r\n * \r\n * Side-by-side comparison of two date ranges\r\n * Features:\r\n * - Compare current vs previous period\r\n * - Compare custom date ranges\r\n * - Visual diff indicators\r\n * - Percentage change calculations\r\n */\r\n\r\ninterface ComparisonModeProps {\r\n  attributionModel: string;\r\n  platform: string | null;\r\n}\r\n\r\ninterface PeriodData {\r\n  spend: number;\r\n  conversions: number;\r\n  revenue: number;\r\n  roas: number;\r\n  cpa: number;\r\n  impressions: number;\r\n  clicks: number;\r\n  ctr: number;\r\n}\r\n\r\ninterface ComparisonData {\r\n  periodA: PeriodData;\r\n  periodB: PeriodData;\r\n  changes: Record<keyof PeriodData, { value: number; percentage: number }>;\r\n}\r\n\r\nexport function ComparisonMode({ attributionModel, platform }: ComparisonModeProps) {\r\n  const [periodA, setPeriodA] = useState({\r\n    from: startOfDay(subDays(new Date(), 30)),\r\n    to: endOfDay(subDays(new Date(), 1)),\r\n    label: \"Last 30 Days\",\r\n  });\r\n  \r\n  const [periodB, setPeriodB] = useState({\r\n    from: startOfDay(subDays(new Date(), 60)),\r\n    to: endOfDay(subDays(new Date(), 31)),\r\n    label: \"Previous 30 Days\",\r\n  });\r\n\r\n  const [data, setData] = useState<ComparisonData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetchComparisonData();\r\n  }, [periodA, periodB, attributionModel, platform]);\r\n\r\n  const fetchComparisonData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const [responseA, responseB] = await Promise.all([\r\n        fetch(`/api/dashboard/kpis?${new URLSearchParams({\r\n          fromDate: periodA.from.toISOString(),\r\n          toDate: periodA.to.toISOString(),\r\n          attributionModel,\r\n          ...(platform ? { platform } : {}),\r\n        })}`),\r\n        fetch(`/api/dashboard/kpis?${new URLSearchParams({\r\n          fromDate: periodB.from.toISOString(),\r\n          toDate: periodB.to.toISOString(),\r\n          attributionModel,\r\n          ...(platform ? { platform } : {}),\r\n        })}`),\r\n      ]);\r\n\r\n      if (responseA.ok && responseB.ok) {\r\n        const dataA = await responseA.json();\r\n        const dataB = await responseB.json();\r\n\r\n        const periodAData: PeriodData = {\r\n          spend: dataA.totalSpend / 1_000_000,\r\n          conversions: dataA.totalConversions,\r\n          revenue: (dataA.totalSpend * dataA.avgRoas) / 1_000_000,\r\n          roas: dataA.avgRoas,\r\n          cpa: dataA.avgCpa,\r\n          impressions: dataA.totalImpressions || 0,\r\n          clicks: dataA.totalClicks || 0,\r\n          ctr: dataA.avgCtr || 0,\r\n        };\r\n\r\n        const periodBData: PeriodData = {\r\n          spend: dataB.totalSpend / 1_000_000,\r\n          conversions: dataB.totalConversions,\r\n          revenue: (dataB.totalSpend * dataB.avgRoas) / 1_000_000,\r\n          roas: dataB.avgRoas,\r\n          cpa: dataB.avgCpa,\r\n          impressions: dataB.totalImpressions || 0,\r\n          clicks: dataB.totalClicks || 0,\r\n          ctr: dataB.avgCtr || 0,\r\n        };\r\n\r\n        const changes = Object.keys(periodAData).reduce((acc, key) => {\r\n          const k = key as keyof PeriodData;\r\n          const valueA = periodAData[k];\r\n          const valueB = periodBData[k];\r\n          const diff = valueA - valueB;\r\n          const percentage = valueB !== 0 ? (diff / valueB) * 100 : 0;\r\n          \r\n          acc[k] = { value: diff, percentage };\r\n          return acc;\r\n        }, {} as Record<keyof PeriodData, { value: number; percentage: number }>);\r\n\r\n        setData({\r\n          periodA: periodAData,\r\n          periodB: periodBData,\r\n          changes,\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch comparison data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const quickPresets = [\r\n    {\r\n      label: \"Last 7 vs Previous 7\",\r\n      periodA: { from: startOfDay(subDays(new Date(), 7)), to: endOfDay(new Date()), label: \"Last 7 Days\" },\r\n      periodB: { from: startOfDay(subDays(new Date(), 14)), to: endOfDay(subDays(new Date(), 8)), label: \"Previous 7 Days\" },\r\n    },\r\n    {\r\n      label: \"Last 30 vs Previous 30\",\r\n      periodA: { from: startOfDay(subDays(new Date(), 30)), to: endOfDay(new Date()), label: \"Last 30 Days\" },\r\n      periodB: { from: startOfDay(subDays(new Date(), 60)), to: endOfDay(subDays(new Date(), 31)), label: \"Previous 30 Days\" },\r\n    },\r\n    {\r\n      label: \"This Month vs Last Month\",\r\n      periodA: { from: startOfDay(new Date(new Date().getFullYear(), new Date().getMonth(), 1)), to: endOfDay(new Date()), label: \"This Month\" },\r\n      periodB: { from: startOfDay(new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1)), to: endOfDay(new Date(new Date().getFullYear(), new Date().getMonth(), 0)), label: \"Last Month\" },\r\n    },\r\n  ];\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n        <div className=\"animate-pulse\">\r\n          <div className=\"h-6 bg-gray-200 rounded w-48 mb-6\"></div>\r\n          <div className=\"grid grid-cols-2 gap-6\">\r\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n            <div className=\"h-64 bg-gray-200 rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!data) return null;\r\n\r\n  const metrics: Array<{ key: keyof PeriodData; label: string; format: (v: number) => string; invertChange?: boolean }> = [\r\n    { key: \"spend\", label: \"Spend\", format: (v) => `$${v.toFixed(2)}`, invertChange: true },\r\n    { key: \"conversions\", label: \"Conversions\", format: (v) => v.toFixed(1) },\r\n    { key: \"revenue\", label: \"Revenue\", format: (v) => `$${v.toFixed(2)}` },\r\n    { key: \"roas\", label: \"ROAS\", format: (v) => `${v.toFixed(2)}x` },\r\n    { key: \"cpa\", label: \"CPA\", format: (v) => `$${v.toFixed(2)}`, invertChange: true },\r\n    { key: \"impressions\", label: \"Impressions\", format: (v) => v.toLocaleString() },\r\n    { key: \"clicks\", label: \"Clicks\", format: (v) => v.toLocaleString() },\r\n    { key: \"ctr\", label: \"CTR\", format: (v) => `${v.toFixed(2)}%` },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-semibold text-gray-900\">Period Comparison</h3>\r\n          <p className=\"text-sm text-gray-600 mt-1\">Compare performance across different time periods</p>\r\n        </div>\r\n        \r\n        {/* Quick Presets */}\r\n        <div className=\"flex gap-2\">\r\n          {quickPresets.map((preset, idx) => (\r\n            <button\r\n              key={idx}\r\n              onClick={() => {\r\n                setPeriodA(preset.periodA);\r\n                setPeriodB(preset.periodB);\r\n              }}\r\n              className=\"px-3 py-1.5 text-sm rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors\"\r\n            >\r\n              {preset.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Period Labels */}\r\n      <div className=\"grid grid-cols-2 gap-6 mb-6\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center px-4 py-2 rounded-lg bg-blue-100 text-blue-900 font-semibold\">\r\n            <span className=\"mr-2\">üìÖ</span>\r\n            {periodA.label}\r\n          </div>\r\n          <p className=\"text-xs text-gray-600 mt-2\">\r\n            {format(periodA.from, \"MMM dd, yyyy\")} - {format(periodA.to, \"MMM dd, yyyy\")}\r\n          </p>\r\n        </div>\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center px-4 py-2 rounded-lg bg-purple-100 text-purple-900 font-semibold\">\r\n            <span className=\"mr-2\">üìÖ</span>\r\n            {periodB.label}\r\n          </div>\r\n          <p className=\"text-xs text-gray-600 mt-2\">\r\n            {format(periodB.from, \"MMM dd, yyyy\")} - {format(periodB.to, \"MMM dd, yyyy\")}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Comparison Table */}\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full\">\r\n          <thead>\r\n            <tr className=\"border-b-2 border-gray-200\">\r\n              <th className=\"text-left py-3 px-4 font-semibold text-gray-900\">Metric</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-blue-900\">{periodA.label}</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-purple-900\">{periodB.label}</th>\r\n              <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Change</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {metrics.map((metric) => {\r\n              const change = data.changes[metric.key];\r\n              const isPositive = change.percentage > 0;\r\n              const isGood = metric.invertChange ? !isPositive : isPositive;\r\n              \r\n              return (\r\n                <tr key={metric.key} className=\"border-b border-gray-100 hover:bg-gray-50 transition-colors\">\r\n                  <td className=\"py-3 px-4 font-medium text-gray-900\">{metric.label}</td>\r\n                  <td className=\"py-3 px-4 text-right text-blue-900 font-semibold\">\r\n                    {metric.format(data.periodA[metric.key])}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right text-purple-900 font-semibold\">\r\n                    {metric.format(data.periodB[metric.key])}\r\n                  </td>\r\n                  <td className=\"py-3 px-4 text-right\">\r\n                    <div className={`inline-flex items-center gap-1 px-2 py-1 rounded-lg text-sm font-semibold ${\r\n                      Math.abs(change.percentage) < 0.1 \r\n                        ? \"bg-gray-100 text-gray-700\"\r\n                        : isGood \r\n                          ? \"bg-green-100 text-green-700\" \r\n                          : \"bg-red-100 text-red-700\"\r\n                    }`}>\r\n                      {Math.abs(change.percentage) < 0.1 ? (\r\n                        <span>‚Üí</span>\r\n                      ) : isPositive ? (\r\n                        <span>‚Üë</span>\r\n                      ) : (\r\n                        <span>‚Üì</span>\r\n                      )}\r\n                      <span>{Math.abs(change.percentage).toFixed(1)}%</span>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Summary Insights */}\r\n      <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\r\n        <h4 className=\"font-semibold text-gray-900 mb-2\">üìä Key Insights</h4>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm\">\r\n          {data.changes.roas.percentage > 5 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>ROAS improved by {data.changes.roas.percentage.toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.cpa.percentage < -5 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>CPA decreased by {Math.abs(data.changes.cpa.percentage).toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.conversions.percentage > 10 && (\r\n            <div className=\"flex items-center gap-2 text-green-700\">\r\n              <span>‚úì</span>\r\n              <span>Conversions up {data.changes.conversions.percentage.toFixed(1)}%</span>\r\n            </div>\r\n          )}\r\n          {data.changes.spend.percentage > 20 && (\r\n            <div className=\"flex items-center gap-2 text-orange-700\">\r\n              <span>‚ö†</span>\r\n              <span>Spend increased significantly ({data.changes.spend.percentage.toFixed(1)}%)</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/drill-down-modal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { format } from \"date-fns\";\r\nimport {\r\n  BarChart,\r\n  Bar,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from \"recharts\";\r\n\r\n/**\r\n * Drill-Down Modal Component\r\n * \r\n * Detailed breakdown when clicking on chart data points or metrics\r\n * Features:\r\n * - Campaign-level breakdown\r\n * - Ad set and ad-level details\r\n * - Geographic distribution\r\n * - Device breakdown\r\n * - Time-of-day analysis\r\n */\r\n\r\ninterface DrillDownModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  data: {\r\n    type: \"campaign\" | \"platform\" | \"date\" | \"metric\";\r\n    id?: string;\r\n    name: string;\r\n    date?: string;\r\n    metric?: string;\r\n    value?: number;\r\n  };\r\n  dateRange: { from: Date; to: Date };\r\n  attributionModel: string;\r\n}\r\n\r\ninterface DrillDownData {\r\n  summary: {\r\n    spend: number;\r\n    conversions: number;\r\n    revenue: number;\r\n    roas: number;\r\n    cpa: number;\r\n    clicks: number;\r\n    impressions: number;\r\n  };\r\n  breakdown: {\r\n    byCampaign?: Array<{ name: string; spend: number; conversions: number; roas: number }>;\r\n    byAdSet?: Array<{ name: string; spend: number; conversions: number; roas: number }>;\r\n    byAd?: Array<{ name: string; spend: number; conversions: number; ctr: number }>;\r\n    byDevice?: Array<{ device: string; spend: number; conversions: number }>;\r\n    byHour?: Array<{ hour: number; conversions: number; spend: number }>;\r\n  };\r\n}\r\n\r\nconst COLORS = [\"#3b82f6\", \"#22c55e\", \"#f59e0b\", \"#ec4899\", \"#8b5cf6\", \"#ef4444\"];\r\n\r\nexport function DrillDownModal({ isOpen, onClose, data, dateRange, attributionModel }: DrillDownModalProps) {\r\n  const [drillDownData, setDrillDownData] = useState<DrillDownData | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [activeTab, setActiveTab] = useState<\"campaigns\" | \"adsets\" | \"ads\" | \"devices\" | \"time\">(\"campaigns\");\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      fetchDrillDownData();\r\n    }\r\n  }, [isOpen, data, dateRange, attributionModel]);\r\n\r\n  const fetchDrillDownData = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const params = new URLSearchParams({\r\n        fromDate: dateRange.from.toISOString(),\r\n        toDate: dateRange.to.toISOString(),\r\n        attributionModel,\r\n        type: data.type,\r\n        ...(data.id ? { id: data.id } : {}),\r\n        ...(data.date ? { date: data.date } : {}),\r\n      });\r\n\r\n      const response = await fetch(`/api/dashboard/drill-down?${params}`);\r\n      if (response.ok) {\r\n        const result = await response.json();\r\n        setDrillDownData(result);\r\n      } else {\r\n        // Mock data for demonstration\r\n        setDrillDownData({\r\n          summary: {\r\n            spend: 12500,\r\n            conversions: 85,\r\n            revenue: 42000,\r\n            roas: 3.36,\r\n            cpa: 147.06,\r\n            clicks: 1250,\r\n            impressions: 45000,\r\n          },\r\n          breakdown: {\r\n            byCampaign: [\r\n              { name: \"Summer Sale 2024\", spend: 5000, conversions: 40, roas: 4.2 },\r\n              { name: \"Brand Awareness Q4\", spend: 4000, conversions: 25, roas: 3.1 },\r\n              { name: \"Retargeting Campaign\", spend: 3500, conversions: 20, roas: 2.8 },\r\n            ],\r\n            byAdSet: [\r\n              { name: \"Lookalike Audience 1%\", spend: 3000, conversions: 25, roas: 3.8 },\r\n              { name: \"Interest: Fitness\", spend: 2500, conversions: 20, roas: 3.5 },\r\n              { name: \"Custom Audience - Website\", spend: 2000, conversions: 15, roas: 3.2 },\r\n            ],\r\n            byAd: [\r\n              { name: \"Video Ad - Product Demo\", spend: 2000, conversions: 18, ctr: 2.5 },\r\n              { name: \"Carousel - Top Products\", spend: 1800, conversions: 15, ctr: 2.2 },\r\n              { name: \"Single Image - Discount\", spend: 1500, conversions: 12, ctr: 1.9 },\r\n            ],\r\n            byDevice: [\r\n              { device: \"Mobile\", spend: 7000, conversions: 50 },\r\n              { device: \"Desktop\", spend: 4000, conversions: 28 },\r\n              { device: \"Tablet\", spend: 1500, conversions: 7 },\r\n            ],\r\n            byHour: Array.from({ length: 24 }, (_, i) => ({\r\n              hour: i,\r\n              conversions: Math.floor(Math.random() * 10) + 1,\r\n              spend: Math.floor(Math.random() * 1000) + 200,\r\n            })),\r\n          },\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Failed to fetch drill-down data:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4\">\r\n      <div className=\"bg-white rounded-lg shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-hidden flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold\">{data.name}</h2>\r\n              <p className=\"text-blue-100 mt-1\">\r\n                Detailed breakdown ‚Ä¢ {format(dateRange.from, \"MMM dd\")} - {format(dateRange.to, \"MMM dd, yyyy\")}\r\n              </p>\r\n            </div>\r\n            <button\r\n              onClick={onClose}\r\n              className=\"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors\"\r\n            >\r\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-6\">\r\n          {loading ? (\r\n            <div className=\"flex items-center justify-center h-64\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n            </div>\r\n          ) : drillDownData ? (\r\n            <>\r\n              {/* Summary Cards */}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6\">\r\n                {[\r\n                  { label: \"Spend\", value: `$${drillDownData.summary.spend.toLocaleString()}`, color: \"blue\" },\r\n                  { label: \"Conversions\", value: drillDownData.summary.conversions.toLocaleString(), color: \"green\" },\r\n                  { label: \"ROAS\", value: `${drillDownData.summary.roas.toFixed(2)}x`, color: \"purple\" },\r\n                  { label: \"CPA\", value: `$${drillDownData.summary.cpa.toFixed(2)}`, color: \"orange\" },\r\n                ].map((card, idx) => (\r\n                  <div key={idx} className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-4 border border-gray-200\">\r\n                    <p className=\"text-sm text-gray-600 mb-1\">{card.label}</p>\r\n                    <p className={`text-2xl font-bold text-${card.color}-600`}>{card.value}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Tabs */}\r\n              <div className=\"flex gap-2 mb-6 border-b border-gray-200\">\r\n                {[\r\n                  { key: \"campaigns\", label: \"Campaigns\", icon: \"üìä\" },\r\n                  { key: \"adsets\", label: \"Ad Sets\", icon: \"üéØ\" },\r\n                  { key: \"ads\", label: \"Ads\", icon: \"üì±\" },\r\n                  { key: \"devices\", label: \"Devices\", icon: \"üíª\" },\r\n                  { key: \"time\", label: \"Time Analysis\", icon: \"‚è∞\" },\r\n                ].map((tab) => (\r\n                  <button\r\n                    key={tab.key}\r\n                    onClick={() => setActiveTab(tab.key as any)}\r\n                    className={`px-4 py-2 text-sm font-medium transition-colors ${\r\n                      activeTab === tab.key\r\n                        ? \"text-blue-600 border-b-2 border-blue-600\"\r\n                        : \"text-gray-600 hover:text-gray-900\"\r\n                    }`}\r\n                  >\r\n                    <span className=\"mr-2\">{tab.icon}</span>\r\n                    {tab.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Tab Content */}\r\n              <div className=\"space-y-6\">\r\n                {activeTab === \"campaigns\" && drillDownData.breakdown.byCampaign && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Campaign Performance</h3>\r\n                    <div className=\"overflow-x-auto\">\r\n                      <table className=\"w-full\">\r\n                        <thead className=\"bg-gray-50\">\r\n                          <tr>\r\n                            <th className=\"text-left py-3 px-4 font-semibold text-gray-900\">Campaign</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Spend</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">Conversions</th>\r\n                            <th className=\"text-right py-3 px-4 font-semibold text-gray-900\">ROAS</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {drillDownData.breakdown.byCampaign.map((campaign, idx) => (\r\n                            <tr key={idx} className=\"border-b border-gray-100 hover:bg-gray-50\">\r\n                              <td className=\"py-3 px-4 font-medium text-gray-900\">{campaign.name}</td>\r\n                              <td className=\"py-3 px-4 text-right text-gray-900\">${campaign.spend.toLocaleString()}</td>\r\n                              <td className=\"py-3 px-4 text-right text-gray-900\">{campaign.conversions}</td>\r\n                              <td className=\"py-3 px-4 text-right\">\r\n                                <span className={`font-semibold ${campaign.roas >= 3 ? \"text-green-600\" : \"text-orange-600\"}`}>\r\n                                  {campaign.roas.toFixed(2)}x\r\n                                </span>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"devices\" && drillDownData.breakdown.byDevice && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Device Breakdown</h3>\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <div className=\"h-64\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                          <PieChart>\r\n                            <Pie\r\n                              data={drillDownData.breakdown.byDevice}\r\n                              dataKey=\"spend\"\r\n                              nameKey=\"device\"\r\n                              cx=\"50%\"\r\n                              cy=\"50%\"\r\n                              outerRadius={80}\r\n                              label={(entry: any) => `${entry.device}: $${entry.spend.toLocaleString()}`}\r\n                            >\r\n                              {drillDownData.breakdown.byDevice.map((entry, index) => (\r\n                                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                              ))}\r\n                            </Pie>\r\n                            <Tooltip />\r\n                          </PieChart>\r\n                        </ResponsiveContainer>\r\n                      </div>\r\n                      <div className=\"space-y-3\">\r\n                        {drillDownData.breakdown.byDevice.map((device, idx) => (\r\n                          <div key={idx} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div className=\"w-4 h-4 rounded-full\" style={{ backgroundColor: COLORS[idx % COLORS.length] }}></div>\r\n                              <span className=\"font-medium text-gray-900\">{device.device}</span>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                              <p className=\"font-semibold text-gray-900\">{device.conversions} conversions</p>\r\n                              <p className=\"text-sm text-gray-600\">${device.spend.toLocaleString()} spend</p>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeTab === \"time\" && drillDownData.breakdown.byHour && (\r\n                  <div>\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Performance by Hour of Day</h3>\r\n                    <div className=\"h-80\">\r\n                      <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                        <BarChart data={drillDownData.breakdown.byHour}>\r\n                          <CartesianGrid strokeDasharray=\"3 3\" />\r\n                          <XAxis \r\n                            dataKey=\"hour\" \r\n                            tickFormatter={(hour) => `${hour}:00`}\r\n                          />\r\n                          <YAxis yAxisId=\"left\" />\r\n                          <YAxis yAxisId=\"right\" orientation=\"right\" />\r\n                          <Tooltip \r\n                            labelFormatter={(hour) => `${hour}:00 - ${hour}:59`}\r\n                            formatter={(value: any, name?: string) => [\r\n                              name === \"conversions\" ? value : `$${value}`,\r\n                              name === \"conversions\" ? \"Conversions\" : \"Spend\"\r\n                            ]}\r\n                          />\r\n                          <Bar yAxisId=\"left\" dataKey=\"conversions\" fill=\"#22c55e\" name=\"Conversions\" />\r\n                          <Bar yAxisId=\"right\" dataKey=\"spend\" fill=\"#3b82f6\" name=\"Spend\" />\r\n                        </BarChart>\r\n                      </ResponsiveContainer>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600 mt-4 text-center\">\r\n                      üí° Peak conversion hours: {drillDownData.breakdown.byHour\r\n                        .sort((a, b) => b.conversions - a.conversions)\r\n                        .slice(0, 3)\r\n                        .map(h => `${h.hour}:00`)\r\n                        .join(\", \")}\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center py-12 text-gray-500\">\r\n              No detailed data available\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"bg-gray-50 px-6 py-4 border-t border-gray-200\">\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/components/date-range-presets.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { startOfDay, endOfDay, subDays, startOfWeek, endOfWeek, startOfMonth, endOfMonth, subMonths, subWeeks } from \"date-fns\";\r\n\r\n/**\r\n * Date Range Presets Component\r\n * \r\n * Quick date range selection with common presets\r\n * Features:\r\n * - Today, Yesterday, Last 7/30/90 days\r\n * - This/Last Week, Month, Quarter\r\n * - Custom date range picker\r\n * - Comparison period auto-calculation\r\n */\r\n\r\nexport interface DateRangePreset {\r\n  label: string;\r\n  getValue: () => { from: Date; to: Date };\r\n  icon?: string;\r\n  category: \"quick\" | \"week\" | \"month\" | \"custom\";\r\n}\r\n\r\nexport const dateRangePresets: DateRangePreset[] = [\r\n  // Quick Ranges\r\n  {\r\n    label: \"Today\",\r\n    getValue: () => ({\r\n      from: startOfDay(new Date()),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Yesterday\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 1)),\r\n      to: endOfDay(subDays(new Date(), 1)),\r\n    }),\r\n    icon: \"üìÜ\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 7 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 7)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìä\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 30 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 30)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìà\",\r\n    category: \"quick\",\r\n  },\r\n  {\r\n    label: \"Last 90 Days\",\r\n    getValue: () => ({\r\n      from: startOfDay(subDays(new Date(), 90)),\r\n      to: endOfDay(new Date()),\r\n    }),\r\n    icon: \"üìâ\",\r\n    category: \"quick\",\r\n  },\r\n  \r\n  // Week Ranges\r\n  {\r\n    label: \"This Week\",\r\n    getValue: () => ({\r\n      from: startOfWeek(new Date(), { weekStartsOn: 1 }),\r\n      to: endOfWeek(new Date(), { weekStartsOn: 1 }),\r\n    }),\r\n    icon: \"üóìÔ∏è\",\r\n    category: \"week\",\r\n  },\r\n  {\r\n    label: \"Last Week\",\r\n    getValue: () => ({\r\n      from: startOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\r\n      to: endOfWeek(subWeeks(new Date(), 1), { weekStartsOn: 1 }),\r\n    }),\r\n    icon: \"üóìÔ∏è\",\r\n    category: \"week\",\r\n  },\r\n  \r\n  // Month Ranges\r\n  {\r\n    label: \"This Month\",\r\n    getValue: () => ({\r\n      from: startOfMonth(new Date()),\r\n      to: endOfMonth(new Date()),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"month\",\r\n  },\r\n  {\r\n    label: \"Last Month\",\r\n    getValue: () => ({\r\n      from: startOfMonth(subMonths(new Date(), 1)),\r\n      to: endOfMonth(subMonths(new Date(), 1)),\r\n    }),\r\n    icon: \"üìÖ\",\r\n    category: \"month\",\r\n  },\r\n  {\r\n    label: \"Last 3 Months\",\r\n    getValue: () => ({\r\n      from: startOfMonth(subMonths(new Date(), 3)),\r\n      to: endOfMonth(new Date()),\r\n    }),\r\n    icon: \"üìä\",\r\n    category: \"month\",\r\n  },\r\n];\r\n\r\ninterface DateRangePresetsProps {\r\n  onSelect: (range: { from: Date; to: Date }) => void;\r\n  currentRange?: { from: Date; to: Date };\r\n}\r\n\r\nexport function DateRangePresets({ onSelect, currentRange }: DateRangePresetsProps) {\r\n  const categories = [\r\n    { key: \"quick\", label: \"Quick Select\" },\r\n    { key: \"week\", label: \"Weekly\" },\r\n    { key: \"month\", label: \"Monthly\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Date Range Presets</h3>\r\n      \r\n      <div className=\"space-y-6\">\r\n        {categories.map((category) => {\r\n          const presets = dateRangePresets.filter(p => p.category === category.key);\r\n          \r\n          return (\r\n            <div key={category.key}>\r\n              <h4 className=\"text-sm font-medium text-gray-700 mb-3\">{category.label}</h4>\r\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2\">\r\n                {presets.map((preset) => {\r\n                  const range = preset.getValue();\r\n                  const isActive = currentRange && \r\n                    range.from.getTime() === currentRange.from.getTime() &&\r\n                    range.to.getTime() === currentRange.to.getTime();\r\n                  \r\n                  return (\r\n                    <button\r\n                      key={preset.label}\r\n                      onClick={() => onSelect(range)}\r\n                      className={`px-3 py-2 text-sm rounded-lg border-2 transition-all ${\r\n                        isActive\r\n                          ? \"border-blue-600 bg-blue-50 text-blue-900 font-semibold shadow-sm\"\r\n                          : \"border-gray-200 text-gray-700 hover:border-blue-300 hover:bg-blue-50\"\r\n                      }`}\r\n                    >\r\n                      {preset.icon && <span className=\"mr-1\">{preset.icon}</span>}\r\n                      {preset.label}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Custom Range Info */}\r\n      <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <span className=\"text-2xl\">üí°</span>\r\n          <div className=\"text-sm\">\r\n            <p className=\"font-medium text-gray-900 mb-1\">Pro Tip</p>\r\n            <p className=\"text-gray-700\">\r\n              Use the date picker in the filters above for custom date ranges. \r\n              Presets automatically calculate comparison periods for trend analysis.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/**\r\n * Calculate comparison period for a given date range\r\n * Returns the previous period of equal length\r\n */\r\nexport function getComparisonPeriod(range: { from: Date; to: Date }): { from: Date; to: Date } {\r\n  const durationMs = range.to.getTime() - range.from.getTime();\r\n  const durationDays = Math.ceil(durationMs / (1000 * 60 * 60 * 24));\r\n  \r\n  return {\r\n    from: startOfDay(subDays(range.from, durationDays)),\r\n    to: endOfDay(subDays(range.to, durationDays)),\r\n  };\r\n}\r\n\r\n/**\r\n * Get preset label for a date range if it matches\r\n */\r\nexport function getPresetLabel(range: { from: Date; to: Date }): string | null {\r\n  for (const preset of dateRangePresets) {\r\n    const presetRange = preset.getValue();\r\n    if (\r\n      presetRange.from.getTime() === range.from.getTime() &&\r\n      presetRange.to.getTime() === range.to.getTime()\r\n    ) {\r\n      return preset.label;\r\n    }\r\n  }\r\n  return null;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3432, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/GGPC/OneDrive/Desktop/Optiq/CascadeProjects/windsurf-project/apps/frontend/src/app/app/dashboard/advanced-dashboard-client.tsx"],"sourcesContent":["\"use client\";\r\n\r\n/**\r\n * Advanced Dashboard Client Component\r\n * \r\n * Complete dashboard with all advanced features:\r\n * - Real-time updates with WebSocket support\r\n * - Period comparison mode\r\n * - Drill-down capabilities\r\n * - Date range presets\r\n * - Enhanced visualizations\r\n * - Export functionality\r\n */\r\n\r\nimport { useState } from \"react\";\r\nimport { EnhancedKPICards } from \"./components/enhanced-kpi-cards\";\r\nimport { EnhancedChart } from \"./components/enhanced-chart\";\r\nimport { CampaignTable } from \"./components/campaign-table\";\r\nimport { DashboardFilters } from \"./components/dashboard-filters\";\r\nimport { ComparisonMode } from \"./components/comparison-mode\";\r\nimport { DrillDownModal } from \"./components/drill-down-modal\";\r\nimport { DateRangePresets } from \"./components/date-range-presets\";\r\nimport { subDays, startOfDay, endOfDay } from \"date-fns\";\r\n\r\ntype ViewMode = \"overview\" | \"comparison\" | \"presets\";\r\n\r\nexport function AdvancedDashboardClient() {\r\n  const [dateRange, setDateRange] = useState<{ from: Date; to: Date }>({\r\n    from: startOfDay(subDays(new Date(), 30)),\r\n    to: endOfDay(new Date()),\r\n  });\r\n  const [platform, setPlatform] = useState<string | null>(null);\r\n  const [attributionModel, setAttributionModel] = useState<string>(\"LAST_TOUCH\");\r\n  const [viewMode, setViewMode] = useState<ViewMode>(\"overview\");\r\n  \r\n  // Drill-down state\r\n  const [drillDownData, setDrillDownData] = useState<{\r\n    isOpen: boolean;\r\n    data: any;\r\n  }>({\r\n    isOpen: false,\r\n    data: null,\r\n  });\r\n\r\n  const handleDrillDown = (data: any) => {\r\n    setDrillDownData({\r\n      isOpen: true,\r\n      data,\r\n    });\r\n  };\r\n\r\n  const closeDrillDown = () => {\r\n    setDrillDownData({\r\n      isOpen: false,\r\n      data: null,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* Page Header with View Mode Switcher */}\r\n      <div className=\"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600 bg-clip-text text-transparent\">\r\n            Dashboard\r\n          </h1>\r\n          <p className=\"text-gray-600 mt-1\">Real-time marketing performance analytics</p>\r\n        </div>\r\n        \r\n        {/* View Mode Switcher */}\r\n        <div className=\"flex gap-1 bg-white rounded-xl p-1 shadow-md\">\r\n          {[\r\n            { key: \"overview\", label: \"Overview\", icon: \"üìä\" },\r\n            { key: \"comparison\", label: \"Compare\", icon: \"‚öñÔ∏è\" },\r\n            { key: \"presets\", label: \"Presets\", icon: \"‚ö°\" },\r\n          ].map((mode) => (\r\n            <button\r\n              key={mode.key}\r\n              onClick={() => setViewMode(mode.key as ViewMode)}\r\n              className={`px-4 py-2 text-sm rounded-lg transition-all ${\r\n                viewMode === mode.key\r\n                  ? \"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md\"\r\n                  : \"text-gray-600 hover:bg-gray-50\"\r\n              }`}\r\n            >\r\n              <span className=\"mr-1\">{mode.icon}</span>\r\n              {mode.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div>\r\n        {/* Filters - Always visible */}\r\n        <div className=\"mb-6\">\r\n          <DashboardFilters\r\n            dateRange={dateRange}\r\n            platform={platform}\r\n            attributionModel={attributionModel}\r\n            onDateRangeChange={setDateRange}\r\n            onPlatformChange={setPlatform}\r\n            onAttributionModelChange={setAttributionModel}\r\n          />\r\n        </div>\r\n\r\n        {/* View-specific content */}\r\n        {viewMode === \"overview\" && (\r\n          <div className=\"space-y-6\">\r\n            {/* Enhanced KPI Cards with real-time updates */}\r\n            <EnhancedKPICards\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Enhanced Interactive Chart */}\r\n            <EnhancedChart\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Campaign Table */}\r\n            <CampaignTable\r\n              dateRange={dateRange}\r\n              platform={platform}\r\n              attributionModel={attributionModel}\r\n            />\r\n\r\n            {/* Quick Stats Footer */}\r\n            <div className=\"glass backdrop-blur-xl bg-white/70 rounded-2xl shadow-xl p-6 border border-white/20\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üöÄ Advanced Features</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">üîÑ</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-blue-900\">Real-time Updates</p>\r\n                    <p className=\"text-sm text-blue-700\">Auto-refresh every 30s</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">‚öñÔ∏è</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-purple-900\">Period Comparison</p>\r\n                    <p className=\"text-sm text-purple-700\">Side-by-side analysis</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">üîç</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-green-900\">Drill-Down</p>\r\n                    <p className=\"text-sm text-green-700\">Click for details</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl hover:shadow-md transition-shadow\">\r\n                  <span className=\"text-2xl\">‚ö°</span>\r\n                  <div>\r\n                    <p className=\"font-semibold text-orange-900\">Quick Presets</p>\r\n                    <p className=\"text-sm text-orange-700\">Fast date selection</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {viewMode === \"comparison\" && (\r\n          <div className=\"space-y-6\">\r\n            <ComparisonMode\r\n              attributionModel={attributionModel}\r\n              platform={platform}\r\n            />\r\n            \r\n            {/* Additional comparison insights */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üí° Comparison Tips</h3>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-700\">\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Compare equal-length periods for accurate trend analysis</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Look for consistent improvements across multiple metrics</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Consider seasonality when comparing different months</p>\r\n                </div>\r\n                <div className=\"flex items-start gap-2\">\r\n                  <span className=\"text-green-600 font-bold\">‚úì</span>\r\n                  <p>Use attribution models to understand customer journey changes</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {viewMode === \"presets\" && (\r\n          <div className=\"space-y-6\">\r\n            <DateRangePresets\r\n              onSelect={(range) => {\r\n                setDateRange(range);\r\n                setViewMode(\"overview\");\r\n              }}\r\n              currentRange={dateRange}\r\n            />\r\n            \r\n            {/* Preset usage guide */}\r\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">üìö Preset Guide</h3>\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div className=\"flex items-start gap-3 p-3 bg-blue-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üìÖ</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-blue-900\">Quick Select</p>\r\n                    <p className=\"text-blue-700\">Best for daily monitoring and recent performance checks</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-3 bg-purple-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üóìÔ∏è</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-purple-900\">Weekly Ranges</p>\r\n                    <p className=\"text-purple-700\">Ideal for week-over-week trend analysis</p>\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-start gap-3 p-3 bg-green-50 rounded-lg\">\r\n                  <span className=\"text-xl\">üìä</span>\r\n                  <div>\r\n                    <p className=\"font-medium text-green-900\">Monthly Ranges</p>\r\n                    <p className=\"text-green-700\">Perfect for strategic planning and budget reviews</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Drill-Down Modal */}\r\n      {drillDownData.isOpen && drillDownData.data && (\r\n        <DrillDownModal\r\n          isOpen={drillDownData.isOpen}\r\n          onClose={closeDrillDown}\r\n          data={drillDownData.data}\r\n          dateRange={dateRange}\r\n          attributionModel={attributionModel}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}